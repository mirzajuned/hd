<div class="row ">

  <div class="col-md-12">

    <div id="diagnosis">

      <table class="table table-striped table-bordered">
        <thead>
        <tr>
          <th width="35%" style="padding-top:0px;padding-bottom:0px;"></th>
          <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
          <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
          <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
          <th width="5%" style="padding-top:0px;padding-bottom:0px;"></th>
        </tr>
        </thead>
        <tbody class="diagnosis-added">

        <% diagnosislist.each_with_index do |elem, i| %>

            <tr class="diagnosislist">

              <td>
                <%= hidden_field_tag "diagnosislist_attributes[#{i}][id]", elem.id, {:class => 'form-control id' } %>
                <%= hidden_field_tag "diagnosislist_attributes[#{i}][_destroy]", "0", {:class => 'form-control' } %>
                <div class="form-group">
                  <div class="input-group mb15">

                    <%= text_field_tag "diagnosislist_attributes[#{i}][diagnosisname]", elem.diagnosisname, {:maxlength => 50, :size => 50, :class => 'form-control diagnosisname' } %>
                    <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscode]", elem.icddiagnosiscode, {:class => 'form-control icddiagnosiscode' } %>
                    <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodelength]", elem.icddiagnosiscodelength, {:class => 'form-control icddiagnosiscodelength' } %>
                    <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeposition]", elem.icddiagnosiscodeposition, {:class => 'form-control icddiagnosiscodeposition' } %>
                    <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeselectedfrom]", elem.icddiagnosiscodeselectedfrom, {:class => 'form-control icddiagnosiscodeselectedfrom' } %>
                    <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeiscustom]", elem.icddiagnosiscodeiscustom, {:class => 'form-control icddiagnosiscodeiscustom' } %>
                    <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodehasattributes]", elem.icddiagnosiscodehasattributes, {:class => 'form-control icddiagnosiscodehasattributes' } %>
                    <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodehasposition_6]", elem.icddiagnosiscodehasposition_6, {:class => 'form-control icddiagnosiscodehasposition_6' } %>
                    <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeposition_6position]", elem.icddiagnosiscodeposition_6position, {:class => 'form-control icddiagnosiscodeposition_6position' } %>

                  </div>
                </div>

              </td>

              <% if elem.icddiagnosiscodehasattributes == "Y" %>

                  <% if elem.position_4? %>

                      <% if elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}") == "Y" %>

                          <td>
                            <%= select_tag "diagnosislist_attributes[#{i}][position_4]", options_for_select(elem.get_diagnosis_icd_attributes("#{elem.icddiagnosiscode}", (elem.icddiagnosiscodelength.to_i + 1)), elem.position_4), { :class => 'form-control position_4'} %>

                            <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}" } %>

                            <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}" } %>

                            <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}" } %>

                            <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}" } %>

                            <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}" } %>
                          </td>

                      <% elsif elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}") == "N" %>

                          <td>
                            <%= hidden_field_tag "diagnosislist_attributes[#{i}][position_4]", elem.position_4, {:class => 'form-control position_4' } %>

                            <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}" } %>

                            <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}" } %>

                            <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}" } %>

                            <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}" } %>

                            <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}" } %>
                          </td>

                      <% end %>

                  <% end %>

                  <% if elem.position_5? %>

                      <% if elem.position_4? %>

                          <% if elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}") == "Y" %>

                              <td>
                                <%= select_tag "diagnosislist_attributes[#{i}][position_5]", options_for_select(elem.get_diagnosis_icd_attributes("#{elem.icddiagnosiscode}#{elem.position_4}", (elem.icddiagnosiscodelength.to_i + 2)), elem.position_5), { :class => 'form-control position_5'} %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}" } %>
                              </td>

                          <% elsif elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}") == "N" %>

                              <td>
                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][position_5]", elem.position_5, {:class => 'form-control position_5' } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}" } %>
                              </td>

                          <% end %>

                      <% else %>

                          <% if elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}") == "Y" %>

                              <td>
                                <%= select_tag "diagnosislist_attributes[#{i}][position_5]", options_for_select(elem.get_diagnosis_icd_attributes("#{elem.icddiagnosiscode}", (elem.icddiagnosiscodelength.to_i + 1)), elem.position_5), { :class => 'form-control position_5'} %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}" } %>
                              </td>

                          <% elsif elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}") == "N" %>

                              <td>
                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][position_5]", elem.position_5, {:class => 'form-control position_5' } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}" } %>
                              </td>

                          <% end %>

                      <% end %>

                  <% end %>

                  <% if elem.position_6? %>

                      <% if elem.position_4? && elem.position_5? %>

                          <% if elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}") == "Y" %>

                              <td>
                                <%= select_tag "diagnosislist_attributes[#{i}][position_6]", options_for_select(elem.get_diagnosis_icd_attributes("#{elem.icddiagnosiscode}#{elem.position_4}#{elem.position_5}", (elem.icddiagnosiscodelength.to_i + 3)), elem.position_6), { :class => 'form-control position_6'} %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 3}" } %>
                              </td>

                          <% elsif elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}") == "N" %>

                              <td>
                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][position_6]", elem.position_6, {:class => 'form-control position_6' } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 3}" } %>
                              </td>

                          <% end %>

                      <% elsif elem.position_4? %>

                          <% if elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}") == "Y" %>

                              <td>
                                <%= select_tag "diagnosislist_attributes[#{i}][position_6]", options_for_select(elem.get_diagnosis_icd_attributes("#{elem.icddiagnosiscode}#{elem.position_4}", (elem.icddiagnosiscodelength.to_i + 2)), elem.position_6), { :class => 'form-control position_6'} %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}" } %>
                              </td>

                          <% elsif elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}") == "N" %>

                              <td>
                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][position_6]", elem.position_6, {:class => 'form-control position_6' } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}" } %>
                              </td>

                          <% end %>

                      <% elsif elem.position_5? %>

                          <% if elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}") == "Y" %>

                              <td>
                                <%= select_tag "diagnosislist_attributes[#{i}][position_6]", options_for_select(elem.get_diagnosis_icd_attributes("#{elem.icddiagnosiscode}#{elem.position_5}", (elem.icddiagnosiscodelength.to_i + 2)), elem.position_6), { :class => 'form-control position_6'} %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}" } %>
                              </td>

                          <% elsif elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}") == "N" %>

                              <td>
                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][position_6]", elem.position_6, {:class => 'form-control position_6' } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}" } %>
                              </td>

                          <% end %>

                      <% else %>

                          <% if elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}") == "Y" %>

                              <td>
                                <%= select_tag "diagnosislist_attributes[#{i}][position_6]", options_for_select(elem.get_diagnosis_icd_attributes("#{elem.icddiagnosiscode}", (elem.icddiagnosiscodelength.to_i + 1)), elem.position_6), { :class => 'form-control position_6'} %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}" } %>
                              </td>

                          <% elsif elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}") == "N" %>

                              <td>
                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][position_6]", elem.position_6, {:class => 'form-control position_6' } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 1}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 1}" } %>
                              </td>

                          <% end %>

                      <% end %>

                  <% end %>

                  <% if elem.position_7? %>

                      <% if elem.position_4? && elem.position_5? && elem.position_6? %>

                          <% if elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 4}") == "Y" %>

                              <td>
                                <%= select_tag "diagnosislist_attributes[#{i}][position_7]", options_for_select(elem.get_diagnosis_icd_attributes("#{elem.icddiagnosiscode}#{elem.position_4}#{elem.position_5}#{elem.position_6}", (elem.icddiagnosiscodelength.to_i + 4)), elem.position_7), { :class => 'form-control position_7'} %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 4}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 4}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 4}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 4}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 4}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 4}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 4}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 4}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 4}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 4}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 4}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 4}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 4}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 4}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 4}" } %>
                              </td>

                          <% elsif elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 4}") == "N" %>

                              <td>
                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][position_7]", elem.position_7, {:class => 'form-control position_7' } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 4}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 4}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 4}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 4}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 4}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 4}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 4}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 4}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 4}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 4}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 4}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 4}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 4}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 4}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 4}" } %>
                              </td>

                          <% end %>

                      <% elsif elem.position_5? && elem.position_6? %>

                          <% if elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}") == "Y" %>

                              <td>
                                <%= select_tag "diagnosislist_attributes[#{i}][position_7]", options_for_select(elem.get_diagnosis_icd_attributes("#{elem.icddiagnosiscode}#{elem.position_5}#{elem.position_6}", (elem.icddiagnosiscodelength.to_i + 3)), elem.position_7), { :class => 'form-control position_7'} %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 3}" } %>
                              </td>

                          <% elsif elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}") == "N" %>

                              <td>
                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][position_7]", elem.position_7, {:class => 'form-control position_7' } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 3}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 3}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 3}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 3}" } %>
                              </td>

                          <% end %>

                      <% elsif elem.position_6? %>

                          <% if elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}") == "Y" %>

                              <td>
                                <%= select_tag "diagnosislist_attributes[#{i}][position_7]", options_for_select(elem.get_diagnosis_icd_attributes("#{elem.icddiagnosiscode}#{elem.position_6}", (elem.icddiagnosiscodelength.to_i + 2)), elem.position_7), { :class => 'form-control position_7'} %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}" } %>
                              </td>

                          <% elsif elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}") == "N" %>

                              <td>
                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][position_7]", elem.position_7, {:class => 'form-control position_7' } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrposition_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrdisplayrule_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattrisselected_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeisposition_6_#{elem.icddiagnosiscodelength + 2}" } %>

                                <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}]", elem.send("icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}"), {:class => "form-control icddiagnosiscodeattriscustom_#{elem.icddiagnosiscodelength + 2}" } %>
                              </td>

                          <% end %>

                      <% end %>

                  <% end %>

                  <td>
                    <div class="form-group">
                      <a id="" class="btn btn-sm btn-primary btn-danger removediagnosisbutton0" href="javascript:;" name="removediagnosisbutton"><span class="glyphicon glyphicon-remove"></span></a>
                      <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddagnosisdate]", elem.icddagnosisdate, {:class => 'form-control icddagnosisdate' } %>
                      <%= hidden_field_tag "diagnosislist_attributes[#{i}][icddiagnosisfullcode]", elem.icddiagnosisfullcode, {:class => 'form-control icddiagnosisfullcode' } %>
                    </div>
                  </td>

              <% elsif elem.icddiagnosiscodehasattributes == "N" %>

                  <td>
                  </td>

                  <td>
                  </td>

                  <td>
                  </td>

                  <td>
                    <div class="form-group"><a id="" class="btn btn-sm btn-primary btn-danger removediagnosisbutton0" href="javascript:;" name="removediagnosisbutton"><span class="glyphicon glyphicon-remove"></span></a></div>
                  </td>

              <% end %>

            </tr>

        <% end %>

        </tbody>

      </table>

      <div class="diagnosis-removed" style="display:none;">
      </div>

    </div>

  </div>

</div>
<% unless diagnosislist.count > 0 %>
    <h4 class="diagnosis-tooltip" style="margin-top: 12px;"><i class="fa fa-long-arrow-left">&nbsp;&nbsp;ADD Diagnosis From Here</i></h4>
<% end %>