<% if opdrecord != nil%>
    <div class="examination mb5" id="examination">

      <% examination_counter = 0 %>
      <% generalexaminationcomments_counter = 0 %>
      <% generalexaminationcomments = "" %>
      <% generalexaminationcomments_op = "" %>

      <% unless opdrecord.generalexamination.blank? %>
          <% unless opdrecord.generalexamination == "Normal" %>
              <% if opdrecord.generalexaminationcomments.length > 0 %>
                  <% generalexaminationcomments = "General Comments- #{opdrecord.read_attribute(:"generalexaminationcomments")}" %>
                  <% generalexaminationcomments_op = "#{generalexaminationcomments}" %>
                  <% generalexaminationcomments_counter = generalexaminationcomments_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
          <% end %>
      <% end %>

      <% r_visualacuity_counter = 0 %>
      <% r_visualacuity_op = "" %>

      <% r_visualacuity_unaided = "" %>
      <% r_visualacuity_unaided_p = "" %>
      <% r_visualacuity_pinhole = "" %>
      <% r_visualacuity_pinhole_p = "" %>
      <% r_visualacuity_pinhole_ni = "" %>
      <% r_visualacuity_glasses = "" %>
      <% r_visualacuity_glasses_p = "" %>
      <% r_visualacuity_near = "" %>
      <% r_visualacuity_near_p = "" %>
      <% r_intraocularpressure_counter = 0 %>
      <% r_intraocularpressure_op = "" %>
      <% r_intraocularpressure = "" %>
      <% r_intraocularpressure_time = "" %>

      <% r_refraction_counter = 0 %>
      <% r_refraction_op = "" %>
      <% r_refraction_distant_sph = "" %>
      <% r_refraction_distant_cyl = "" %>
      <% r_refraction_distant_axis = "" %>
      <% r_refraction_distant_vision = "" %>
      <% r_refraction_near_sph = "" %>
      <% r_refraction_near_cyl = "" %>
      <% r_refraction_near_axis = "" %>
      <% r_refraction_near_vision = "" %>

      <% r_dilatedrefraction_counter = 0 %>
      <% r_dilatedrefraction_op = "" %>
      <% r_dilatedrefraction_distant_sph = "" %>
      <% r_dilatedrefraction_distant_cyl = "" %>
      <% r_dilatedrefraction_distant_axis = "" %>
      <% r_dilatedrefraction_distant_vision = "" %>
      <% r_dilatedrefraction_near_sph = "" %>
      <% r_dilatedrefraction_near_cyl = "" %>
      <% r_dilatedrefraction_near_axis = "" %>
      <% r_dilatedrefraction_near_vision = "" %>
      <% r_dilatedrefraction_drug_used = "" %>
      <% r_dilatedrefraction_drug_used_op = "" %>

      <% r_keratometry_counter = 0 %>
      <% r_keratometry_op = "" %>
      <% r_keratometry_distant_kh = "" %>
      <% r_keratometry_distant_axis = "" %>
      <% r_keratometry_near_kv = "" %>
      <% r_keratometry_near_axis = "" %>

      <% r_pgp_counter = 0 %>
      <% r_pgp_op = "" %>
      <% r_pgp_distant_sph = "" %>
      <% r_pgp_distant_cyl = "" %>
      <% r_pgp_distant_axis = "" %>
      <% r_pgp_near_sph = "" %>
      <% r_pgp_near_cyl = "" %>
      <% r_pgp_near_axis = "" %>
      <% r_pgp_typeoflens = "" %>
      <% r_pgp_comments_counter = 0 %>
      <% r_pgp_comments = "" %>

      <% r_pgp_counter2 = 0 %>
      <% r_pgp_op2 = "" %>
      <% r_pgp_distant_sph2 = "" %>
      <% r_pgp_distant_cyl2 = "" %>
      <% r_pgp_distant_axis2 = "" %>
      <% r_pgp_near_sph2 = "" %>
      <% r_pgp_near_cyl2 = "" %>
      <% r_pgp_near_axis2 = "" %>
      <% r_pgp_typeoflens2 = "" %>
      <% r_pgp_comments_counter2 = 0 %>
      <% r_pgp_comments2 = "" %>

      <% r_pgp_counter3 = 0 %>
      <% r_pgp_op3 = "" %>
      <% r_pgp_distant_sph3 = "" %>
      <% r_pgp_distant_cyl3 = "" %>
      <% r_pgp_distant_axis3 = "" %>
      <% r_pgp_near_sph3 = "" %>
      <% r_pgp_near_cyl3 = "" %>
      <% r_pgp_near_axis3 = "" %>
      <% r_pgp_typeoflens3 = "" %>
      <% r_pgp_comments_counter3 = 0 %>
      <% r_pgp_comments3 = "" %>

      <% r_appearance_counter = 0 %>
      <% r_appearance_op = "" %>
      <% r_appearance_phthisisbulbi = "" %>
      <% r_appearance_anophthalmos = "" %>
      <% r_appearance_micropththalmos = "" %>
      <% r_appearance_artificial = "" %>
      <% r_appearance_proptosis = "" %>
      <% r_appearance_dystopia = "" %>
      <% r_appearance_injured = "" %>
      <% r_appearance_swollen = "" %>
      <% r_appearance_comments = "" %>

      <% r_appendages_counter = 0 %>
      <% r_appendages_comments = 0 %>
      <% r_eyelid_counter = 0 %>
      <% r_eyelsahes_counter = 0 %>
      <% r_lacrimar_counter = 0 %>
      <% r_syringing_counter = 0 %>

      <% r_conjunctiva_counter = 0 %>
      <% r_conjunctiva_op = "" %>
      <% r_conjunctiva_congestion = "" %>
      <% r_conjunctiva_conjunctivitis = "" %>
      <% r_conjunctiva_episcleritis = "" %>
      <% r_conjunctiva_tear = "" %>
      <% r_conjunctiva_subconjunctival_haemorrhage = "" %>
      <% r_conjunctiva_foreign_body = "" %>
      <% r_conjunctiva_follicles = "" %>
      <% r_conjunctiva_papillae = "" %>
      <% r_conjunctiva_pinguecula = "" %>
      <% r_conjunctiva_pterygium = "" %>
      <% r_conjunctiva_phlycten = "" %>
      <% r_conjunctiva_conjuctival_blib = "" %>
      <% r_conjunctiva_comments = "" %>
      <% r_conjunctiva_comments_op = "" %>

      <% r_cornea_counter = 0 %>
      <% r_cornea_op = "" %>
      <% r_cornea_size = "" %>
      <% r_cornea_shape = "" %>
      <% r_cornea_surface = "" %>
      <% r_cornea_schirmer_test = "" %>
      <% r_cornea_comments_op = "" %>
      <% r_cornea_comments = "" %>

      <% r_anteriorchamber_counter = 0 %>
      <% r_anteriorchamber_op = "" %>
      <% r_anteriorchamber_comments_op = "" %>
      <% r_anteriorchamber_comments = "" %>
      <% r_anteriorchamber_depth = "" %>
      <% r_anteriorchamber_reaction = "" %>
      <% r_anteriorchamber_cells = "" %>
      <% r_anteriorchamber_flare = "" %>
      <% r_anteriorchamber_hyphema = "" %>
      <% r_anteriorchamber_hypopyon = "" %>
      <% r_anteriorchamber_foreignbody = "" %>

      <% r_anteriorchamber_depth_comment = "" %>
      <% r_anteriorchamber_reaction_comment = "" %>
      <% r_anteriorchamber_cells_comment = "" %>
      <% r_anteriorchamber_flare_comment = "" %>
      <% r_anteriorchamber_hyphema_comment = "" %>
      <% r_anteriorchamber_hypopyon_comment = "" %>
      <% r_anteriorchamber_foreignbody_comment = "" %>

      <% r_pupil_counter = 0 %>
      <% r_pupil_op = "" %>
      <% r_pupil_comments_op = "" %>
      <% r_pupil_comments = "" %>
      <% r_pupil_shape = "" %>
      <% r_pupil_reaction_to_light_direct = "" %>
      <% r_pupil_reaction_to_light_consensual = "" %>
      <% r_pupil_rapd = "" %>

      <% r_iris_counter = 0 %>
      <% r_iris_op = "" %>
      <% r_iris_comments_op = "" %>
      <% r_iris_comments = "" %>
      <% r_iris_shape = "" %>
      <% r_iris_neovascularisation = "" %>
      <% r_iris_synechiae = "" %>

      <% r_lens_counter = 0 %>
      <% r_lens_op = "" %>
      <% r_lens_comments_op = "" %>
      <% r_lens_comments = "" %>
      <% r_lens_nature = "" %>
      <% r_lens_position = "" %>
      <% r_lens_size = "" %>
      <% r_lens_grading_no = "" %>
      <% r_lens_grading_nc = "" %>
      <% r_lens_grading_c = "" %>
      <% r_lens_grading_p = "" %>

      <% r_extraocularmovements_counter = 0 %>
      <% r_extraocularmovements_op = "" %>
      <% r_extraocularmovements_comments_op = "" %>
      <% r_extraocularmovements_comments = "" %>
      <% r_extraocularmovements_uniocular = "" %>
      <% r_extraocularmovements_binocular = "" %>
      <% r_extraocularmovements_prism = "" %>
      <% r_extraocularmovements_squint = "" %>
      <% r_extraocularmovements_squint_tropia = "" %>
      <% r_extraocularmovements_squint_tropia_horizontal = "" %>
      <% r_extraocularmovements_squint_tropia_horizontal_esotropia = "" %>
      <% r_extraocularmovements_squint_tropia_horizontal_exotropia = "" %>
      <% r_extraocularmovements_squint_tropia_vertical = "" %>
      <% r_extraocularmovements_squint_tropia_paralytic = "" %>
      <% r_extraocularmovements_squint_phoria = "" %>

      <% r_fundus_counter = 0 %>
      <% r_fundus_op = "" %>
      <% r_fundus_comments_op = "" %>
      <% r_fundus_comments = "" %>

      <% r_fundus_media_select = "" %>
      <% r_fundus_media_comment = "" %>
      <% r_fundus_pvd_select = "" %>
      <% r_fundus_optdiscsize_select = "" %>
      <% r_fundus_cupratio_comment = "" %>
      <% r_fundus_opticdisc_comment = "" %>
      <% r_fundus_bloodvessel_comment = "" %>
      <% r_fundus_macula_comment = "" %>
      <% r_fundustext_comment = "" %>

      <% r_color_vision_counter = 0 %>

      <% r_objectivecomments_counter = 0 %>
      <% r_objectivecomments_op = "" %>
      <% r_objectivecomments_comments_op = "" %>
      <% r_objectivecomments = "" %>

      <% diagram_counter = 0 %>
      <% if opdrecord['r_cornea_diagram_present'] == "Y" %>
          <% diagram_counter = diagram_counter+1 %>
      <%end%>
      <% if opdrecord['r_corneaslit_diagram_present'] == "Y" %>
          <% diagram_counter = diagram_counter+1 %>
      <%end%>
      <% if opdrecord['r_fundus_diagram_present'] == "Y" %>
          <% diagram_counter = diagram_counter+1 %>
      <%end%>
      <% if opdrecord['l_cornea_diagram_present'] == "Y" %>
          <% diagram_counter = diagram_counter+1 %>
      <%end%>
      <% if opdrecord['l_corneaslit_diagram_present'] == "Y" %>
          <% diagram_counter = diagram_counter+1 %>
      <%end%>
      <% if opdrecord['l_fundus_diagram_present'] == "Y" %>
          <% diagram_counter = diagram_counter+1 %>
      <%end%>

      <% if opdrecord.read_attribute(:r_visualacuity_unaided_p).present? %>
          <%r_visualacuity_unaided_p = "(#{opdrecord.read_attribute(:r_visualacuity_unaided_p)})" %>
      <%end%>
      <% unless opdrecord.r_visualacuity_unaided.blank? %>
          <% r_visualacuity_unaided = "UCVA - #{opdrecord.read_attribute(:"r_visualacuity_unaided")}#{r_visualacuity_unaided_p}" %>
          <% r_visualacuity_op = "#{r_visualacuity_unaided}" %>
          <% r_visualacuity_counter = r_visualacuity_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>

      <% if opdrecord.read_attribute(:r_visualacuity_pinhole_p).present? %>
          <%r_visualacuity_pinhole_p = "(#{opdrecord.read_attribute(:r_visualacuity_pinhole_p)})" %>
      <%end%>
      <% if opdrecord.read_attribute(:r_visualacuity_pinhole_ni).present? %>
          <%r_visualacuity_pinhole_ni = "(#{opdrecord.read_attribute(:r_visualacuity_pinhole_ni)})" %>
      <%end%>
      <% unless opdrecord.r_visualacuity_pinhole.blank? %>
          <% r_visualacuity_pinhole = "PH- #{opdrecord.read_attribute(:"r_visualacuity_pinhole")}#{r_visualacuity_pinhole_p}#{r_visualacuity_pinhole_ni}" %>
          <% r_visualacuity_op = "#{r_visualacuity_op} #{r_visualacuity_pinhole}" %>
          <% r_visualacuity_counter = r_visualacuity_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>
      <% if opdrecord.read_attribute(:r_visualacuity_glasses_p).present? %>
          <%r_visualacuity_glasses_p = "(#{opdrecord.read_attribute(:r_visualacuity_glasses_p)})" %>
      <%end%>
      <% unless opdrecord.r_visualacuity_glasses.blank? %>
          <% r_visualacuity_glasses = "Glasses- #{opdrecord.read_attribute(:"r_visualacuity_glasses")}#{r_visualacuity_glasses_p}" %>
          <% r_visualacuity_op = "#{r_visualacuity_op} #{r_visualacuity_glasses}" %>
          <% r_visualacuity_counter = r_visualacuity_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>
      <% if opdrecord.read_attribute(:r_visualacuity_near_p).present? %>
          <%r_visualacuity_near_p = "(#{opdrecord.read_attribute(:r_visualacuity_near_p)})" %>
      <%end%>
      <% unless opdrecord.r_visualacuity_near.blank? %>
          <% r_visualacuity_near = "Near- #{opdrecord.read_attribute(:"r_visualacuity_near")}#{r_visualacuity_near_p}" %>
          <% r_visualacuity_op = "#{r_visualacuity_op} #{r_visualacuity_near}" %>
          <% r_visualacuity_counter = r_visualacuity_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>

      <% unless opdrecord.r_intraocularpressure == "0" %>
          <% r_intraocularpressure = "#{opdrecord.read_attribute(:"r_intraocularpressure")}" %>
          <% r_intraocularpressure_op = "#{r_intraocularpressure_op}#{r_intraocularpressure}" %>
          <% r_intraocularpressure_counter = r_intraocularpressure_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>

      <% if opdrecord.r_intraocularpressure_time.present? %>
          <% r_intraocularpressure_time = "#{opdrecord.read_attribute(:"r_intraocularpressure_time")}" %>
          <% r_intraocularpressure_op = "#{r_intraocularpressure_op} at #{r_intraocularpressure_time}" %>
          <% r_intraocularpressure_counter = r_intraocularpressure_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>

      <% if opdrecord.r_refraction_distant_sph.length > 0 %>
          <% r_refraction_distant_sph = "#{opdrecord.read_attribute(:"r_refraction_distant_sph")}" %>
          <% r_refraction_counter = r_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_refraction_distant_sph = "--" %>
      <% end %>

      <% if opdrecord.r_refraction_distant_cyl.length > 0 %>
          <% r_refraction_distant_cyl = "#{opdrecord.read_attribute(:"r_refraction_distant_cyl")}" %>
          <% r_refraction_counter = r_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_refraction_distant_cyl = "--" %>
      <% end %>
      <% if opdrecord.r_refraction_distant_axis.length > 0 %>
          <% r_refraction_distant_axis = "#{opdrecord.read_attribute(:"r_refraction_distant_axis")}" %>
          <% r_refraction_counter = r_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_refraction_distant_axis = "--" %>
      <% end %>
      <% unless opdrecord.r_refraction_distant_vision.blank? %>
          <% r_refraction_distant_vision = "#{opdrecord.read_attribute(:"r_refraction_distant_vision")}" %>
          <% r_refraction_counter = r_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_refraction_distant_vision = "--" %>
      <% end %>
      <% if opdrecord.r_refraction_near_sph.length > 0 %>
          <% r_refraction_near_sph = "#{opdrecord.read_attribute(:"r_refraction_near_sph")}" %>
          <% r_refraction_counter = r_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_refraction_near_sph = "--" %>
      <% end %>
      <% if opdrecord.r_refraction_near_cyl.length > 0 %>
          <% r_refraction_near_cyl = "#{opdrecord.read_attribute(:"r_refraction_near_cyl")}" %>
          <% r_refraction_counter = r_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_refraction_near_cyl = "--" %>
      <% end %>
      <% unless opdrecord.r_refraction_near_axis.blank? %>
          <% r_refraction_near_axis = "#{opdrecord.read_attribute(:"r_refraction_near_axis")}" %>
          <% r_refraction_counter = r_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_refraction_near_axis = "--" %>
      <% end %>
      <% unless opdrecord.r_refraction_near_vision.blank? %>
          <% r_refraction_near_vision = "#{opdrecord.read_attribute(:"r_refraction_near_vision")}" %>
          <% r_refraction_counter = r_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_refraction_near_vision = "--" %>
      <% end %>

      <% if opdrecord.r_dilatedrefraction_distant_sph.present? %>
          <% r_dilatedrefraction_distant_sph = "#{opdrecord.read_attribute(:"r_dilatedrefraction_distant_sph")}" %>
          <% r_dilatedrefraction_counter = r_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_dilatedrefraction_distant_sph = "--" %>
      <% end %>

      <% if opdrecord.r_dilatedrefraction_distant_cyl.present? %>
          <% r_dilatedrefraction_distant_cyl = "#{opdrecord.read_attribute(:"r_dilatedrefraction_distant_cyl")}" %>
          <% r_dilatedrefraction_counter = r_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_dilatedrefraction_distant_cyl = "--" %>
      <% end %>
      <% if opdrecord.r_dilatedrefraction_distant_axis.present? %>
          <% r_dilatedrefraction_distant_axis = "#{opdrecord.read_attribute(:"r_dilatedrefraction_distant_axis")}" %>
          <% r_dilatedrefraction_counter = r_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_dilatedrefraction_distant_axis = "--" %>
      <% end %>
      <% if opdrecord.r_dilatedrefraction_distant_vision.present? %>
          <% r_dilatedrefraction_distant_vision = "#{opdrecord.read_attribute(:"r_dilatedrefraction_distant_vision")}" %>
          <% r_dilatedrefraction_counter = r_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_dilatedrefraction_distant_vision = "--" %>
      <% end %>
      <% if opdrecord.r_dilatedrefraction_near_sph.present? %>
          <% r_dilatedrefraction_near_sph = "#{opdrecord.read_attribute(:"r_dilatedrefraction_near_sph")}" %>
          <% r_dilatedrefraction_counter = r_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_dilatedrefraction_near_sph = "--" %>
      <% end %>
      <% if opdrecord.r_dilatedrefraction_near_cyl.present? %>
          <% r_dilatedrefraction_near_cyl = "#{opdrecord.read_attribute(:"r_dilatedrefraction_near_cyl")}" %>
          <% r_dilatedrefraction_counter = r_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_dilatedrefraction_near_cyl = "--" %>
      <% end %>
      <% if opdrecord.r_dilatedrefraction_near_axis.present? %>
          <% r_dilatedrefraction_near_axis = "#{opdrecord.read_attribute(:"r_dilatedrefraction_near_axis")}" %>
          <% r_dilatedrefraction_counter = r_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_dilatedrefraction_near_axis = "--" %>
      <% end %>
      <% if opdrecord.r_dilatedrefraction_near_vision.present? %>
          <% r_dilatedrefraction_near_vision = "#{opdrecord.read_attribute(:"r_dilatedrefraction_near_vision")}" %>
          <% r_dilatedrefraction_counter = r_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_dilatedrefraction_near_vision = "--" %>
      <% end %>
      <% if opdrecord.r_dilatedrefraction_drug_used.present?%>
          <% r_dilatedrefraction_drug_used = "Drug Used- #{opdrecord.read_attribute(:"r_dilatedrefraction_drug_used")}" %>
          <% r_dilatedrefraction_drug_used_op = "#{r_dilatedrefraction_drug_used}" %>
          <% r_dilatedrefraction_counter = r_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>

      <% if opdrecord.r_keratometry_distant_kh.length > 0 %>
          <% r_keratometry_distant_kh = "#{opdrecord.read_attribute(:"r_keratometry_distant_kh")}" %>
          <% r_keratometry_counter = r_keratometry_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_keratometry_distant_kh = "--" %>
      <% end %>
      <% if opdrecord.r_keratometry_distant_axis.length > 0 %>
          <% r_keratometry_distant_axis = "#{opdrecord.read_attribute(:"r_keratometry_distant_axis")}" %>
          <% r_keratometry_counter = r_keratometry_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_keratometry_distant_axis = "--" %>
      <% end %>
      <% if opdrecord.r_keratometry_near_kv.length > 0 %>
          <% r_keratometry_near_kv = "#{opdrecord.read_attribute(:"r_keratometry_near_kv")}" %>
          <% r_keratometry_counter = r_keratometry_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_keratometry_near_kv = "--" %>
      <% end %>

      <% if opdrecord.r_keratometry_near_axis.length > 0 %>
          <% r_keratometry_near_axis = "#{opdrecord.read_attribute(:"r_keratometry_near_axis")}" %>
          <% r_keratometry_counter = r_keratometry_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_keratometry_near_axis = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_distant_sph.length > 0 %>
          <% r_pgp_distant_sph = "#{opdrecord.read_attribute(:"r_pgp_distant_sph")}" %>
          <% r_pgp_counter = r_pgp_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_distant_sph = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_distant_cyl.length > 0 %>
          <% r_pgp_distant_cyl = "#{opdrecord.read_attribute(:"r_pgp_distant_cyl")}" %>
          <% r_pgp_counter = r_pgp_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_distant_cyl = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_distant_axis.length > 0 %>
          <% r_pgp_distant_axis = "#{opdrecord.read_attribute(:"r_pgp_distant_axis")}" %>
          <% r_pgp_counter = r_pgp_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_distant_axis = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_near_sph.length > 0 %>
          <% r_pgp_near_sph = "#{opdrecord.read_attribute(:"r_pgp_near_sph")}" %>
          <% r_pgp_counter = r_pgp_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_near_sph = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_near_cyl.length > 0 %>
          <% r_pgp_near_cyl = "#{opdrecord.read_attribute(:"r_pgp_near_cyl")}" %>
          <% r_pgp_counter = r_pgp_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_near_cyl = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_near_axis.length > 0 %>
          <% r_pgp_near_axis = "#{opdrecord.read_attribute(:"r_pgp_near_axis")}" %>
          <% r_pgp_counter = r_pgp_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_near_axis = "--" %>
      <% end %>
      <% unless opdrecord.r_pgp_typeoflens == "" || opdrecord.r_pgp_typeoflens == nil%>
          <% r_pgp_typeoflens = "Type of Lens- #{opdrecord.read_attribute(:"r_pgp_typeoflens")}" %>
          <% r_pgp_op = "#{r_pgp_typeoflens}" %>
          <% r_pgp_counter = r_pgp_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>
      <% if opdrecord.r_pgp_comments.present? %>
        <% r_pgp_comments = r_pgp_comments.to_s %>
        <% r_pgp_comments_counter = r_pgp_comments_counter + 1 %>
        <% r_pgp_comments = "Comments- #{opdrecord.read_attribute(:r_pgp_comments)}" %>
        <% examination_counter = examination_counter + 1 %>
      <% end %>

      <% if opdrecord.r_pgp_distant_sph2.length > 0 %>
          <% r_pgp_distant_sph2 = "#{opdrecord.read_attribute(:"r_pgp_distant_sph2")}" %>
          <% r_pgp_counter2 = r_pgp_counter2 + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_distant_sph2 = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_distant_cyl2.length > 0 %>
          <% r_pgp_distant_cyl2 = "#{opdrecord.read_attribute(:"r_pgp_distant_cyl2")}" %>
          <% r_pgp_counter2 = r_pgp_counter2 + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_distant_cyl2 = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_distant_axis2.length > 0 %>
          <% r_pgp_distant_axis2 = "#{opdrecord.read_attribute(:"r_pgp_distant_axis2")}" %>
          <% r_pgp_counter2 = r_pgp_counter2 + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_distant_axis2 = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_near_sph2.length > 0 %>
          <% r_pgp_near_sph2 = "#{opdrecord.read_attribute(:"r_pgp_near_sph2")}" %>
          <% r_pgp_counter2 = r_pgp_counter2 + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_near_sph2 = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_near_cyl2.length > 0 %>
          <% r_pgp_near_cyl2 = "#{opdrecord.read_attribute(:"r_pgp_near_cyl2")}" %>
          <% r_pgp_counter2 = r_pgp_counter2 + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_near_cyl2 = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_near_axis2.length > 0 %>
          <% r_pgp_near_axis2 = "#{opdrecord.read_attribute(:"r_pgp_near_axis2")}" %>
          <% r_pgp_counter2 = r_pgp_counter2 + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_near_axis2 = "--" %>
      <% end %>
      <% unless opdrecord.r_pgp_typeoflens2 == "" || opdrecord.r_pgp_typeoflens2 == nil %>
          <% r_pgp_typeoflens2 = "Type of Lens- #{opdrecord.read_attribute(:"r_pgp_typeoflens2")}" %>
          <% r_pgp_op = "#{r_pgp_typeoflens2}" %>
          <% r_pgp_counter2 = r_pgp_counter2 + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>
      <% if opdrecord.r_pgp_comments2.present? %>
        <% r_pgp_comments2 = r_pgp_comments2.to_s %>
        <% r_pgp_comments_counter2 = r_pgp_comments_counter2 + 1 %>
        <% r_pgp_comments2 = "Comments- #{opdrecord.read_attribute(:r_pgp_comments2)}" %>
        <% examination_counter = examination_counter + 1 %>
      <% end %>

      <% if opdrecord.r_pgp_distant_sph3.length > 0 %>
          <% r_pgp_distant_sph3 = "#{opdrecord.read_attribute(:"r_pgp_distant_sph3")}" %>
          <% r_pgp_counter3 = r_pgp_counter3 + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_distant_sph3 = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_distant_cyl3.length > 0 %>
          <% r_pgp_distant_cyl3 = "#{opdrecord.read_attribute(:"r_pgp_distant_cyl3")}" %>
          <% r_pgp_counter3 = r_pgp_counter3 + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_distant_cyl3 = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_distant_axis3.length > 0 %>
          <% r_pgp_distant_axis3 = "#{opdrecord.read_attribute(:"r_pgp_distant_axis3")}" %>
          <% r_pgp_counter3 = r_pgp_counter3 + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_distant_axis3 = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_near_sph3.length > 0 %>
          <% r_pgp_near_sph3 = "#{opdrecord.read_attribute(:"r_pgp_near_sph3")}" %>
          <% r_pgp_counter3 = r_pgp_counter3 + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_near_sph3 = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_near_cyl3.length > 0 %>
          <% r_pgp_near_cyl3 = "#{opdrecord.read_attribute(:"r_pgp_near_cyl3")}" %>
          <% r_pgp_counter3 = r_pgp_counter3 + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_near_cyl3 = "--" %>
      <% end %>
      <% if opdrecord.r_pgp_near_axis3.length > 0 %>
          <% r_pgp_near_axis3 = "#{opdrecord.read_attribute(:"r_pgp_near_axis3")}" %>
          <% r_pgp_counter3 = r_pgp_counter3 + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% r_pgp_near_axis3 = "--" %>
      <% end %>
      <% unless opdrecord.r_pgp_typeoflens3 == "" || opdrecord.r_pgp_typeoflens3 == nil%>
          <% r_pgp_typeoflens3 = "Type of Lens- #{opdrecord.read_attribute(:"r_pgp_typeoflens3")}" %>
          <% r_pgp_op = "#{r_pgp_typeoflens3}" %>
          <% r_pgp_counter3 = r_pgp_counter3 + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>
      <% if opdrecord.r_pgp_comments3.present? %>
        <% r_pgp_comments3 = r_pgp_comments3.to_s %>
        <% r_pgp_comments_counter3 = r_pgp_comments_counter3 + 1 %>
        <% r_pgp_comments3 = "Comments- #{opdrecord.read_attribute(:r_pgp_comments3)}" %>
        <% examination_counter = examination_counter + 1 %>
      <% end %>

      <% unless opdrecord.r_appearance.blank? %>
          <% unless opdrecord.r_appearance == "Normal" %>
              <% unless opdrecord.r_appearance_phthisisbulbi == "No" %>
                  <% r_appearance_phthisisbulbi = "Phthisis Bulbi," %>
                  <% r_appearance_op = "#{r_appearance_phthisisbulbi}" %>
                  <% r_appearance_counter = r_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_appearance_anophthalmos == "No" %>
                  <% r_appearance_anophthalmos = "Anophthalmos," %>
                  <% r_appearance_op = "#{r_appearance_op} #{r_appearance_anophthalmos}" %>
                  <% r_appearance_counter = r_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_appearance_micropththalmos == "No" %>
                  <% r_appearance_micropththalmos = "Micropththalmos," %>
                  <% r_appearance_op = "#{r_appearance_op} #{r_appearance_micropththalmos}" %>
                  <% r_appearance_counter = r_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_appearance_artificial == "No" %>
                  <% r_appearance_artificial = "Artificial," %>
                  <% r_appearance_op = "#{r_appearance_op} #{r_appearance_artificial}" %>
                  <% r_appearance_counter = r_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_appearance_proptosis == "No" %>
                  <% r_appearance_proptosis = "Proptosis," %>
                  <% r_appearance_op = "#{r_appearance_op} #{r_appearance_proptosis}" %>
                  <% r_appearance_counter = r_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_appearance_dystopia == "No" %>
                  <% r_appearance_dystopia = "Dystopia," %>
                  <% r_appearance_op = "#{r_appearance_op} #{r_appearance_dystopia}" %>
                  <% r_appearance_counter = r_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_appearance_injured == "No" %>
                  <% r_appearance_injured = "Injured," %>
                  <% r_appearance_op = "#{r_appearance_op} #{r_appearance_injured}" %>
                  <% r_appearance_counter = r_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_appearance_swollen == "No" %>
                  <% r_appearance_swollen = "Swollen," %>
                  <% r_appearance_op = "#{r_appearance_op} #{r_appearance_swollen}" %>
                  <% r_appearance_counter = r_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_appearance_comments.present? %>
                  <% r_appearance_comments = "#{opdrecord.read_attribute(:"r_appearance_comments")}" %>
                  <% r_appearance_comments_op = " #{r_appearance_comments}" %>
                  <% r_appearance_counter = r_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% r_appearance_op = r_appearance_op.split("") %>
              <% r_appearance_op_count = r_appearance_op.count %>
              <% if r_appearance_op_count > 0 %>
                  <% r_appearance_op = (r_appearance_op.first r_appearance_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>
      <% unless opdrecord.r_conjunctiva.blank? %>
          <% unless opdrecord.r_conjunctiva == "Normal" %>
              <% unless opdrecord.r_conjunctiva_congestion == "No" %>
                  <% if opdrecord.r_conjunctiva_congestion_lgc != "" %>
                      <% r_conjunctiva_congestion_lgc = "-" + opdrecord.r_conjunctiva_congestion_lgc %>
                  <% else %>
                      <% r_conjunctiva_congestion_lgc = "" %>
                  <% end %>
                  <% r_conjunctiva_congestion = "Congestion#{r_conjunctiva_congestion_lgc}," %>
                  <% r_conjunctiva_op = "#{r_conjunctiva_congestion}" %>
                  <% r_conjunctiva_counter = r_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if false %>
                  <% unless opdrecord.r_conjunctiva_conjunctivitis == "No" %>
                      <% r_conjunctiva_conjunctivitis = "Conjunctivitis," %>
                      <% r_conjunctiva_op = "#{r_conjunctiva_op} #{r_conjunctiva_conjunctivitis}" %>
                      <% r_conjunctiva_counter = r_conjunctiva_counter + 1 %>
                      <% examination_counter = examination_counter + 1 %>
                  <% end %>
                  <% unless opdrecord.r_conjunctiva_episcleritis == "No" %>
                      <% r_conjunctiva_episcleritis = "Episcleritis," %>
                      <% r_conjunctiva_op = "#{r_conjunctiva_op} #{r_conjunctiva_episcleritis}" %>
                      <% r_conjunctiva_counter = r_conjunctiva_counter + 1 %>
                      <% examination_counter = examination_counter + 1 %>
                  <% end %>
              <% end %>
              <% unless opdrecord.r_conjunctiva_tear == "No" %>
                  <% r_conjunctiva_tear = "Tear," %>
                  <% r_conjunctiva_op = "#{r_conjunctiva_op} #{r_conjunctiva_tear}" %>
                  <% r_conjunctiva_counter = r_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_conjunctiva_conjuctival_blib == "No" %>
                  <% r_conjunctiva_conjuctival_blib = "Conjuctival Bleb," %>
                  <% r_conjunctiva_op = "#{r_conjunctiva_op} #{r_conjunctiva_conjuctival_blib}" %>
                  <% r_conjunctiva_counter = r_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_conjunctiva_subconjunctival_haemorrhage == "No" %>
                  <% r_conjunctiva_subconjunctival_haemorrhage = "SubConjunctival Haemorrhage," %>
                  <% r_conjunctiva_op = "#{r_conjunctiva_op} #{r_conjunctiva_subconjunctival_haemorrhage}" %>
                  <% r_conjunctiva_counter = r_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_conjunctiva_foreign_body == "Yes" %>
                  <% r_conjunctiva_foreign_body = "Foreign Body," %>
                  <% r_conjunctiva_op = "#{r_conjunctiva_op} #{r_conjunctiva_foreign_body}" %>
                  <% r_conjunctiva_counter = r_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_conjunctiva_follicles == "Yes" %>
                  <% r_conjunctiva_follicles = "Follicles," %>
                  <% r_conjunctiva_op = "#{r_conjunctiva_op} #{r_conjunctiva_follicles}" %>
                  <% r_conjunctiva_counter = r_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_conjunctiva_papillae == "Yes" %>
                  <% r_conjunctiva_papillae = "Papillae," %>
                  <% r_conjunctiva_op = "#{r_conjunctiva_op} #{r_conjunctiva_papillae}" %>
                  <% r_conjunctiva_counter = r_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_conjunctiva_pinguecula == "Yes" %>
                  <% r_conjunctiva_pinguecula = "Pinguecula," %>
                  <% r_conjunctiva_op = "#{r_conjunctiva_op} #{r_conjunctiva_pinguecula}" %>
                  <% r_conjunctiva_counter = r_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_conjunctiva_pterygium == "Yes" %>
                  <% r_conjunctiva_pterygium = "Pterygium," %>
                  <% r_conjunctiva_op = "#{r_conjunctiva_op} #{r_conjunctiva_pterygium}" %>
                  <% r_conjunctiva_counter = r_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_conjunctiva_phlycten == "Yes" %>
                  <% r_conjunctiva_phlycten = "Phlycten," %>
                  <% r_conjunctiva_op = "#{r_conjunctiva_op} #{r_conjunctiva_phlycten}" %>
                  <% r_conjunctiva_counter = r_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_conjunctiva_comments.present? %>
                  <% r_conjunctiva_comments = "#{opdrecord.read_attribute(:"r_conjunctiva_comments")}" %>
                  <% r_conjunctiva_comments_op = " #{r_conjunctiva_comments}" %>
                  <% r_conjunctiva_counter = r_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% r_conjunctiva_op = r_conjunctiva_op.split("") %>
              <% r_conjunctiva_op_count = r_conjunctiva_op.count %>
              <% if r_conjunctiva_op_count > 0 %>
                  <% r_conjunctiva_op = (r_conjunctiva_op.first r_conjunctiva_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>

      <% if opdrecord['r_cornea_diagram_present'] == "Y" %>
          <% r_cornea_counter = r_cornea_counter+1 %>
      <%end%>
      <% if opdrecord['r_corneaslit_diagram_present'] == "Y" %>
          <% r_cornea_counter = r_cornea_counter+1 %>
      <%end%>

      <% unless opdrecord.r_cornea.blank? %>
          <% unless opdrecord.r_cornea == "Normal" %>
              <% unless opdrecord.r_cornea_size == "Normal" %>
                  <% r_cornea_size = "Size- #{opdrecord.read_attribute(:"r_cornea_size")}," %>
                  <% r_cornea_op = "#{r_cornea_size}" %>
                  <% r_cornea_counter = r_cornea_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_cornea_shape == "Normal" %>
                  <% r_cornea_shape = "Shape- #{opdrecord.read_attribute(:"r_cornea_shape")}," %>
                  <% r_cornea_op = "#{r_cornea_op} #{r_cornea_shape}" %>
                  <% r_cornea_counter = r_cornea_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_cornea_surface == "Normal" %>
                  <% r_cornea_surface = "Surface- #{opdrecord.read_attribute(:"r_cornea_surface")}," %>
                  <% r_cornea_op = "#{r_cornea_op} #{r_cornea_surface}" %>
                  <% r_cornea_counter = r_cornea_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_cornea_schirmer_test == "" %>
                  <% r_cornea_schirmer_test = "Schirmer Test-#{opdrecord.read_attribute(:"r_cornea_schirmer_test")}(#{opdrecord.read_attribute(:"r_cornea_schirmer_dimension")}mm in #{opdrecord.read_attribute(:"r_cornea_schirmer_time")} min)," %>
                  <% r_cornea_op = "#{r_cornea_op} #{r_cornea_schirmer_test}" %>
                  <% r_cornea_counter = r_cornea_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_cornea_comments.length > 0 %>
                  <% r_cornea_comments = "#{opdrecord.read_attribute(:"r_cornea_comments")}" %>
                  <% r_cornea_comments_op = " #{r_cornea_comments}" %>
                  <% r_cornea_counter = r_cornea_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <% r_cornea_op = r_cornea_op.split("") %>
              <% r_cornea_op_count = r_cornea_op.count %>
              <% if r_cornea_op_count > 0 %>
                  <% r_cornea_op = (r_cornea_op.first r_cornea_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>
      <% unless opdrecord.r_anteriorchamber.blank? %>
          <% unless opdrecord.r_anteriorchamber == "Normal" %>
              <% unless opdrecord.r_anteriorchamber_depth == "Normal" %>
                  <% r_anteriorchamber_depth = "Depth- #{opdrecord.read_attribute(:"r_anteriorchamber_depth")} #{opdrecord.read_attribute(:"r_anteriorchamber_depth_comment")}," %>
                  <% r_anteriorchamber_op = "#{r_anteriorchamber_depth}" %>
                  <% r_anteriorchamber_counter = r_anteriorchamber_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_anteriorchamber_cells == "No" %>
                  <% r_anteriorchamber_cells = "Cells #{opdrecord.read_attribute(:"r_anteriorchamber_cells_comment")}," %>
                  <% r_anteriorchamber_op = "#{r_anteriorchamber_op} #{r_anteriorchamber_cells}" %>
                  <% r_anteriorchamber_counter = r_anteriorchamber_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_anteriorchamber_flare == "No" %>
                  <% r_anteriorchamber_flare = "Flare #{opdrecord.read_attribute(:"r_anteriorchamber_flare_comment")}," %>
                  <% r_anteriorchamber_op = "#{r_anteriorchamber_op} #{r_anteriorchamber_flare}" %>
                  <% r_anteriorchamber_counter = r_anteriorchamber_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_anteriorchamber_hyphema == "No" %>
                  <% r_anteriorchamber_hyphema = "Hyphema #{opdrecord.read_attribute(:"r_anteriorchamber_hyphema_comment")}," %>
                  <% r_anteriorchamber_op = "#{r_anteriorchamber_op} #{r_anteriorchamber_hyphema}" %>
                  <% r_anteriorchamber_counter = r_anteriorchamber_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_anteriorchamber_hypopyon == "No" %>
                  <% r_anteriorchamber_hypopyon = "Hypopyon #{opdrecord.read_attribute(:"r_anteriorchamber_hypopyon_comment")}," %>
                  <% r_anteriorchamber_op = "#{r_anteriorchamber_op} #{r_anteriorchamber_hypopyon}" %>
                  <% r_anteriorchamber_counter = r_anteriorchamber_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_anteriorchamber_foreignbody == "No" %>
                  <% r_anteriorchamber_foreignbody = "Foreign Body #{opdrecord.read_attribute(:"r_anteriorchamber_foreignbody_comment")}," %>
                  <% r_anteriorchamber_op = "#{r_anteriorchamber_op} #{r_anteriorchamber_foreignbody}" %>
                  <% r_anteriorchamber_counter = r_anteriorchamber_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_anteriorchamber_comments.length > 0 %>
                  <% r_anteriorchamber_comments = "#{opdrecord.read_attribute(:"r_anteriorchamber_comments")}" %>
                  <% r_anteriorchamber_comments_op = "#{r_anteriorchamber_comments}" %>
                  <% r_anteriorchamber_counter = r_anteriorchamber_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <% r_anteriorchamber_op = r_anteriorchamber_op.split("") %>
              <% r_anteriorchamber_op_count = r_anteriorchamber_op.count %>
              <% if r_anteriorchamber_op_count > 0 %>
                  <% r_anteriorchamber_op = (r_anteriorchamber_op.first r_anteriorchamber_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>
      <% unless opdrecord.r_pupil.blank? %>
          <% unless opdrecord.r_pupil == "Normal" %>
              <% if opdrecord.r_pupil_shape.length > 0 %>
                  <% r_pupil_shape = "Shape- #{opdrecord.read_attribute(:"r_pupil_shape")}," %>
                  <% r_pupil_op = "#{r_pupil_shape}" %>
                  <% r_pupil_counter = r_pupil_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_pupil_reaction_to_light_direct == "Normal" %>
                  <% r_pupil_reaction_to_light_direct = "Reaction to light Direct- #{opdrecord.read_attribute(:"r_pupil_reaction_to_light_direct")}," %>
                  <% r_pupil_op = "#{r_pupil_op} #{r_pupil_reaction_to_light_direct}" %>
                  <% r_pupil_counter = r_pupil_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_pupil_reaction_to_light_consensual == "Normal" %>
                  <% r_pupil_reaction_to_light_consensual = "Reaction to light consensual- #{opdrecord.read_attribute(:"r_pupil_reaction_to_light_consensual")}," %>
                  <% r_pupil_op = "#{r_pupil_op} #{r_pupil_reaction_to_light_consensual}" %>
                  <% r_pupil_counter = r_pupil_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_pupil_rapd == "No" %>
                  <% r_pupil_rapd = "RAPD," %>
                  <% r_pupil_op = "#{r_pupil_op} #{r_pupil_rapd}" %>
                  <% r_pupil_counter = r_pupil_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_pupil_comments.length > 0 %>
                  <% r_pupil_comments = "#{opdrecord.read_attribute(:"r_pupil_comments")}" %>
                  <% r_pupil_comments_op = "#{r_pupil_comments}" %>
                  <% r_pupil_counter = r_pupil_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <% r_pupil_op = r_pupil_op.split("") %>
              <% r_pupil_op_count = r_pupil_op.count %>
              <% if r_pupil_op_count > 0 %>
                  <% r_pupil_op = (r_pupil_op.first r_pupil_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>
      <% unless opdrecord.r_iris.blank? %>
          <% unless opdrecord.r_iris == "Normal" %>
              <% unless opdrecord.r_iris_shape == "Normal" %>
                  <% r_iris_shape = "Shape- #{opdrecord.read_attribute(:"r_iris_shape")}," %>
                  <% r_iris_op = "#{r_iris_shape}" %>
                  <% r_iris_counter = r_iris_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_iris_neovascularisation == "No" %>
                  <% r_iris_neovascularisation = "Neovascularisation" %>
                  <% r_iris_op = "#{r_iris_op}, #{r_iris_neovascularisation}" %>
                  <% r_iris_counter = r_iris_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_iris_synechiae == "No" %>
                  <% r_iris_synechiae = "Synechiae- #{opdrecord.read_attribute(:"r_iris_synechiae")}, " %>
                  <% r_iris_op = "#{r_iris_op}, #{r_iris_synechiae}" %>
                  <% r_iris_counter = r_iris_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_iris_comments.length > 0 %>
                  <% r_iris_comments = "#{opdrecord.read_attribute(:"r_iris_comments")}" %>
                  <% r_iris_comments_op = "#{r_iris_comments}" %>
                  <% r_iris_counter = r_iris_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <% r_iris_op = r_iris_op.split("") %>
              <% r_iris_op_count = r_iris_op.count %>
              <% if r_iris_op_count > 0 %>
                  <% r_iris_op = (r_iris_op.first r_iris_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>
      <% unless opdrecord.r_lens.blank? %>
          <% unless opdrecord.r_lens == "Normal" %>
              <% unless opdrecord.r_lens_nature == "Clear" %>
                  <% r_lens_nature = "Nature- #{opdrecord.read_attribute(:"r_lens_nature")}," %>
                  <% r_lens_op = "#{r_lens_nature}" %>
                  <% r_lens_counter = r_lens_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_lens_position == "Central" %>
                  <% r_lens_position = "Position- #{opdrecord.read_attribute(:"r_lens_position")}," %>
                  <% r_lens_op = "#{r_lens_op} #{r_lens_position}" %>
                  <% r_lens_counter = r_lens_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_lens_size == "Normal" %>
                  <% r_lens_size = "Lens Size- #{opdrecord.read_attribute(:"r_lens_size")}," %>
                  <% r_lens_op = "#{r_lens_op} #{r_lens_size}" %>
                  <% r_lens_counter = r_lens_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <%if  opdrecord.r_lens_grading_no.present? %>
                  <% r_lens_grading_no = "NS:#{opdrecord.read_attribute(:"r_lens_grading_no")}"%>
              <%end%>
              <%if  opdrecord.r_lens_grading_nc.present? %>
                  <% r_lens_grading_nc = "NC:#{opdrecord.read_attribute(:"r_lens_grading_nc")}"%>
              <%end%>
              <%if  opdrecord.r_lens_grading_c.present? %>
                  <% r_lens_grading_c = "C:#{opdrecord.read_attribute(:"r_lens_grading_c")}"%>
              <%end%>
              <%if  opdrecord.r_lens_grading_p.present? %>
                  <% r_lens_grading_p = "P:#{opdrecord.read_attribute(:"r_lens_grading_p")}"%>
              <%end%>

              <% if opdrecord.r_lens_grading_no.present? || opdrecord.r_lens_grading_nc.present? || opdrecord.r_lens_grading_c.present? || opdrecord.r_lens_grading_p.present? %>
                  <% r_lens_grading = "Lens Grading- #{r_lens_grading_no} #{r_lens_grading_nc} #{r_lens_grading_c} #{r_lens_grading_p}," %>
                  <% r_lens_op = "#{r_lens_op} #{r_lens_grading}" %>
                  <% r_lens_counter = r_lens_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <% if opdrecord.r_lens_comments.length > 0 %>
                  <% r_lens_comments = "#{opdrecord.read_attribute(:"r_lens_comments")}" %>
                  <% r_lens_comments_op = "#{r_lens_comments}" %>
                  <% r_lens_counter = r_lens_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <% r_lens_op = r_lens_op.split("") %>
              <% r_lens_op_count = r_lens_op.count %>
              <% if r_lens_op_count > 0 %>
                  <% r_lens_op = (r_lens_op.first r_lens_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>
      <% unless opdrecord.r_extraocularmovements.blank? %>
          <% unless opdrecord.r_extraocularmovements == "Normal" %>
              <% unless opdrecord.r_extraocularmovements_uniocular == "Full" %>
                  <% r_extraocularmovements_uniocular = "Uniocular- #{opdrecord.read_attribute(:"r_extraocularmovements_uniocular")}," %>
                  <% r_extraocularmovements_op = "#{r_extraocularmovements_uniocular}" %>
                  <% r_extraocularmovements_counter = r_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_extraocularmovements_binocular == "Full" %>
                  <% r_extraocularmovements_binocular = "Binocular- #{opdrecord.read_attribute(:"r_extraocularmovements_binocular")}," %>
                  <% r_extraocularmovements_op = "#{r_extraocularmovements_op} #{r_extraocularmovements_binocular}" %>
                  <% r_extraocularmovements_counter = r_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_extraocularmovements_prism.length > 0 %>
                  <% r_extraocularmovements_prism = "Prism- #{opdrecord.read_attribute(:"r_extraocularmovements_prism")}," %>
                  <% r_extraocularmovements_op = "#{r_extraocularmovements_op} #{r_extraocularmovements_prism}" %>
                  <% r_extraocularmovements_counter = r_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_extraocularmovements_squint.blank? %>
                  <% r_extraocularmovements_squint = "Squint- #{opdrecord.read_attribute(:"r_extraocularmovements_squint")}," %>
                  <% r_extraocularmovements_op = "#{r_extraocularmovements_op} #{r_extraocularmovements_squint}" %>
                  <% r_extraocularmovements_counter = r_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_extraocularmovements_squint_tropia.blank? %>
                  <% r_extraocularmovements_squint_tropia = "Tropia- #{opdrecord.read_attribute(:"r_extraocularmovements_squint_tropia")}," %>
                  <% r_extraocularmovements_op = "#{r_extraocularmovements_op} #{r_extraocularmovements_squint_tropia}" %>
                  <% r_extraocularmovements_counter = r_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_extraocularmovements_squint_tropia_horizontal.blank? %>
                  <% r_extraocularmovements_squint_tropia_horizontal = "Horizontal- #{opdrecord.read_attribute(:"r_extraocularmovements_squint_tropia_horizontal")}," %>
                  <% r_extraocularmovements_op = "#{r_extraocularmovements_op} #{r_extraocularmovements_squint_tropia_horizontal}" %>
                  <% r_extraocularmovements_counter = r_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_extraocularmovements_squint_tropia_horizontal_esotropia.blank? %>
                  <% r_extraocularmovements_squint_tropia_horizontal_esotropia = "Esotropia- #{opdrecord.read_attribute(:"r_extraocularmovements_squint_tropia_horizontal_esotropia")}," %>
                  <% r_extraocularmovements_op = "#{r_extraocularmovements_op} #{r_extraocularmovements_squint_tropia_horizontal_esotropia}" %>
                  <% r_extraocularmovements_counter = r_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_extraocularmovements_squint_tropia_horizontal_exotropia.blank? %>
                  <% r_extraocularmovements_squint_tropia_horizontal_exotropia = "Exotropia- #{opdrecord.read_attribute(:"r_extraocularmovements_squint_tropia_horizontal_exotropia")}," %>
                  <% r_extraocularmovements_op = "#{r_extraocularmovements_op} #{r_extraocularmovements_squint_tropia_horizontal_exotropia}" %>
                  <% r_extraocularmovements_counter = r_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_extraocularmovements_squint_tropia_vertical.blank? %>
                  <% r_extraocularmovements_squint_tropia_vertical = "Vertical- #{opdrecord.read_attribute(:"r_extraocularmovements_squint_tropia_vertical")}," %>
                  <% r_extraocularmovements_op = "#{r_extraocularmovements_op} #{r_extraocularmovements_squint_tropia_vertical}" %>
                  <% r_extraocularmovements_counter = r_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_extraocularmovements_squint_tropia_paralytic.blank? %>
                  <% r_extraocularmovements_squint_tropia_paralytic = "Paralytic- #{opdrecord.read_attribute(:"r_extraocularmovements_squint_tropia_paralytic")}," %>
                  <% r_extraocularmovements_op = "#{r_extraocularmovements_op} #{r_extraocularmovements_squint_tropia_paralytic}" %>
                  <% r_extraocularmovements_counter = r_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_extraocularmovements_squint_phoria.blank? %>
                  <% r_extraocularmovements_squint_phoria = "Phoria- #{opdrecord.read_attribute(:"r_extraocularmovements_squint_phoria")}," %>
                  <% r_extraocularmovements_op = "#{r_extraocularmovements_op} #{r_extraocularmovements_squint_phoria}" %>
                  <% r_extraocularmovements_counter = r_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_extraocularmovements_comments.length > 0 %>
                  <% r_extraocularmovements_comments = "#{opdrecord.read_attribute(:"r_extraocularmovements_comments")}" %>
                  <% r_extraocularmovements_comments_op = "#{r_extraocularmovements_comments}" %>
                  <% r_extraocularmovements_counter = r_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <% r_extraocularmovements_op = r_extraocularmovements_op.split("") %>
              <% r_extraocularmovements_op_count = r_extraocularmovements_op.count %>
              <% if r_extraocularmovements_op_count > 0 %>
                  <% r_extraocularmovements_op = (r_extraocularmovements_op.first r_extraocularmovements_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>
      <% if opdrecord['r_fundus_diagram_present'] == "Y" %>
          <% r_fundus_counter = r_fundus_counter+1 %>
      <%end%>
      <% unless opdrecord.r_fundus.blank? %>
          <% unless opdrecord.r_fundus == "Normal" %>
              <% unless opdrecord.r_fundus_media_select == "" %>
                  <% r_fundus_media_select = "Media-#{opdrecord.read_attribute(:"r_fundus_media_select")}(#{opdrecord.read_attribute(:"r_fundus_media_comment")})," %>
                  <% r_fundus_op = "#{r_fundus_op} #{r_fundus_media_select}" %>
                  <% r_fundus_counter = r_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_fundus_pvd_select == "" %>
                  <% r_fundus_pvd_select = "PVD-#{opdrecord.read_attribute(:"r_fundus_pvd_select")}," %>
                  <% r_fundus_op = "#{r_fundus_op} #{r_fundus_pvd_select}" %>
                  <% r_fundus_counter = r_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_fundus_optdiscsize_select == "" %>
                  <% r_fundus_optdiscsize_select = "OptDiscSize-#{opdrecord.read_attribute(:"r_fundus_optdiscsize_select")}," %>
                  <% r_fundus_op = "#{r_fundus_op} #{r_fundus_optdiscsize_select}" %>
                  <% r_fundus_counter = r_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_fundus_cupratio_comment == "" %>
                  <% r_fundus_cupratio_comment = "CupRatio-#{opdrecord.read_attribute(:"r_fundus_cupratio_comment")}," %>
                  <% r_fundus_op = "#{r_fundus_op} #{r_fundus_cupratio_comment}" %>
                  <% r_fundus_counter = r_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_fundus_opticdisc_comment == "" %>
                  <% r_fundus_opticdisc_comment = "OpticDisc-#{opdrecord.read_attribute(:"r_fundus_opticdisc_comment")}," %>
                  <% r_fundus_op = "#{r_fundus_op} #{r_fundus_opticdisc_comment}" %>
                  <% r_fundus_counter = r_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_fundus_bloodvessel_comment == "" %>
                  <% r_fundus_bloodvessel_comment = "Bloodvessel-#{opdrecord.read_attribute(:"r_fundus_bloodvessel_comment")}," %>
                  <% r_fundus_op = "#{r_fundus_op} #{r_fundus_bloodvessel_comment}" %>
                  <% r_fundus_counter = r_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_fundus_macula_comment == "" %>
                  <% r_fundus_macula_comment = "Macula-#{opdrecord.read_attribute(:"r_fundus_macula_comment")}," %>
                  <% r_fundus_op = "#{r_fundus_op} #{r_fundus_macula_comment}" %>
                  <% r_fundus_counter = r_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_fundustext_comment == "" %>
                  <% r_fundustext_comment = "Fundus-#{opdrecord.read_attribute(:"r_fundustext_comment")}," %>
                  <% r_fundus_op = "#{r_fundus_op} #{r_fundustext_comment}" %>
                  <% r_fundus_counter = r_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.r_fundus_comments.length > 0 %>
                  <% r_fundus_comments = "#{opdrecord.read_attribute(:"r_fundus_comments")}" %>
                  <% r_fundus_comments_op = "#{r_fundus_comments}" %>
                  <% r_fundus_counter = r_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <% r_fundus_op = r_fundus_op.split("") %>
              <% r_fundus_op_count = r_fundus_op.count %>
              <% if r_fundus_op_count > 0 %>
                  <% r_fundus_op = (r_fundus_op.first r_fundus_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>

      <% unless opdrecord.r_objectivecomments.blank? %>
          <% if opdrecord.r_objectivecomments.length > 0 %>
              <% r_objectivecomments = "#{opdrecord.read_attribute(:"r_objectivecomments")}" %>
              <% r_objectivecomments_comments_op = "#{r_objectivecomments}" %>
              <% r_objectivecomments_counter = r_objectivecomments_counter + 1 %>
              <% examination_counter = examination_counter + 1 %>
          <% end %>
      <% end %>

      <% unless opdrecord.r_color_vision.blank? %>
          <% if opdrecord.r_color_vision.length > 0 %>
              <% r_color_vision = "#{opdrecord.read_attribute(:"r_color_vision")}" %>
              <% r_color_vision_counter = r_color_vision_counter + 1 %>
              <% examination_counter = examination_counter + 1 %>
          <% end %>
      <% end %>

      <% l_visualacuity_counter = 0 %>
      <% l_visualacuity_op = "" %>
      <% l_visualacuity_unaided = "" %>
      <% l_visualacuity_unaided_p = "" %>
      <% l_visualacuity_pinhole = "" %>
      <% l_visualacuity_pinhole_p = "" %>
      <% l_visualacuity_pinhole_ni = "" %>
      <% l_visualacuity_glasses = "" %>
      <% l_visualacuity_glasses_p = "" %>
      <% l_visualacuity_near = "" %>
      <% l_visualacuity_near_p = "" %>
      <% l_intraocularpressure_counter = 0 %>
      <% l_intraocularpressure_op = "" %>
      <% l_intraocularpressure = "" %>
      <% l_intraocularpressure_time = "" %>

      <% l_refraction_counter = 0 %>
      <% l_refraction_op = "" %>
      <% l_refraction_distant_sph = "" %>
      <% l_refraction_distant_cyl = "" %>
      <% l_refraction_distant_axis = "" %>
      <% l_refraction_distant_vision = "" %>
      <% l_refraction_near_sph = "" %>
      <% l_refraction_near_cyl = "" %>
      <% l_refraction_near_axis = "" %>
      <% l_refraction_near_vision = "" %>

      <% l_dilatedrefraction_counter = 0 %>
      <% l_dilatedrefraction_op = "" %>
      <% l_dilatedrefraction_distant_sph = "" %>
      <% l_dilatedrefraction_distant_cyl = "" %>
      <% l_dilatedrefraction_distant_axis = "" %>
      <% l_dilatedrefraction_distant_vision = "" %>
      <% l_dilatedrefraction_near_sph = "" %>
      <% l_dilatedrefraction_near_cyl = "" %>
      <% l_dilatedrefraction_near_axis = "" %>
      <% l_dilatedrefraction_near_vision = "" %>
      <% l_dilatedrefraction_drug_used = "" %>
      <% l_dilatedrefraction_drug_used_op = "" %>

      <% l_keratometry_counter = 0 %>
      <% l_keratometry_op = "" %>
      <% l_keratometry_distant_kh = "" %>
      <% l_keratometry_distant_axis = "" %>
      <% l_keratometry_near_kv = "" %>
      <% l_keratometry_near_axis = "" %>

      <% l_pgp_counter = 0 %>
      <% l_pgp_op = "" %>
      <% l_pgp_distant_sph = "" %>
      <% l_pgp_distant_cyl = "" %>
      <% l_pgp_distant_axis = "" %>
      <% l_pgp_near_sph = "" %>
      <% l_pgp_near_cyl = "" %>
      <% l_pgp_near_axis = "" %>
      <% l_pgp_typeoflens = "" %>
      <% l_pgp_comments_counter = 0 %>
      <% l_pgp_comments = "" %>

      <% l_pgp_counter2 = 0 %>
      <% l_pgp_op2 = "" %>
      <% l_pgp_distant_sph2 = "" %>
      <% l_pgp_distant_cyl2 = "" %>
      <% l_pgp_distant_axis2 = "" %>
      <% l_pgp_near_sph2 = "" %>
      <% l_pgp_near_cyl2 = "" %>
      <% l_pgp_near_axis2 = "" %>
      <% l_pgp_typeoflens2 = "" %>
      <% l_pgp_comments_counter2 = 0 %>
      <% l_pgp_comments2 = "" %>

      <% l_pgp_counter3 = 0 %>
      <% l_pgp_op3 = "" %>
      <% l_pgp_distant_sph3 = "" %>
      <% l_pgp_distant_cyl3 = "" %>
      <% l_pgp_distant_axis3 = "" %>
      <% l_pgp_near_sph3 = "" %>
      <% l_pgp_near_cyl3 = "" %>
      <% l_pgp_near_axis3 = "" %>
      <% l_pgp_typeoflens3 = "" %>
      <% l_pgp_comments_counter3 = 0 %>
      <% l_pgp_comments3 = "" %>

      <% l_appearance_counter = 0 %>
      <% l_appearance_op = "" %>
      <% l_appearance_phthisisbulbi = "" %>
      <% l_appearance_anophthalmos = "" %>
      <% l_appearance_micropththalmos = "" %>
      <% l_appearance_artificial = "" %>
      <% l_appearance_proptosis = "" %>
      <% l_appearance_dystopia = "" %>
      <% l_appearance_injured = "" %>
      <% l_appearance_swollen = "" %>
      <% l_appearance_comments = "" %>

      <% l_appendages_counter = 0 %>
      <% l_appendages_comments = 0 %>
      <% l_eyelid_counter = 0 %>
      <% l_eyelsahes_counter= 0%>
      <% l_lacrimal_counter = 0%>
      <% l_syringing_counter = 0%>

      <% l_conjunctiva_counter = 0 %>
      <% l_conjunctiva_op = "" %>
      <% l_conjunctiva_congestion = "" %>
      <% l_conjunctiva_conjunctivitis = "" %>
      <% l_conjunctiva_episcleritis = "" %>
      <% l_conjunctiva_tear = "" %>
      <% l_conjunctiva_subconjunctival_haemorrhage = "" %>
      <% l_conjunctiva_foreign_body = "" %>
      <% l_conjunctiva_follicles = "" %>
      <% l_conjunctiva_papillae = "" %>
      <% l_conjunctiva_pinguecula = "" %>
      <% l_conjunctiva_pterygium = "" %>
      <% l_conjunctiva_phlycten = "" %>
      <% l_conjunctiva_conjuctival_blib = "" %>
      <% l_conjunctiva_comments = "" %>

      <% l_cornea_counter = 0 %>
      <% l_cornea_op = "" %>
      <% l_cornea_size = "" %>
      <% l_cornea_shape = "" %>
      <% l_cornea_schirmer_test = "" %>

      <% l_cornea_surface = "" %>
      <% l_cornea_comments_op = "" %>
      <% l_cornea_comments = "" %>

      <% l_anteriorchamber_counter = 0 %>
      <% l_anteriorchamber_op = "" %>
      <% l_anteriorchamber_comments_op = "" %>
      <% l_anteriorchamber_comments = "" %>
      <% l_anteriorchamber_depth = "" %>
      <% l_anteriorchamber_reaction = "" %>
      <% l_anteriorchamber_cells = "" %>
      <% l_anteriorchamber_flare = "" %>
      <% l_anteriorchamber_hyphema = "" %>
      <% l_anteriorchamber_hypopyon = "" %>
      <% l_anteriorchamber_foreignbody = "" %>

      <% l_anteriorchamber_depth_comment = "" %>
      <% l_anteriorchamber_reaction_comment = "" %>
      <% l_anteriorchamber_cells_comment = "" %>
      <% l_anteriorchamber_flare_comment = "" %>
      <% l_anteriorchamber_hyphema_comment = "" %>
      <% l_anteriorchamber_hypopyon_comment = "" %>
      <% l_anteriorchamber_foreignbody_comment = "" %>


      <% l_pupil_counter = 0 %>
      <% l_pupil_op = "" %>
      <% l_pupil_comments_op = "" %>
      <% l_pupil_comments = "" %>
      <% l_pupil_shape = "" %>
      <% l_pupil_reaction_to_light_direct = "" %>
      <% l_pupil_reaction_to_light_consensual = "" %>
      <% l_pupil_rapd = "" %>

      <% l_iris_counter = 0 %>
      <% l_iris_op = "" %>
      <% l_iris_comments_op = "" %>
      <% l_iris_comments = "" %>
      <% l_iris_shape = "" %>
      <% l_iris_neovascularisation = "" %>
      <% l_iris_synechiae = "" %>

      <% l_lens_counter = 0 %>
      <% l_lens_op = "" %>
      <% l_lens_comments_op = "" %>
      <% l_lens_comments = "" %>
      <% l_lens_nature = "" %>
      <% l_lens_position = "" %>
      <% l_lens_size = "" %>
      <% l_lens_grading_no = "" %>
      <% l_lens_grading_nc = "" %>
      <% l_lens_grading_c = "" %>
      <% l_lens_grading_p = "" %>

      <% l_extraocularmovements_counter = 0 %>
      <% l_extraocularmovements_op = "" %>
      <% l_extraocularmovements_comments_op = "" %>
      <% l_extraocularmovements_comments = "" %>
      <% l_extraocularmovements_uniocular = "" %>
      <% l_extraocularmovements_binocular = "" %>
      <% l_extraocularmovements_prism = "" %>
      <% l_extraocularmovements_squint = "" %>
      <% l_extraocularmovements_squint_tropia = "" %>
      <% l_extraocularmovements_squint_tropia_horizontal = "" %>
      <% l_extraocularmovements_squint_tropia_horizontal_esotropia = "" %>
      <% l_extraocularmovements_squint_tropia_horizontal_exotropia = "" %>
      <% l_extraocularmovements_squint_tropia_vertical = "" %>
      <% l_extraocularmovements_squint_tropia_paralytic = "" %>
      <% l_extraocularmovements_squint_phoria = "" %>

      <% l_fundus_counter = 0 %>
      <% l_fundus_op = "" %>
      <% l_fundus_comments_op = "" %>
      <% l_fundus_comments = "" %>

      <% l_fundus_media_select = "" %>
      <% l_fundus_media_comment = "" %>
      <% l_fundus_pvd_select = "" %>
      <% l_fundus_optdiscsize_select = "" %>
      <% l_fundus_cupratio_comment = "" %>
      <% l_fundus_opticdisc_comment = "" %>
      <% l_fundus_bloodvessel_comment = "" %>
      <% l_fundus_macula_comment = "" %>
      <% l_fundustext_comment = "" %>

      <% l_color_vision_counter = 0 %>

      <% l_objectivecomments_counter = 0 %>
      <% l_objectivecomments_op = "" %>
      <% l_objectivecomments_comments_op = "" %>
      <% l_objectivecomments = "" %>

      <% if opdrecord.read_attribute(:l_visualacuity_unaided_p).present? %>
          <%l_visualacuity_unaided_p = "(#{opdrecord.read_attribute(:l_visualacuity_unaided_p)})" %>
      <%end%>
      <% unless opdrecord.l_visualacuity_unaided.blank? %>
          <% l_visualacuity_unaided = "UCVA - #{opdrecord.read_attribute(:"l_visualacuity_unaided")}#{l_visualacuity_unaided_p}" %>
          <% l_visualacuity_op = "#{l_visualacuity_unaided}" %>
          <% l_visualacuity_counter = l_visualacuity_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>
      <% if opdrecord.read_attribute(:l_visualacuity_pinhole_p).present? %>
          <%l_visualacuity_pinhole_p = "(#{opdrecord.read_attribute(:l_visualacuity_pinhole_p)})" %>
      <%end%>
      <% if opdrecord.read_attribute(:l_visualacuity_pinhole_ni).present? %>
          <%l_visualacuity_pinhole_ni = "(#{opdrecord.read_attribute(:l_visualacuity_pinhole_ni)})" %>
      <%end%>
      <% unless opdrecord.l_visualacuity_pinhole.blank? %>
          <% l_visualacuity_pinhole = "PH- #{opdrecord.read_attribute(:"l_visualacuity_pinhole")}#{l_visualacuity_pinhole_p}#{l_visualacuity_pinhole_ni}" %>
          <% l_visualacuity_op = "#{l_visualacuity_op} #{l_visualacuity_pinhole}" %>
          <% l_visualacuity_counter = l_visualacuity_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>
      <% if opdrecord.read_attribute(:l_visualacuity_glasses_p).present? %>
          <%l_visualacuity_glasses_p = "(#{opdrecord.read_attribute(:l_visualacuity_glasses_p)})" %>
      <%end%>
      <% unless opdrecord.l_visualacuity_glasses.blank? %>
          <% l_visualacuity_glasses = "Glasses- #{opdrecord.read_attribute(:"l_visualacuity_glasses")}#{l_visualacuity_glasses_p}" %>
          <% l_visualacuity_op = "#{l_visualacuity_op} #{l_visualacuity_glasses}" %>
          <% l_visualacuity_counter = l_visualacuity_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>
      <% if opdrecord.read_attribute(:l_visualacuity_near_p).present? %>
          <%l_visualacuity_near_p = "(#{opdrecord.read_attribute(:l_visualacuity_near_p)})" %>
      <%end%>
      <% unless opdrecord.l_visualacuity_near.blank? %>
          <% l_visualacuity_near = "Near- #{opdrecord.read_attribute(:"l_visualacuity_near")}#{l_visualacuity_near_p}" %>
          <% l_visualacuity_op = "#{l_visualacuity_op} #{l_visualacuity_near}" %>
          <% l_visualacuity_counter = l_visualacuity_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>

      <% unless opdrecord.l_intraocularpressure == "0" %>
          <% l_intraocularpressure = "#{opdrecord.read_attribute(:"l_intraocularpressure")}" %>
          <% l_intraocularpressure_op = "#{l_intraocularpressure_op}#{l_intraocularpressure}" %>
          <% l_intraocularpressure_counter = l_intraocularpressure_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>
      <% if opdrecord.l_intraocularpressure_time.present? %>
          <% l_intraocularpressure_time = "#{opdrecord.read_attribute(:"l_intraocularpressure_time")}" %>
          <% l_intraocularpressure_op = "#{l_intraocularpressure_op} at #{l_intraocularpressure_time}" %>
          <% l_intraocularpressure_counter = l_intraocularpressure_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>
      <% if opdrecord.l_refraction_distant_sph.length > 0 %>
          <% l_refraction_distant_sph = "#{opdrecord.read_attribute(:"l_refraction_distant_sph")}" %>
          <% l_refraction_counter = l_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_refraction_distant_sph = "--" %>
      <% end %>
      <% if opdrecord.l_refraction_distant_cyl.length > 0 %>
          <% l_refraction_distant_cyl = "#{opdrecord.read_attribute(:"l_refraction_distant_cyl")}" %>
          <% l_refraction_counter = l_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_refraction_distant_cyl = "--" %>
      <% end %>
      <% if opdrecord.l_refraction_distant_axis.length > 0 %>
          <% l_refraction_distant_axis = "#{opdrecord.read_attribute(:"l_refraction_distant_axis")}" %>
          <% l_refraction_counter = l_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_refraction_distant_axis = "--" %>
      <% end %>
      <% unless opdrecord.l_refraction_distant_vision.blank? %>
          <% l_refraction_distant_vision = "#{opdrecord.read_attribute(:"l_refraction_distant_vision")}" %>
          <% l_refraction_counter = l_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_refraction_distant_vision = "--" %>
      <% end %>
      <% if opdrecord.l_refraction_near_sph.length > 0 %>
          <% l_refraction_near_sph = "#{opdrecord.read_attribute(:"l_refraction_near_sph")}" %>
          <% l_refraction_counter = l_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_refraction_near_sph = "--" %>
      <% end %>
      <% if opdrecord.l_refraction_near_cyl.length > 0 %>
          <% l_refraction_near_cyl = "#{opdrecord.read_attribute(:"l_refraction_near_cyl")}" %>
          <% l_refraction_counter = l_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_refraction_near_cyl = "--" %>
      <% end %>
      <% if opdrecord.l_refraction_near_axis.length > 0 %>
          <% l_refraction_near_axis = "#{opdrecord.read_attribute(:"l_refraction_near_axis")}" %>
          <% l_refraction_counter = l_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_refraction_near_axis = "--" %>
      <% end %>
      <% unless opdrecord.l_refraction_near_vision.blank? %>
          <% l_refraction_near_vision = "#{opdrecord.read_attribute(:"l_refraction_near_vision")}" %>
          <% l_refraction_counter = l_refraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_refraction_near_vision = "--" %>
      <% end %>
      <% if opdrecord.l_dilatedrefraction_distant_sph.present? %>
          <% l_dilatedrefraction_distant_sph = "#{opdrecord.read_attribute(:"l_dilatedrefraction_distant_sph")}" %>
          <% l_dilatedrefraction_counter = l_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_dilatedrefraction_distant_sph = "--" %>
      <% end %>
      <% if opdrecord.l_dilatedrefraction_distant_cyl.present? %>
          <% l_dilatedrefraction_distant_cyl = "#{opdrecord.read_attribute(:"l_dilatedrefraction_distant_cyl")}" %>
          <% l_dilatedrefraction_counter = l_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_dilatedrefraction_distant_cyl = "--" %>
      <% end %>
      <% if opdrecord.l_dilatedrefraction_distant_axis.present? %>
          <% l_dilatedrefraction_distant_axis = "#{opdrecord.read_attribute(:"l_dilatedrefraction_distant_axis")}" %>
          <% l_dilatedrefraction_counter = l_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_dilatedrefraction_distant_axis = "--" %>
      <% end %>
      <% if opdrecord.l_dilatedrefraction_distant_vision.present? %>
          <% l_dilatedrefraction_distant_vision = "#{opdrecord.read_attribute(:"l_dilatedrefraction_distant_vision")}" %>
          <% l_dilatedrefraction_counter = l_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_dilatedrefraction_distant_vision = "--" %>
      <% end %>
      <% if opdrecord.l_dilatedrefraction_near_sph.present? %>
          <% l_dilatedrefraction_near_sph = "#{opdrecord.read_attribute(:"l_dilatedrefraction_near_sph")}" %>
          <% l_dilatedrefraction_counter = l_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_dilatedrefraction_near_sph = "--" %>
      <% end %>
      <% if opdrecord.l_dilatedrefraction_near_cyl.present? %>
          <% l_dilatedrefraction_near_cyl = "#{opdrecord.read_attribute(:"l_dilatedrefraction_near_cyl")}" %>
          <% l_dilatedrefraction_counter = l_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_dilatedrefraction_near_cyl = "--" %>
      <% end %>
      <% if opdrecord.l_dilatedrefraction_near_axis.present? %>
          <% l_dilatedrefraction_near_axis = "#{opdrecord.read_attribute(:"l_dilatedrefraction_near_axis")}" %>
          <% l_dilatedrefraction_counter = l_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_dilatedrefraction_near_axis = "--" %>
      <% end %>
      <% if opdrecord.l_dilatedrefraction_near_vision.present? %>
          <% l_dilatedrefraction_near_vision = "#{opdrecord.read_attribute(:"l_dilatedrefraction_near_vision")}" %>
          <% l_dilatedrefraction_counter = l_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_dilatedrefraction_near_vision = "--" %>
      <% end %>

      <% if opdrecord.l_dilatedrefraction_drug_used.present?%>
          <% l_dilatedrefraction_drug_used = "Drug Used- #{opdrecord.read_attribute(:"l_dilatedrefraction_drug_used")}" %>
          <% l_dilatedrefraction_drug_used_op = "#{l_dilatedrefraction_drug_used}" %>
          <% l_dilatedrefraction_counter = l_dilatedrefraction_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>

      <% if opdrecord.l_keratometry_distant_kh.length > 0 %>
          <% l_keratometry_distant_kh = "#{opdrecord.read_attribute(:"l_keratometry_distant_kh")}" %>
          <% l_keratometry_counter = l_keratometry_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_keratometry_distant_kh = "--" %>
      <% end %>
      <% if opdrecord.l_keratometry_distant_axis.length > 0 %>
          <% l_keratometry_distant_axis = "#{opdrecord.read_attribute(:"l_keratometry_distant_axis")}" %>
          <% l_keratometry_counter = l_keratometry_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_keratometry_distant_axis = "--" %>
      <% end %>
      <% if opdrecord.l_keratometry_near_kv.length > 0 %>
          <% l_keratometry_near_kv = "#{opdrecord.read_attribute(:"l_keratometry_near_kv")}" %>
          <% l_keratometry_counter = l_keratometry_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_keratometry_near_kv = "--" %>
      <% end %>
      <% if opdrecord.l_keratometry_near_axis.length > 0 %>
          <% l_keratometry_near_axis = "#{opdrecord.read_attribute(:"l_keratometry_near_axis")}" %>
          <% l_keratometry_counter = l_keratometry_counter + 1 %>
          <% examination_counter = examination_counter + 1 %>
      <% else %>
          <% l_keratometry_near_axis = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_distant_sph.length > 0 %>
        <% l_pgp_distant_sph = "#{opdrecord.read_attribute(:"l_pgp_distant_sph")}" %>
        <% l_pgp_counter = l_pgp_counter + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_distant_sph = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_distant_cyl.length > 0 %>
        <% l_pgp_distant_cyl = "#{opdrecord.read_attribute(:"l_pgp_distant_cyl")}" %>
        <% l_pgp_counter = l_pgp_counter + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_distant_cyl = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_distant_axis.length > 0 %>
        <% l_pgp_distant_axis = "#{opdrecord.read_attribute(:"l_pgp_distant_axis")}" %>
        <% l_pgp_counter = l_pgp_counter + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_distant_axis = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_near_sph.length > 0 %>
        <% l_pgp_near_sph = "#{opdrecord.read_attribute(:"l_pgp_near_sph")}" %>
        <% l_pgp_counter = l_pgp_counter + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_near_sph = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_near_cyl.length > 0 %>
        <% l_pgp_near_cyl = "#{opdrecord.read_attribute(:"l_pgp_near_cyl")}" %>
        <% l_pgp_counter = l_pgp_counter + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_near_cyl = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_near_axis.length > 0 %>
        <% l_pgp_near_axis = "#{opdrecord.read_attribute(:"l_pgp_near_axis")}" %>
        <% l_pgp_counter = l_pgp_counter + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_near_axis = "--" %>
      <% end %>

      <% unless opdrecord.l_pgp_typeoflens == "" || opdrecord.l_pgp_typeoflens == nil   %>
        <% l_pgp_typeoflens = "Type of Lens- #{opdrecord.read_attribute(:"l_pgp_typeoflens")}" %>
        <% l_pgp_op = "#{l_pgp_typeoflens}" %>
        <% l_pgp_counter = l_pgp_counter + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% end %>
      <% if opdrecord.l_pgp_comments.present? %>
        <% l_pgp_comments = l_pgp_comments.to_s %>
        <% l_pgp_comments_counter = l_pgp_comments_counter + 1 %>
        <% l_pgp_comments = "Comments- #{opdrecord.read_attribute(:l_pgp_comments)}" %>
        <% examination_counter = examination_counter + 1 %>
      <% end %>

      <% if opdrecord.l_pgp_distant_sph2.length > 0 %>
        <% l_pgp_distant_sph2 = "#{opdrecord.read_attribute(:"l_pgp_distant_sph2")}" %>
        <% l_pgp_counter2 = l_pgp_counter2 + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_distant_sph2 = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_distant_cyl2.length > 0 %>
        <% l_pgp_distant_cyl2 = "#{opdrecord.read_attribute(:"l_pgp_distant_cyl2")}" %>
        <% l_pgp_counter2 = l_pgp_counter2 + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_distant_cyl2 = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_distant_axis2.length > 0 %>
        <% l_pgp_distant_axis2 = "#{opdrecord.read_attribute(:"l_pgp_distant_axis2")}" %>
        <% l_pgp_counter2 = l_pgp_counter2 + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_distant_axis2 = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_near_sph2.length > 0 %>
        <% l_pgp_near_sph2 = "#{opdrecord.read_attribute(:"l_pgp_near_sph2")}" %>
        <% l_pgp_counter2 = l_pgp_counter2 + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_near_sph2 = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_near_cyl2.length > 0 %>
        <% l_pgp_near_cyl2 = "#{opdrecord.read_attribute(:"l_pgp_near_cyl2")}" %>
        <% l_pgp_counter2 = l_pgp_counter2 + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_near_cyl2 = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_near_axis2.length > 0 %>
        <% l_pgp_near_axis2 = "#{opdrecord.read_attribute(:"l_pgp_near_axis2")}" %>
        <% l_pgp_counter2 = l_pgp_counter2 + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_near_axis2 = "--" %>
      <% end %>

      <% unless opdrecord.l_pgp_typeoflens2 == "" || opdrecord.l_pgp_typeoflens2 == nil   %>
        <% l_pgp_typeoflens2 = "Type of Lens- #{opdrecord.read_attribute(:"l_pgp_typeoflens2")}" %>
        <% l_pgp_op = "#{l_pgp_typeoflens2}" %>
        <% l_pgp_counter2 = l_pgp_counter2 + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% end %>
      <% if opdrecord.l_pgp_comments2.present? %>
        <% l_pgp_comments2 = l_pgp_comments2.to_s %>
        <% l_pgp_comments_counter2 = l_pgp_comments_counter2 + 1 %>
        <% l_pgp_comments2 = "Comments- #{opdrecord.read_attribute(:l_pgp_comments2)}" %>
        <% examination_counter = examination_counter + 1 %>
      <% end %>

      <% if opdrecord.l_pgp_distant_sph3.length > 0 %>
        <% l_pgp_distant_sph3 = "#{opdrecord.read_attribute(:"l_pgp_distant_sph3")}" %>
        <% l_pgp_counter3 = l_pgp_counter3 + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_distant_sph3 = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_distant_cyl3.length > 0 %>
        <% l_pgp_distant_cyl3 = "#{opdrecord.read_attribute(:"l_pgp_distant_cyl3")}" %>
        <% l_pgp_counter3 = l_pgp_counter3 + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_distant_cyl3 = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_distant_axis3.length > 0 %>
        <% l_pgp_distant_axis3 = "#{opdrecord.read_attribute(:"l_pgp_distant_axis3")}" %>
        <% l_pgp_counter3 = l_pgp_counter3 + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_distant_axis3 = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_near_sph3.length > 0 %>
        <% l_pgp_near_sph3 = "#{opdrecord.read_attribute(:"l_pgp_near_sph3")}" %>
        <% l_pgp_counter3 = l_pgp_counter3 + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_near_sph3 = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_near_cyl3.length > 0 %>
        <% l_pgp_near_cyl3 = "#{opdrecord.read_attribute(:"l_pgp_near_cyl3")}" %>
        <% l_pgp_counter3 = l_pgp_counter3 + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_near_cyl3 = "--" %>
      <% end %>

      <% if opdrecord.l_pgp_near_axis3.length > 0 %>
        <% l_pgp_near_axis3 = "#{opdrecord.read_attribute(:"l_pgp_near_axis3")}" %>
        <% l_pgp_counter3 = l_pgp_counter3 + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% else %>
        <% l_pgp_near_axis3 = "--" %>
      <% end %>

      <% unless opdrecord.l_pgp_typeoflens3 == "" || opdrecord.l_pgp_typeoflens3 == nil   %>
        <% l_pgp_typeoflens3 = "Type of Lens- #{opdrecord.read_attribute(:"l_pgp_typeoflens3")}" %>
        <% l_pgp_op = "#{l_pgp_typeoflens3}" %>
        <% l_pgp_counter3 = l_pgp_counter3 + 1 %>
        <% examination_counter = examination_counter + 1 %>
      <% end %>
      <% if opdrecord.l_pgp_comments3.present? %>
        <% l_pgp_comments3 = l_pgp_comments3.to_s %>
        <% l_pgp_comments_counter3 = l_pgp_comments_counter3 + 1 %>
        <% l_pgp_comments3 = "Comments- #{opdrecord.read_attribute(:l_pgp_comments3)}" %>
        <% examination_counter = examination_counter + 1 %>
      <% end %>

      <% unless opdrecord.l_appearance.blank? %>
          <% unless opdrecord.l_appearance == "Normal" %>
              <% unless opdrecord.l_appearance_phthisisbulbi == "No" %>
                  <% l_appearance_phthisisbulbi = "Phthisis Bulbi," %>
                  <% l_appearance_op = "#{l_appearance_phthisisbulbi}" %>
                  <% l_appearance_counter = l_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_appearance_anophthalmos == "No" %>
                  <% l_appearance_anophthalmos = "Anophthalmos," %>
                  <% l_appearance_op = "#{l_appearance_op} #{l_appearance_anophthalmos}" %>
                  <% l_appearance_counter = l_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_appearance_micropththalmos == "No" %>
                  <% l_appearance_micropththalmos = "Micropththalmos," %>
                  <% l_appearance_op = "#{l_appearance_op} #{l_appearance_micropththalmos}" %>
                  <% l_appearance_counter = l_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_appearance_artificial == "No" %>
                  <% l_appearance_artificial = "Artificial," %>
                  <% l_appearance_op = "#{l_appearance_op} #{l_appearance_artificial}" %>
                  <% l_appearance_counter = l_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_appearance_proptosis == "No" %>
                  <% l_appearance_proptosis = "Proptosis," %>
                  <% l_appearance_op = "#{l_appearance_op} #{l_appearance_proptosis}" %>
                  <% l_appearance_counter = l_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_appearance_dystopia == "No" %>
                  <% l_appearance_dystopia = "Dystopia," %>
                  <% l_appearance_op = "#{l_appearance_op} #{l_appearance_dystopia}" %>
                  <% l_appearance_counter = l_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_appearance_injured == "No" %>
                  <% l_appearance_injured = "Injured," %>
                  <% l_appearance_op = "#{l_appearance_op} #{l_appearance_injured}" %>
                  <% l_appearance_counter = l_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_appearance_swollen == "No" %>
                  <% l_appearance_swollen = "Swollen," %>
                  <% l_appearance_op = "#{l_appearance_op} #{l_appearance_swollen}" %>
                  <% l_appearance_counter = l_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_appearance_comments.present? %>
                  <% l_appearance_comments = "#{opdrecord.read_attribute(:"l_appearance_comments")}" %>
                  <% l_appearance_comments_op = " #{l_appearance_comments}" %>
                  <% l_appearance_counter = l_appearance_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <% l_appearance_op = l_appearance_op.split("") %>
              <% l_appearance_op_count = l_appearance_op.count %>
              <% if l_appearance_op_count > 0 %>
                  <% l_appearance_op = (l_appearance_op.first l_appearance_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>


      <% if opdrecord.l_appendages == "Abnormal" %>
          <% unless opdrecord.l_appendages_tests.blank? %>
              <% if opdrecord.l_appendages_tests.include?"eyelids"%>
                  <%unless opdrecord.l_appendages_eyelids_chalazion == "No"%>
                      <% l_eyelid_counter= l_eyelid_counter+1%>
                      <% l_appendages_counter = l_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
                  <%unless opdrecord.l_appendages_eyelids_ptosis == "No"%>
                      <% l_eyelid_counter= l_eyelid_counter+1%>
                      <% l_appendages_counter = l_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
                  <%unless opdrecord.l_appendages_eyelids_swelling == "No"%>
                      <% l_eyelid_counter= l_eyelid_counter+1%>
                      <% l_appendages_counter = l_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
                  <%unless opdrecord.l_appendages_eyelids_entropion == "No"%>
                      <% l_eyelid_counter= l_eyelid_counter+1%>
                      <% l_appendages_counter = l_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
                  <%unless opdrecord.l_appendages_eyelids_ectropion == "No"%>
                      <% l_eyelid_counter= l_eyelid_counter+1%>
                      <% l_appendages_counter = l_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
                  <%unless opdrecord.l_appendages_eyelids_mass== "No"%>
                      <% l_eyelid_counter= l_eyelid_counter+1%>
                      <% l_appendages_counter = l_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>

              <% end %>
              <% if opdrecord.l_appendages_tests.include?"eyelashes" %>
                  <%unless opdrecord.l_appendages_eyelashes_trichiasis == "No"%>
                      <% l_eyelsahes_counter= l_eyelsahes_counter+1%>
                      <% l_appendages_counter = l_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
                  <%unless opdrecord.l_appendages_eyelashes_dystrichiasis == "No"%>
                      <% l_eyelsahes_counter= l_eyelsahes_counter+1%>
                      <% l_appendages_counter = l_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
              <% end %>
              <% if opdrecord.l_appendages_tests.include?"lacrimalsac" %>

                  <%unless opdrecord.l_appendages_lacrimalsac_swelling == "No"%>
                      <% l_lacrimal_counter = l_lacrimal_counter+1%>
                      <% l_appendages_counter = l_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
                  <%unless opdrecord.l_appendages_lacrimalsac_regurgitation == "No"%>
                      <% l_lacrimal_counter = l_lacrimal_counter+1%>
                      <% l_appendages_counter = l_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
              <% end %>
              <% if opdrecord.l_appendages_tests.include?"syringing" %>

                  <%unless opdrecord.l_appendages_syringing == "Patent"%>
                      <% l_syringing_counter = l_syringing_counter+1%>
                      <% l_appendages_counter = l_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%else%>
                      <% l_syringing_counter = l_syringing_counter+1%>
                      <% l_appendages_counter = l_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>

              <% end %>
          <% end %>
          <% if opdrecord.l_appendages_comments.present? %>
              <% l_appendages_comments = "#{opdrecord.read_attribute(:"l_appendages_comments")}" %>
              <% l_appendages_comments_op = " #{l_appendages_comments}" %>
              <% l_appendages_counter = l_appendages_counter + 1 %>
              <% examination_counter = examination_counter + 1 %>
          <% end %>
      <% end %>

      <% if opdrecord.r_appendages == "Abnormal" %>
          <% unless opdrecord.r_appendages_tests.blank? %>
              <% if opdrecord.r_appendages_tests.include?"eyelids"%>
                  <%unless opdrecord.r_appendages_eyelids_chalazion == "No"%>
                      <% r_eyelid_counter= r_eyelid_counter+1%>
                      <% r_appendages_counter = r_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
                  <%unless opdrecord.r_appendages_eyelids_ptosis == "No"%>
                      <% r_eyelid_counter= r_eyelid_counter+1%>
                      <% r_appendages_counter = r_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
                  <%unless opdrecord.r_appendages_eyelids_swelling == "No"%>
                      <% r_eyelid_counter= r_eyelid_counter+1%>
                      <% r_appendages_counter = r_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
                  <%unless opdrecord.r_appendages_eyelids_entropion == "No"%>
                      <% r_eyelid_counter= r_eyelid_counter+1%>
                      <% r_appendages_counter = r_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
                  <%unless opdrecord.r_appendages_eyelids_ectropion == "No"%>
                      <% r_eyelid_counter= r_eyelid_counter+1%>
                      <% r_appendages_counter = r_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
                  <%unless opdrecord.r_appendages_eyelids_mass== "No"%>
                      <% r_eyelid_counter= r_eyelid_counter+1%>
                      <% r_appendages_counter = r_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>

              <% end %>
              <% if opdrecord.r_appendages_tests.include?"eyelashes" %>
                  <%unless opdrecord.r_appendages_eyelashes_trichiasis == "No"%>
                      <% r_eyelsahes_counter= r_eyelsahes_counter+1%>
                      <% r_appendages_counter = r_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
                  <%unless opdrecord.r_appendages_eyelashes_dystrichiasis == "No"%>
                      <% r_eyelsahes_counter= r_eyelsahes_counter+1%>
                      <% r_appendages_counter = r_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
              <% end %>
              <% if opdrecord.r_appendages_tests.include?"lacrimalsac" %>

                  <%unless opdrecord.r_appendages_lacrimalsac_swelling == "No"%>
                      <% r_lacrimar_counter = r_lacrimar_counter+1%>
                      <% r_appendages_counter = r_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
                  <%unless opdrecord.r_appendages_lacrimalsac_regurgitation == "No"%>
                      <% r_lacrimar_counter = r_lacrimar_counter+1%>
                      <% r_appendages_counter = r_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
              <% end %>
              <% if opdrecord.r_appendages_tests.include?"syringing" %>

                  <%unless opdrecord.r_appendages_syringing == "Patent"%>
                      <% r_syringing_counter = r_syringing_counter+1%>
                      <% r_appendages_counter = r_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%else%>
                      <% r_syringing_counter = r_syringing_counter+1%>
                      <% r_appendages_counter = r_appendages_counter+1%>
                      <% examination_counter = examination_counter + 1 %>
                  <%end%>
              <% end %>
          <% end %>
          <% if opdrecord.r_appendages_comments.present? %>
              <% r_appendages_comments = "#{opdrecord.read_attribute(:"r_appendages_comments")}" %>
              <% r_appendages_comments_op = " #{r_appendages_comments}" %>
              <% r_appendages_counter = r_appendages_counter + 1 %>
              <% examination_counter = examination_counter + 1 %>
          <% end %>
      <% end %>

      <% unless opdrecord.l_conjunctiva.blank? %>
          <% unless opdrecord.l_conjunctiva == "Normal" %>
              <% unless opdrecord.l_conjunctiva_congestion == "No" %>
                  <% if opdrecord.l_conjunctiva_congestion_lgc != "" %>
                      <% l_conjunctiva_congestion_lgc = "-" + opdrecord.l_conjunctiva_congestion_lgc %>
                  <% else %>
                      <% l_conjunctiva_congestion_lgc = "" %>
                  <% end %>
                  <% l_conjunctiva_congestion = "Congestion#{l_conjunctiva_congestion_lgc}," %>
                  <% l_conjunctiva_op = "#{l_conjunctiva_congestion}" %>
                  <% l_conjunctiva_counter = l_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
                  <% l_conjunctiva_congestion_lgc = opdrecord.l_conjunctiva_congestion_lgc %>
              <% end %>
              <% if false %>
                  <% unless opdrecord.l_conjunctiva_conjunctivitis == "No" %>
                      <% l_conjunctiva_conjunctivitis = "Conjunctivitis," %>
                      <% l_conjunctiva_op = "#{l_conjunctiva_op} #{l_conjunctiva_conjunctivitis}" %>
                      <% l_conjunctiva_counter = l_conjunctiva_counter + 1 %>
                      <% examination_counter = examination_counter + 1 %>
                  <% end %>
                  <% unless opdrecord.l_conjunctiva_episcleritis == "No" %>
                      <% l_conjunctiva_episcleritis = "Episcleritis," %>
                      <% l_conjunctiva_op = "#{l_conjunctiva_op} #{l_conjunctiva_episcleritis}" %>
                      <% l_conjunctiva_counter = l_conjunctiva_counter + 1 %>
                      <% examination_counter = examination_counter + 1 %>
                  <% end %>
              <% end %>
              <% unless opdrecord.l_conjunctiva_tear == "No" %>
                  <% l_conjunctiva_tear = "Tear," %>
                  <% l_conjunctiva_op = "#{l_conjunctiva_op} #{l_conjunctiva_tear}" %>
                  <% l_conjunctiva_counter = l_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_conjunctiva_conjuctival_blib == "No" %>
                  <% l_conjunctiva_conjuctival_blib = "Conjuctival Bleb," %>
                  <% l_conjunctiva_op = "#{l_conjunctiva_op} #{l_conjunctiva_conjuctival_blib}" %>
                  <% l_conjunctiva_counter = l_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <% unless opdrecord.l_conjunctiva_subconjunctival_haemorrhage == "No" %>
                  <% l_conjunctiva_subconjunctival_haemorrhage = "SubConjunctival Haemorrhage," %>
                  <% l_conjunctiva_op = "#{l_conjunctiva_op} #{l_conjunctiva_subconjunctival_haemorrhage}" %>
                  <% l_conjunctiva_counter = l_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_conjunctiva_foreign_body == "Yes" %>
                  <% l_conjunctiva_foreign_body = "Foreign Body," %>
                  <% l_conjunctiva_op = "#{l_conjunctiva_op} #{l_conjunctiva_foreign_body}" %>
                  <% l_conjunctiva_counter = l_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_conjunctiva_follicles == "Yes" %>
                  <% l_conjunctiva_follicles = "Follicles," %>
                  <% l_conjunctiva_op = "#{l_conjunctiva_op} #{l_conjunctiva_follicles}" %>
                  <% l_conjunctiva_counter = l_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_conjunctiva_papillae == "Yes" %>
                  <% l_conjunctiva_papillae = "Papillae," %>
                  <% l_conjunctiva_op = "#{l_conjunctiva_op} #{l_conjunctiva_papillae}" %>
                  <% l_conjunctiva_counter = l_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_conjunctiva_pinguecula == "Yes" %>
                  <% l_conjunctiva_pinguecula = "Pinguecula," %>
                  <% l_conjunctiva_op = "#{l_conjunctiva_op} #{l_conjunctiva_pinguecula}" %>
                  <% l_conjunctiva_counter = l_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_conjunctiva_pterygium == "Yes" %>
                  <% l_conjunctiva_pterygium = "Pterygium," %>
                  <% l_conjunctiva_op = "#{l_conjunctiva_op} #{l_conjunctiva_pterygium}" %>
                  <% l_conjunctiva_counter = l_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_conjunctiva_phlycten == "Yes" %>
                  <% l_conjunctiva_phlycten = "Phlycten," %>
                  <% l_conjunctiva_op = "#{l_conjunctiva_op} #{l_conjunctiva_phlycten}" %>
                  <% l_conjunctiva_counter = l_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_conjunctiva_comments.present? %>
                  <% l_conjunctiva_comments = "#{opdrecord.read_attribute(:"l_conjunctiva_comments")}" %>
                  <% l_conjunctiva_comments_op = " #{l_conjunctiva_comments}" %>
                  <% l_conjunctiva_counter = l_conjunctiva_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <% l_conjunctiva_op = l_conjunctiva_op.split("") %>
              <% l_conjunctiva_op_count = l_conjunctiva_op.count %>
              <% if l_conjunctiva_op_count > 0 %>
                  <% l_conjunctiva_op = (l_conjunctiva_op.first l_conjunctiva_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>
      <% if opdrecord['l_cornea_diagram_present'] == "Y" %>
          <% l_cornea_counter = l_cornea_counter+1 %>
      <%end%>
      <% if opdrecord['l_corneaslit_diagram_present'] == "Y" %>
          <% l_cornea_counter = l_cornea_counter+1 %>
      <%end%>
      <% unless opdrecord.l_cornea.blank? %>
          <% unless opdrecord.l_cornea == "Normal" %>
              <% unless opdrecord.l_cornea_size == "Normal" %>
                  <% l_cornea_size = "Size- #{opdrecord.read_attribute(:"l_cornea_size")}," %>
                  <% l_cornea_op = "#{l_cornea_size}" %>
                  <% l_cornea_counter = l_cornea_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_cornea_shape == "Normal" %>
                  <% l_cornea_shape = "Shape- #{opdrecord.read_attribute(:"l_cornea_shape")}," %>
                  <% l_cornea_op = "#{l_cornea_op} #{l_cornea_shape}" %>
                  <% l_cornea_counter = l_cornea_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_cornea_surface == "Normal" %>
                  <% l_cornea_surface = "Surface- #{opdrecord.read_attribute(:"l_cornea_surface")}," %>
                  <% l_cornea_op = "#{l_cornea_op} #{l_cornea_surface}" %>
                  <% l_cornea_counter = l_cornea_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_cornea_schirmer_test == "" %>
                  <% l_cornea_schirmer_test = "Test-#{opdrecord.read_attribute(:"l_cornea_schirmer_test")}(#{opdrecord.read_attribute(:"l_cornea_schirmer_dimension")}mm in #{opdrecord.read_attribute(:"l_cornea_schirmer_time")} min)," %>
                  <% l_cornea_op = "#{l_cornea_op} #{l_cornea_schirmer_test}" %>
                  <% l_cornea_counter = l_cornea_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_cornea_comments.length > 0 %>
                  <% l_cornea_comments = "#{opdrecord.read_attribute(:"l_cornea_comments")}" %>
                  <% l_cornea_comments_op = "#{l_cornea_comments}" %>
                  <% l_cornea_counter = l_cornea_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <% l_cornea_op = l_cornea_op.split("") %>
              <% l_cornea_op_count = l_cornea_op.count %>
              <% if l_cornea_op_count > 0 %>
                  <% l_cornea_op = (l_cornea_op.first l_cornea_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>

      <% unless opdrecord.l_anteriorchamber.blank? %>
          <% unless opdrecord.l_anteriorchamber == "Normal" %>
              <% unless opdrecord.l_anteriorchamber_depth == "Normal" %>
                  <% l_anteriorchamber_depth = "Depth- #{opdrecord.read_attribute(:"l_anteriorchamber_depth")} #{opdrecord.read_attribute(:"l_anteriorchamber_depth_comment")}," %>
                  <% l_anteriorchamber_op = "#{l_anteriorchamber_depth}" %>
                  <% l_anteriorchamber_counter = l_anteriorchamber_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <% unless opdrecord.l_anteriorchamber_cells == "No" %>
                  <% l_anteriorchamber_cells = "Cells #{opdrecord.read_attribute(:"l_anteriorchamber_cells_comment")}" %>
                  <% l_anteriorchamber_op = "#{l_anteriorchamber_op} #{l_anteriorchamber_cells}," %>
                  <% l_anteriorchamber_counter = l_anteriorchamber_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_anteriorchamber_flare == "No" %>
                  <% l_anteriorchamber_flare = "Flare #{opdrecord.read_attribute(:"l_anteriorchamber_flare_comment")}" %>
                  <% l_anteriorchamber_op = "#{l_anteriorchamber_op} #{l_anteriorchamber_flare}," %>
                  <% l_anteriorchamber_counter = l_anteriorchamber_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_anteriorchamber_hyphema == "No" %>
                  <% l_anteriorchamber_hyphema = "Hyphema #{opdrecord.read_attribute(:"l_anteriorchamber_hyphema_comment")}" %>
                  <% l_anteriorchamber_op = "#{l_anteriorchamber_op} #{l_anteriorchamber_hyphema}," %>
                  <% l_anteriorchamber_counter = l_anteriorchamber_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_anteriorchamber_hypopyon == "No" %>
                  <% l_anteriorchamber_hypopyon = "Hypopyon #{opdrecord.read_attribute(:"l_anteriorchamber_hypopyon_comment")}" %>
                  <% l_anteriorchamber_op = "#{l_anteriorchamber_op} #{l_anteriorchamber_hypopyon}," %>
                  <% l_anteriorchamber_counter = l_anteriorchamber_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_anteriorchamber_foreignbody == "No" %>
                  <% l_anteriorchamber_foreignbody = "Foreign Body #{opdrecord.read_attribute(:"l_anteriorchamber_foreignbody_comment")}" %>
                  <% l_anteriorchamber_op = "#{l_anteriorchamber_op} #{l_anteriorchamber_foreignbody}," %>
                  <% l_anteriorchamber_counter = l_anteriorchamber_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_anteriorchamber_comments.length > 0 %>
                  <% l_anteriorchamber_comments = "#{opdrecord.read_attribute(:"l_anteriorchamber_comments")}" %>
                  <% l_anteriorchamber_comments_op = "#{l_anteriorchamber_comments}" %>
                  <% l_anteriorchamber_counter = l_anteriorchamber_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>

              <% l_anteriorchamber_op = l_anteriorchamber_op.split("") %>
              <% l_anteriorchamber_op_count = l_anteriorchamber_op.count %>
              <% if l_anteriorchamber_op_count > 0 %>
                  <% l_anteriorchamber_op = (l_anteriorchamber_op.first l_anteriorchamber_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>
      <% unless opdrecord.l_pupil.blank? %>
          <% unless opdrecord.l_pupil == "Normal" %>
              <% if opdrecord.l_pupil_shape.length > 0 %>
                  <% l_pupil_shape = "Shape- #{opdrecord.read_attribute(:"l_pupil_shape")}," %>
                  <% l_pupil_op = "#{l_pupil_shape}" %>
                  <% l_pupil_counter = l_pupil_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_pupil_reaction_to_light_direct == "Normal" %>
                  <% l_pupil_reaction_to_light_direct = "Reaction to light Direct- #{opdrecord.read_attribute(:"l_pupil_reaction_to_light_direct")}," %>
                  <% l_pupil_op = "#{l_pupil_op} #{l_pupil_reaction_to_light_direct}" %>
                  <% l_pupil_counter = l_pupil_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_pupil_reaction_to_light_consensual == "Normal" %>
                  <% l_pupil_reaction_to_light_consensual = "Reaction to light consensual- #{opdrecord.read_attribute(:"l_pupil_reaction_to_light_consensual")}," %>
                  <% l_pupil_op = "#{l_pupil_op} #{l_pupil_reaction_to_light_consensual}" %>
                  <% l_pupil_counter = l_pupil_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_pupil_rapd == "No" %>
                  <% l_pupil_rapd = "RAPD," %>
                  <% l_pupil_op = "#{l_pupil_op} #{l_pupil_rapd}" %>
                  <% l_pupil_counter = l_pupil_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_pupil_comments.length > 0 %>
                  <% l_pupil_comments = "#{opdrecord.read_attribute(:"l_pupil_comments")}" %>
                  <% l_pupil_comments_op = "#{l_pupil_comments}" %>
                  <% l_pupil_counter = l_pupil_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <!-- Code to Remove The Last Comma -->
              <% l_pupil_op = l_pupil_op.split("") %>
              <% l_pupil_op_count = l_pupil_op.count %>
              <% if l_pupil_op_count > 0 %>
                  <% l_pupil_op = (l_pupil_op.first l_pupil_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>
      <% unless opdrecord.l_iris.blank? %>
          <% unless opdrecord.l_iris == "Normal" %>
              <% unless opdrecord.l_iris_shape == "Normal" %>
                  <% l_iris_shape = "Shape- #{opdrecord.read_attribute(:"l_iris_shape")}," %>
                  <% l_iris_op = "#{l_iris_shape}" %>
                  <% l_iris_counter = l_iris_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_iris_neovascularisation == "No" %>
                  <% l_iris_neovascularisation = "Neovascularisation," %>
                  <% l_iris_op = "#{l_iris_op}, #{l_iris_neovascularisation}" %>
                  <% l_iris_counter = l_iris_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_iris_synechiae == "No" %>
                  <% l_iris_synechiae = "Synechiae- #{opdrecord.read_attribute(:"r_ilis_synechiae")}," %>
                  <% l_iris_op = "#{l_iris_op}, #{l_iris_synechiae}" %>
                  <% l_iris_counter = l_iris_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_iris_comments.length > 0 %>
                  <% l_iris_comments = "#{opdrecord.read_attribute(:"l_iris_comments")}" %>
                  <% l_iris_comments_op = "#{l_iris_comments}" %>
                  <% l_iris_counter = l_iris_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <!-- Code to Remove The Last Comma -->
              <% l_iris_op = l_iris_op.split("") %>
              <% l_iris_op_count = l_iris_op.count %>
              <% if l_iris_op_count > 0 %>
                  <% l_iris_op = (l_iris_op.first l_iris_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>
      <% unless opdrecord.l_lens.blank? %>
          <% unless opdrecord.l_lens == "Normal" %>
              <% unless opdrecord.l_lens_nature == "Clear" %>
                  <% l_lens_nature = "Nature- #{opdrecord.read_attribute(:"l_lens_nature")}," %>
                  <% l_lens_op = "#{l_lens_nature}" %>
                  <% l_lens_counter = l_lens_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_lens_position == "Central" %>
                  <% l_lens_position = "Position- #{opdrecord.read_attribute(:"l_lens_position")}," %>
                  <% l_lens_op = "#{l_lens_op} #{l_lens_position}" %>
                  <% l_lens_counter = l_lens_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_lens_size == "Normal" %>
                  <% l_lens_size = "Lens Size- #{opdrecord.read_attribute(:"l_lens_size")}," %>
                  <% l_lens_op = "#{l_lens_op} #{l_lens_size}" %>
                  <% l_lens_counter = l_lens_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <%if  opdrecord.l_lens_grading_no.present? %>
                  <% l_lens_grading_no = "NS:#{opdrecord.read_attribute(:"l_lens_grading_no")}"%> <!-- NS and NO are same thing. -->
              <%end%>
              <%if  opdrecord.l_lens_grading_nc.present? %>
                  <% l_lens_grading_nc = "NC:#{opdrecord.read_attribute(:"l_lens_grading_nc")}"%>
              <%end%>
              <%if  opdrecord.l_lens_grading_c.present? %>
                  <% l_lens_grading_c = "C:#{opdrecord.read_attribute(:"l_lens_grading_c")}"%>
              <%end%>
              <%if  opdrecord.l_lens_grading_p.present? %>
                  <% l_lens_grading_p = "P:#{opdrecord.read_attribute(:"l_lens_grading_p")}"%>
              <%end%>

              <% if opdrecord.l_lens_grading_no.present? || opdrecord.l_lens_grading_nc.present? || opdrecord.l_lens_grading_c.present? || opdrecord.l_lens_grading_p.present? %>
                  <% l_lens_grading = "Lens Grading- #{l_lens_grading_no} #{l_lens_grading_nc} #{l_lens_grading_c} #{l_lens_grading_p}," %>
                  <% l_lens_op = "#{l_lens_op} #{l_lens_grading}" %>
                  <% l_lens_counter = l_lens_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_lens_comments.length > 0 %>
                  <% l_lens_comments = "#{opdrecord.read_attribute(:"l_lens_comments")}" %>
                  <% l_lens_comments_op = "#{l_lens_comments}" %>
                  <% l_lens_counter = l_lens_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <!-- Code to Remove The Last Comma -->
              <% l_lens_op = l_lens_op.split("") %>
              <% l_lens_op_count = l_lens_op.count %>
              <% if l_lens_op_count > 0 %>
                  <% l_lens_op = (l_lens_op.first l_lens_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>

      <% unless opdrecord.l_extraocularmovements.blank? %>
          <% unless opdrecord.l_extraocularmovements == "Normal" %>
              <% unless opdrecord.l_extraocularmovements_uniocular == "Full" %>
                  <% l_extraocularmovements_uniocular = "Uniocular- #{opdrecord.read_attribute(:"l_extraocularmovements_uniocular")}," %>
                  <% l_extraocularmovements_op = "#{l_extraocularmovements_uniocular}" %>
                  <% l_extraocularmovements_counter = l_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_extraocularmovements_binocular == "Full" %>
                  <% l_extraocularmovements_binocular = "Binocular- #{opdrecord.read_attribute(:"l_extraocularmovements_binocular")}," %>
                  <% l_extraocularmovements_op = "#{l_extraocularmovements_op} #{l_extraocularmovements_binocular}" %>
                  <% l_extraocularmovements_counter = l_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_extraocularmovements_prism.length > 0 %>
                  <% l_extraocularmovements_prism = "Prism- #{opdrecord.read_attribute(:"l_extraocularmovements_prism")}," %>
                  <% l_extraocularmovements_op = "#{l_extraocularmovements_op} #{l_extraocularmovements_prism}" %>
                  <% l_extraocularmovements_counter = l_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_extraocularmovements_squint.blank? %>
                  <% l_extraocularmovements_squint = "Squint- #{opdrecord.read_attribute(:"l_extraocularmovements_squint")}," %>
                  <% l_extraocularmovements_op = "#{l_extraocularmovements_op} #{l_extraocularmovements_squint}" %>
                  <% l_extraocularmovements_counter = l_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_extraocularmovements_squint_tropia.blank? %>
                  <% l_extraocularmovements_squint_tropia = "Tropia- #{opdrecord.read_attribute(:"l_extraocularmovements_squint_tropia")}," %>
                  <% l_extraocularmovements_op = "#{l_extraocularmovements_op} #{l_extraocularmovements_squint_tropia}" %>
                  <% l_extraocularmovements_counter = l_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_extraocularmovements_squint_tropia_horizontal.blank? %>
                  <% l_extraocularmovements_squint_tropia_horizontal = "Horizontal- #{opdrecord.read_attribute(:"l_extraocularmovements_squint_tropia_horizontal")}," %>
                  <% l_extraocularmovements_op = "#{l_extraocularmovements_op} #{l_extraocularmovements_squint_tropia_horizontal}" %>
                  <% l_extraocularmovements_counter = l_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_extraocularmovements_squint_tropia_horizontal_esotropia.blank? %>
                  <% l_extraocularmovements_squint_tropia_horizontal_esotropia = "Esotropia- #{opdrecord.read_attribute(:"l_extraocularmovements_squint_tropia_horizontal_esotropia")}," %>
                  <% l_extraocularmovements_op = "#{l_extraocularmovements_op} #{l_extraocularmovements_squint_tropia_horizontal_esotropia}" %>
                  <% l_extraocularmovements_counter = l_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_extraocularmovements_squint_tropia_horizontal_exotropia.blank? %>
                  <% l_extraocularmovements_squint_tropia_horizontal_exotropia = "Exotropia- #{opdrecord.read_attribute(:"l_extraocularmovements_squint_tropia_horizontal_exotropia")}," %>
                  <% l_extraocularmovements_op = "#{l_extraocularmovements_op} #{l_extraocularmovements_squint_tropia_horizontal_exotropia}" %>
                  <% l_extraocularmovements_counter = l_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_extraocularmovements_squint_tropia_vertical.blank? %>
                  <% l_extraocularmovements_squint_tropia_vertical = "Vertical- #{opdrecord.read_attribute(:"l_extraocularmovements_squint_tropia_vertical")}," %>
                  <% l_extraocularmovements_op = "#{l_extraocularmovements_op} #{l_extraocularmovements_squint_tropia_vertical}" %>
                  <% l_extraocularmovements_counter = l_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_extraocularmovements_squint_tropia_paralytic.blank? %>
                  <% l_extraocularmovements_squint_tropia_paralytic = "Paralytic- #{opdrecord.read_attribute(:"l_extraocularmovements_squint_tropia_paralytic")}," %>
                  <% l_extraocularmovements_op = "#{l_extraocularmovements_op} #{l_extraocularmovements_squint_tropia_paralytic}" %>
                  <% l_extraocularmovements_counter = l_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_extraocularmovements_squint_phoria.blank? %>
                  <% l_extraocularmovements_squint_phoria = "Phoria- #{opdrecord.read_attribute(:"l_extraocularmovements_squint_phoria")}," %>
                  <% l_extraocularmovements_op = "#{l_extraocularmovements_op} #{l_extraocularmovements_squint_phoria}" %>
                  <% l_extraocularmovements_counter = l_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_extraocularmovements_comments.length > 0 %>
                  <% l_extraocularmovements_comments = "#{opdrecord.read_attribute(:"l_extraocularmovements_comments")}" %>
                  <% l_extraocularmovements_comments_op = "#{l_extraocularmovements_comments}" %>
                  <% l_extraocularmovements_counter = l_extraocularmovements_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <!-- Code to Remove The Last Comma -->
              <% l_extraocularmovements_op = l_extraocularmovements_op.split("") %>
              <% l_extraocularmovements_op_count = l_extraocularmovements_op.count %>
              <% if l_extraocularmovements_op_count > 0 %>
                  <% l_extraocularmovements_op = (l_extraocularmovements_op.first l_extraocularmovements_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>

      <% unless opdrecord.l_fundus.blank? %>
          <% unless opdrecord.l_fundus == "Normal" %>
              <% unless opdrecord.l_fundus_media_select == "" %>
                  <% l_fundus_media_select = "Media-#{opdrecord.read_attribute(:"l_fundus_media_select")}(#{opdrecord.read_attribute(:"l_fundus_media_comment")})," %>
                  <% l_fundus_op = "#{l_fundus_op} #{l_fundus_media_select}" %>
                  <% l_fundus_counter = l_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_fundus_pvd_select == "" %>
                  <% l_fundus_pvd_select = "PVD-#{opdrecord.read_attribute(:"l_fundus_pvd_select")}," %>
                  <% l_fundus_op = "#{l_fundus_op} #{l_fundus_pvd_select}" %>
                  <% l_fundus_counter = l_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_fundus_optdiscsize_select == "" %>
                  <% l_fundus_optdiscsize_select = "OptDiscSize-#{opdrecord.read_attribute(:"l_fundus_optdiscsize_select")}," %>
                  <% l_fundus_op = "#{l_fundus_op} #{l_fundus_optdiscsize_select}" %>
                  <% l_fundus_counter = l_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_fundus_cupratio_comment == "" %>
                  <% l_fundus_cupratio_comment = "CupRatio-#{opdrecord.read_attribute(:"l_fundus_cupratio_comment")}," %>
                  <% l_fundus_op = "#{l_fundus_op} #{l_fundus_cupratio_comment}" %>
                  <% l_fundus_counter = l_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_fundus_opticdisc_comment == "" %>
                  <% l_fundus_opticdisc_comment = "OpticDisc-#{opdrecord.read_attribute(:"l_fundus_opticdisc_comment")}," %>
                  <% l_fundus_op = "#{l_fundus_op} #{l_fundus_opticdisc_comment}" %>
                  <% l_fundus_counter = l_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_fundus_bloodvessel_comment == "" %>
                  <% l_fundus_bloodvessel_comment = "Bloodvessel-#{opdrecord.read_attribute(:"l_fundus_bloodvessel_comment")}," %>
                  <% l_fundus_op = "#{l_fundus_op} #{l_fundus_bloodvessel_comment}" %>
                  <% l_fundus_counter = l_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.l_fundus_macula_comment == "" %>
                  <% l_fundus_macula_comment = "Macula-#{opdrecord.read_attribute(:"l_fundus_macula_comment")}," %>
                  <% l_fundus_op = "#{l_fundus_op} #{l_fundus_macula_comment}" %>
                  <% l_fundus_counter = l_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% unless opdrecord.r_fundustext_comment == "" %>
                  <% r_fundustext_comment = "Fundus-#{opdrecord.read_attribute(:"l_fundustext_comment")}," %>
                  <% l_fundus_op = "#{l_fundus_op} #{r_fundustext_comment}" %>
                  <% l_fundus_counter = l_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <% if opdrecord.l_fundus_comments.length > 0 %>
                  <% l_fundus_comments = "#{opdrecord.read_attribute(:"l_fundus_comments")}" %>
                  <% l_fundus_comments_op = "#{l_fundus_comments}" %>
                  <% l_fundus_counter = l_fundus_counter + 1 %>
                  <% examination_counter = examination_counter + 1 %>
              <% end %>
              <!-- Code to Remove The Last Comma -->
              <% l_fundus_op = l_fundus_op.split("") %>
              <% l_fundus_op_count = l_fundus_op.count %>
              <% if l_fundus_op_count > 0 %>
                  <% l_fundus_op = (l_fundus_op.first l_fundus_op_count - 1).join() %>
              <% end %>
          <% end %>
      <% end %>

      <% unless opdrecord.l_objectivecomments.blank? %>
          <% if opdrecord.l_objectivecomments.length > 0 %>
              <% l_objectivecomments = "#{opdrecord.read_attribute(:"l_objectivecomments")}" %>
              <% l_objectivecomments_comments_op = "#{l_objectivecomments}" %>
              <% l_objectivecomments_counter = l_objectivecomments_counter + 1 %>
              <% examination_counter = examination_counter + 1 %>
          <% end %>
      <% end %>

      <% unless opdrecord.l_color_vision.blank? %>
          <% if opdrecord.l_color_vision.length > 0 %>
              <% l_color_vision = "#{opdrecord.read_attribute(:"l_color_vision")}" %>
              <% l_color_vision_counter = l_color_vision_counter + 1 %>
              <% examination_counter = examination_counter + 1 %>
          <% end %>
      <% end %>
      <% if opdrecord.read_attribute(:l_gonioscopy) == "Abnormal" %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>
      <% if opdrecord.read_attribute(:r_gonioscopy) == "Abnormal" %>
          <% examination_counter = examination_counter + 1 %>
      <% end %>

      <% if examination_counter > 0 %>
          <div class="row">
            <div class="col-md-12">
              <span><%= generalexaminationcomments_op %> </span>
            </div>
            <div class="col-md-6">
              <div class="text-center" style="background-color:#eee;">R/OD:</div>
            </div>
            <div class="col-md-6">
              <% if r_visualacuity_counter > 0 %>
                  <strong>VA:</strong> <%= r_visualacuity_op %>
              <% end %>
              <% if r_intraocularpressure_counter > 0 %>
                  <% if r_intraocularpressure_op.to_i > 0 %>
                      <strong>.IOP:</strong> <%= r_intraocularpressure_op %>
                  <% end %>
              <% end %><br>
              <% if r_keratometry_counter > 0 %>
                  <strong>. Keratometry:</strong>
                  <table class="table table-bordered mb10" width="100%">
                    <tbody>
                    <tr>
                      <th width="40%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="30%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="30%" style="padding:1px;font-size:11px;text-align:center;"></th>
                    </tr>
                    </tbody>
                    <tbody>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Kh</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">(<%= r_keratometry_distant_kh %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= r_keratometry_distant_axis %>),</td>
                    </tr>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Kv</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">(<%= r_keratometry_near_kv %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= r_keratometry_near_axis %>).</td>
                    </tr>
                    </tbody>
                  </table>
              <% end %>
              <% if r_pgp_counter > 0 %>
                <strong>PGP 1:</strong>&nbsp;<%= r_pgp_op %>
                <table class="table table-bordered mb10" width="100%">
                  <tbody>
                    <tr>
                      <th width="40%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                    </tr>
                  </tbody>
                  <tbody>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Distant(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= r_pgp_distant_sph %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= r_pgp_distant_cyl %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= r_pgp_distant_axis %>),</td>
                    </tr>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Near(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= r_pgp_near_sph %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= r_pgp_near_cyl %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= r_pgp_near_axis %>).</td>
                    </tr>
                  </tbody>
                </table>
                <% if r_pgp_comments_counter > 0 %>
                <li><%= r_pgp_comments %></li>
                <% end %>
              <% end %>
              <% if r_pgp_comments_counter > 0 && r_pgp_counter == 0 %>
                <strong>PGP 1:</strong>
                <li><%= r_pgp_comments %></li>
              <% end %>

              <% if r_pgp_counter2 > 0 %>
                <strong>PGP 2:</strong>&nbsp;<%= r_pgp_op2 %>
                <table class="table table-bordered mb10" width="100%">
                  <tbody>
                    <tr>
                      <th width="40%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                    </tr>
                  </tbody>
                  <tbody>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Distant(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= r_pgp_distant_sph2 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= r_pgp_distant_cyl2 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= r_pgp_distant_axis2 %>),</td>
                    </tr>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Near(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= r_pgp_near_sph2 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= r_pgp_near_cyl2 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= r_pgp_near_axis2 %>).</td>
                    </tr>
                  </tbody>
                </table>
                <% if r_pgp_comments_counter2 > 0 %>
                <li><%= r_pgp_comments2 %></li>
                <% end %>
              <% end %>
              <% if r_pgp_comments_counter2 > 0 && r_pgp_counter2 == 0 %>
                <strong>PGP 2:</strong>
                <li><%= r_pgp_comments2 %></li>
              <% end %>

              <% if r_pgp_counter3 > 0 %>
                <strong>PGP 3:</strong>&nbsp;<%= r_pgp_op3 %>
                <table class="table table-bordered mb10" width="100%">
                  <tbody>
                    <tr>
                      <th width="40%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                    </tr>
                  </tbody>
                  <tbody>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Distant(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= r_pgp_distant_sph3 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= r_pgp_distant_cyl3 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= r_pgp_distant_axis3 %>),</td>
                    </tr>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Near(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= r_pgp_near_sph3 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= r_pgp_near_cyl3 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= r_pgp_near_axis3 %>).</td>
                    </tr>
                  </tbody>
                </table>
                <% if r_pgp_comments_counter3 > 0 %>
                <li><%= r_pgp_comments3 %></li>
                <% end %>
              <% end %>
              <% if r_pgp_comments_counter3 > 0 && r_pgp_counter3 == 0 %>
                <strong>PGP 3:</strong>
                <li><%= r_pgp_comments3 %></li>
              <% end %>

              <% if r_refraction_counter > 0 %>
                  <strong>Refraction:</strong>
                  <table class="table table-bordered mb10" width="100%">
                    <tbody>
                    <tr>
                      <th width="40%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                    </tr>
                    </tbody>
                    <tbody>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Distant(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Sph:<%= r_refraction_distant_sph %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= r_refraction_distant_cyl %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= r_refraction_distant_axis %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Vision:<%= r_refraction_distant_vision %>),</td>
                    </tr>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Near(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Sph:<%= r_refraction_near_sph %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= r_refraction_near_cyl %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= r_refraction_near_axis %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Vision:<%= r_refraction_near_vision %>).</td>
                    </tr>
                    </tbody>
                  </table>
              <% end %>

              <% if r_dilatedrefraction_counter > 0 %>
                  <strong>Refraction (Dilated):</strong><%= r_dilatedrefraction_drug_used_op %>
                  <table class="table table-bordered mb10" width="100%">
                    <tbody>
                    <tr>
                      <th width="40%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                    </tr>
                    </tbody>
                    <tbody>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Distant(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= r_dilatedrefraction_distant_sph %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= r_dilatedrefraction_distant_cyl %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= r_dilatedrefraction_distant_axis %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Vision:<%= r_dilatedrefraction_distant_vision %>),</td>
                    </tr>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Near(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= r_dilatedrefraction_near_sph %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= r_dilatedrefraction_near_cyl %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= r_dilatedrefraction_near_axis %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Vision:<%= r_dilatedrefraction_near_vision %>).</td>
                    </tr>
                    </tbody>
                  </table>
              <% end %>

              <% if r_appearance_counter > 0 %>
                  <b>Appearance: </b><%unless r_appearance_op ==[]%><%= r_appearance_op %><%end%>
                  <% if r_appearance_comments_op.present? %><div><span style="display: list-item;margin-left: 4%"><%= r_appearance_comments_op %> </span> </div>
                  <% end %>
                  <div class="examination_non_tabular">
                  </div>
              <% end %>
              <% if r_appendages_counter > 0 %>
                  <b>Appendages: </b>
                  <%if r_eyelid_counter>0%>
                      <% if opdrecord.r_appendages_tests.include?"eyelids"%>
                          <b>Eyelids:</b>
                          <%unless opdrecord.r_appendages_eyelids_chalazion == "No"%>
                              Chalazion,
                          <%end%>
                          <%unless opdrecord.r_appendages_eyelids_ptosis == "No"%>
                              Ptosis,
                          <%end%>
                          <%unless opdrecord.r_appendages_eyelids_swelling == "No"%>
                              Swelling,
                          <%end%>
                          <%unless opdrecord.r_appendages_eyelids_entropion    == "No"%>
                              Entropion,
                          <%end%>
                          <%unless opdrecord.r_appendages_eyelids_ectropion == "No"%>
                              Ectropion,
                          <%end%>
                          <%unless opdrecord.r_appendages_eyelids_mass == "No"%>
                              Eyelids mass,
                          <%end%>
                      <%end%>
                  <% end %>
                  <%if  r_eyelsahes_counter > 0 %>
                      <% if opdrecord.r_appendages_tests.include?"eyelashes" %>
                          <b>Eyelashes:</b>
                          <%unless opdrecord.r_appendages_eyelashes_trichiasis == "No"%>
                              Trichiasis,
                          <%end%>
                          <%unless opdrecord.r_appendages_eyelashes_dystrichiasis == "No"%>
                              Dystrichiasis,
                          <%end%>
                      <% end %>
                  <% end %>
                  <% if r_lacrimar_counter > 0 %>
                      <% if opdrecord.r_appendages_tests.include?"lacrimalsac" %>
                          <b>Lacrimal sac:</b>
                          <%unless opdrecord.r_appendages_lacrimalsac_swelling == "No"%>
                              Swelling
                          <%end%>
                          <%unless opdrecord.r_appendages_lacrimalsac_regurgitation == "No"%>
                              Regurgitation
                          <%end%>
                      <% end %>
                  <% end %>
                  <% if r_syringing_counter > 0%>
                      <% if opdrecord.r_appendages_tests.include?"syringing" %>
                          <b>Syringing:</b>
                          <%unless opdrecord.r_appendages_syringing == "Patent"%>
                              Blocked
                          <%else%>
                              Patent
                          <%end%>
                      <% end %>
                  <% end %>

                  <% if r_appendages_comments_op.present? %><div><span style="display: list-item;margin-left: 4%"><%= r_appendages_comments_op %> </span> </div>
                  <% end %>
                  <div class="examination_non_tabular">
                  </div>
              <% end %>
              <% if r_conjunctiva_counter > 0 %>
                  <b>Conjunctiva: </b><%unless r_conjunctiva_op ==[]%><%= r_conjunctiva_op %><%end%>
                  <% if r_conjunctiva_comments_op.present? %><div><span style="display: list-item;margin-left: 4%"><%= r_conjunctiva_comments_op %> </span> </div>
                  <% end %>
                  <div class="examination_non_tabular">
                  </div>
              <% end %>
              <% if r_cornea_counter > 0 %>
                  <b>Cornea: </b><%unless r_cornea_op ==[]%><%= r_cornea_op %><%end%>
                  <div class="row">
                    <% if opdrecord['r_cornea_diagram_present'] == "Y" %>
                        <div class="col-md-4">
                          <% cornea_image_url_thumb = "r_cornea_diagram_thumb" %>
                          <%= image_tag "#{opdrecord.send(cornea_image_url_thumb)}", height: '90', width: '90' %>
                          <div>
                            Cornea
                          </div>
                        </div>
                    <%end%>
                    <% if opdrecord['r_corneaslit_diagram_present'] == "Y" %>
                        <div class="col-md-4">
                          <% cornea_image_url_thumb = "r_corneaslit_diagram_thumb" %>
                          <%= image_tag "#{opdrecord.send(cornea_image_url_thumb)}", height: '90', width: '90' %>
                          <div>
                            Cornea Slit
                          </div>
                        </div>
                    <%end%>
                  </div>

                  <% if r_cornea_comments_op.present? %><div><span style="display: list-item;margin-left: 4%"><%= r_cornea_comments_op %> </span> </div>
                  <% end %>
                  <div class="examination_non_tabular">
                  </div>

              <% end %>

              <% if opdrecord.read_attribute(:r_gonioscopy) == "Abnormal" %>
                  <% if opdrecord.read_attribute(:r_gonioscopy_eye_superior_d1) != "" || opdrecord.read_attribute(:r_gonioscopy_eye_superior_d2) != "" || opdrecord.read_attribute(:r_gonioscopy_eye_temporal_d1) != "" || opdrecord.read_attribute(:r_gonioscopy_eye_temporal_d2) != "" || opdrecord.read_attribute(:r_gonioscopy_eye_nasal_d1) != "" || opdrecord.read_attribute(:r_gonioscopy_eye_nasal_d2) != "" || opdrecord.read_attribute(:r_gonioscopy_eye_inferior_d1) != "" || opdrecord.read_attribute(:r_gonioscopy_eye_inferior_d2) != "" %>
                      <div class="row">
                        <div class="col-md-12"><b>Gonioscopy: </b></div>
                        <div class="col-md-12 text-center" style="margin-bottom:10px;">
                          <span><b>Superior:</b></span>
                          <span><% if opdrecord.read_attribute(:r_gonioscopy_eye_superior_d1) != "" %>Grade <%= opdrecord.read_attribute(:r_gonioscopy_eye_superior_d1) %>,<% else %>-<% end %></span>
                          <span><% if opdrecord.read_attribute(:r_gonioscopy_eye_superior_d2) != "" %><%= opdrecord.read_attribute(:r_gonioscopy_eye_superior_d2) %><% else %>-<% end %></span>
                        </div>
                        <div class="col-md-4" style="margin-top:5%;">
                          <b>Temporal:</b><br>
                          <span><% if opdrecord.read_attribute(:r_gonioscopy_eye_temporal_d1) != "" %>Grade <%= opdrecord.read_attribute(:r_gonioscopy_eye_temporal_d1) %>,<% else %>-<% end %></span>
                          <span><% if opdrecord.read_attribute(:r_gonioscopy_eye_temporal_d2) != "" %><%= opdrecord.read_attribute(:r_gonioscopy_eye_temporal_d2) %><% else %>-<% end %></span>
                        </div>
                        <div class="col-md-4 text-center">
                          <div class="circle wide" style="margin-left:-20px;"><p class="centralize">X</p></div>
                        </div>
                        <div class="col-md-4" style="margin-top:5%;">
                          <b>Nasal:</b><br>
                          <span><% if opdrecord.read_attribute(:r_gonioscopy_eye_nasal_d1) != "" %>Grade <%= opdrecord.read_attribute(:r_gonioscopy_eye_nasal_d1) %>,<% else %>-<% end %></span>
                          <span><% if opdrecord.read_attribute(:r_gonioscopy_eye_nasal_d2) != "" %><%= opdrecord.read_attribute(:r_gonioscopy_eye_nasal_d2) %><% else %>-<% end %></span>
                        </div>
                        <div class="col-md-12 text-center mb10">
                          <div class="col-md-12 text-center" style="margin-top:5px;">
                            <span><b>Inferior:</b></span>
                            <span><% if opdrecord.read_attribute(:r_gonioscopy_eye_inferior_d1) != "" %>Grade <%= opdrecord.read_attribute(:r_gonioscopy_eye_inferior_d1) %>,<% else %>-<% end %></span>
                            <span><% if opdrecord.read_attribute(:r_gonioscopy_eye_inferior_d2) != "" %><%= opdrecord.read_attribute(:r_gonioscopy_eye_inferior_d2) %><% else %>-<% end %></span>
                          </div>
                        </div>
                        <div class="col-md-12">
                          <% if opdrecord.read_attribute(:r_gonioscopy_comment) != "" || opdrecord.read_attribute(:r_gonioscopy_comment) != nil %>
                              <p class="examination_non_tabular"><span style="display: list-item;margin-left: 4%"><%= opdrecord.read_attribute(:r_gonioscopy_comment).html_safe %></span> </p>
                          <% end %>
                        </div>
                      </div>
                  <% end %>
              <% end %>

              <% if r_fundus_counter > 0 %>
                  <div><b>Fundus: </b><%unless r_fundus_op ==[]%><%= r_fundus_op %><%end%></div>
                  <div class="row">
                    <% if opdrecord['r_fundus_diagram_present'] == "Y" %>
                        <div class="col-md-2">

                          <% cornea_image_url_thumb = "r_fundus_diagram_thumb" %>
                          <%= image_tag "#{opdrecord.send(cornea_image_url_thumb)}", height: '90', width: '90' %>
                          <div>
                            Fundus
                          </div>
                        </div>
                    <%end%>
                  </div>
                  <% if r_fundus_comments_op.present? %><div> <span style="display: list-item;margin-left: 4%"><%= r_fundus_comments_op%> </span> </div><% end %>
                  <div class="examination_non_tabular">
                  </div>
              <% end %>

              <% if r_anteriorchamber_counter > 0 %>
                  <p class="examination_non_tabular"><b>Anterior Chamber: </b><%= r_anteriorchamber_op %> <% if r_anteriorchamber_comments_op.present? %><br> <span style="display: list-item;margin-left: 4%"><%= r_anteriorchamber_comments_op %> </span> <% end %></p>
              <% end %>
              <% if r_pupil_counter > 0 %>
                  <p class="examination_non_tabular"><b>Pupil: </b><%= r_pupil_op %> <% if r_pupil_comments_op.present? %><br> <span style="display: list-item;margin-left: 4%"><%= r_pupil_comments_op %> </span> <% end %></p>
              <% end %>
              <% if r_iris_counter > 0 %>
                  <p class="examination_non_tabular"><b>Iris: </b><%= r_iris_op %> <% if r_iris_comments_op.present? %><br> <span style="display: list-item;margin-left: 4%"><%= r_iris_comments_op %> </span> <% end %></p>
              <% end %>
              <% if r_lens_counter > 0 %>
                  <p class="examination_non_tabular"><b>Lens: </b><%= r_lens_op %> <% if r_lens_comments_op.present? %><br> <span style="display: list-item;margin-left: 4%"><%= r_lens_comments_op %><% end %> </span> </p>
              <% end %>
              <% if r_extraocularmovements_counter > 0 %>
                  <p class="examination_non_tabular"><b>Extra Ocular Movements: </b><%= r_extraocularmovements_op %> <% if r_extraocularmovements_comments_op.present? %><br> <span style="display: list-item;margin-left: 4%"><%= r_extraocularmovements_comments_op %> </span> <% end %></p>
              <% end %>
              <% if r_objectivecomments_counter > 0 %>
                  <p class="examination_non_tabular"><span style="display: list-item;margin-left: 4%"><%= r_objectivecomments_comments_op %> </span></p>
              <% end %>
              <% if r_color_vision_counter > 0 %>
                  <b>Color Vision:</b> <%= r_color_vision %>
              <% end %>
            </div>
            <div class="col-md-6">
              <div class="text-center" style="background-color:#eee;">L/OS:</div>
            </div>
            <div class="col-md-6">
              <% if l_visualacuity_counter > 0 %>
                  <strong>VA:</strong> <%= l_visualacuity_op %>
              <% end %>
              <% if l_intraocularpressure_counter > 0 %>
                  <% if l_intraocularpressure_op.to_i > 0 %>
                      <strong>IOP:</strong> <%= l_intraocularpressure_op %>
                  <% end %>
              <% end %><br>
              <% if l_keratometry_counter > 0 %>
                  <strong> Keratometry:</strong>
                  <table class="table table-bordered mb10" width="100%">
                    <tbody>
                    <tr>
                      <th width="40%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="30%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="30%" style="padding:1px;font-size:11px;text-align:center;">Axis</th>
                    </tr>
                    </tbody>
                    <tbody>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Kh</td>
                      <td style="padding:1px;font-size:11px;text-align:center;"><%= l_keratometry_distant_kh %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;"><%= l_keratometry_distant_axis %></td>
                    </tr>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Kv</td>
                      <td style="padding:1px;font-size:11px;text-align:center;"><%= l_keratometry_near_kv %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;"><%= l_keratometry_near_axis %></td>
                    </tr>
                    </tbody>
                  </table>
              <% end %>

              <% if l_pgp_counter > 0 %>
                <strong>PGP 1:</strong>&nbsp;<%= l_pgp_op %>
                <table class="table table-bordered mb10" width="100%">
                  <tbody>
                    <tr>
                      <th width="40%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                    </tr>
                  </tbody>
                  <tbody>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Distant(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= l_pgp_distant_sph %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= l_pgp_distant_cyl %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= l_pgp_distant_axis %>),</td>
                    </tr>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Near<(/td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= l_pgp_near_sph %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= l_pgp_near_cyl %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= l_pgp_near_axis %>).</td>
                    </tr>
                  </tbody>
                </table>
                <% if l_pgp_comments_counter > 0 %>
                  <li><%= l_pgp_comments %></li>
                <% end %>
              <% end %>
              <% if l_pgp_comments_counter > 0 && l_pgp_counter == 0 %>
                <strong>PGP 1:</strong>
                <li><%= l_pgp_comments %></li>
              <% end %>

              <% if l_pgp_counter2 > 0 %>
                <strong>PGP 2:</strong>&nbsp;<%= l_pgp_op2 %>
                <table class="table table-bordered mb10" width="100%">
                  <tbody>
                    <tr>
                      <th width="40%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                    </tr>
                  </tbody>
                  <tbody>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Distant(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= l_pgp_distant_sph2 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= l_pgp_distant_cyl2 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= l_pgp_distant_axis2 %>),</td>
                    </tr>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Near<(/td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= l_pgp_near_sph2 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= l_pgp_near_cyl2 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= l_pgp_near_axis2 %>).</td>
                    </tr>
                  </tbody>
                </table>
                <% if l_pgp_comments_counter2 > 0 %>
                  <li><%= l_pgp_comments2 %></li>
                <% end %>
              <% end %>
              <% if l_pgp_comments_counter2 > 0 && l_pgp_counter2 == 0 %>
                <strong>PGP 2:</strong>
                <li><%= l_pgp_comments2 %></li>
              <% end %>

              <% if l_pgp_counter3 > 0 %>
                <strong>PGP 3:</strong>&nbsp;<%= l_pgp_op3 %>
                <table class="table table-bordered mb10" width="100%">
                  <tbody>
                    <tr>
                      <th width="40%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="20%" style="padding:1px;font-size:11px;text-align:center;"></th>
                    </tr>
                  </tbody>
                  <tbody>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Distant(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= l_pgp_distant_sph3 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= l_pgp_distant_cyl3 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= l_pgp_distant_axis3 %>),</td>
                    </tr>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Near<(/td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= l_pgp_near_sph3 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= l_pgp_near_cyl3 %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= l_pgp_near_axis3 %>).</td>
                    </tr>
                  </tbody>
                </table>
                <% if l_pgp_comments_counter3 > 0 %>
                  <li><%= l_pgp_comments3 %></li>
                <% end %>
              <% end %>
              <% if l_pgp_comments_counter3 > 0 && l_pgp_counter3 == 0 %>
                <strong>PGP 3:</strong>
                <li><%= l_pgp_comments3 %></li>
              <% end %>

              <% if l_refraction_counter > 0 %>
                  <strong>Refraction:</strong>
                  <table class="table table-bordered mb10" width="100%">
                    <tbody>
                    <tr>
                      <th width="40%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                    </tr>
                    </tbody>
                    <tbody>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Distant(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= l_refraction_distant_sph %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= l_refraction_distant_cyl %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= l_refraction_distant_axis %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Vision:<%= l_refraction_distant_vision %>),</td>
                    </tr>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Near(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= l_refraction_near_sph %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= l_refraction_near_cyl %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= l_refraction_near_axis %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Vision:<%= l_refraction_near_vision %>).</td>
                    </tr>
                    </tbody>
                  </table>
              <% end %>

              <% if l_dilatedrefraction_counter > 0 %>
                  <strong>Refraction (Dilated):</strong><%= l_dilatedrefraction_drug_used_op %>
                  <table class="table table-bordered mb10" width="100%">
                    <tbody>
                    <tr>
                      <th width="40%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                      <th width="15%" style="padding:1px;font-size:11px;text-align:center;"></th>
                    </tr>
                    </tbody>
                    <tbody>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Distant(</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= l_dilatedrefraction_distant_sph %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= l_dilatedrefraction_distant_cyl %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= l_dilatedrefraction_distant_axis %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Vision:<%= l_dilatedrefraction_distant_vision %>),</td>
                    </tr>
                    <tr>
                      <td style="padding:1px;font-size:11px;text-align:center;">Near</td>
                      <td style="padding:1px;font-size:11px;text-align:center;">Sph:<%= l_dilatedrefraction_near_sph %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Cyl:<%= l_dilatedrefraction_near_cyl %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Axis:<%= l_dilatedrefraction_near_axis %></td>
                      <td style="padding:1px;font-size:11px;text-align:center;">,Vision:<%= l_dilatedrefraction_near_vision %></td>
                    </tr>
                    </tbody>
                  </table>
              <% end %>

              <% if l_appearance_counter > 0 %>
                  <b>Appearance:</b><%unless l_appearance_op ==[]%> <%= l_appearance_op %><%end%>
                  <% if l_appearance_comments_op.present? %><div><span style="display: list-item;margin-left: 4%"><%= l_appearance_comments_op %> </span> </div>
                  <% end %>
                  <div class="examination_non_tabular">
                  </div>
              <% end %>
              <% if l_appendages_counter > 0 %>
                  <b>Appendages: </b>
                  <% if l_eyelid_counter > 0 %>
                      <% if opdrecord.l_appendages_tests.include?"eyelids"%>
                          <b>Eyelids:</b>
                          <%unless opdrecord.l_appendages_eyelids_chalazion == "No"%>
                              Chalazion,
                          <%end%>
                          <%unless opdrecord.l_appendages_eyelids_ptosis == "No"%>
                              Ptosis,
                          <%end%>
                          <%unless opdrecord.l_appendages_eyelids_swelling == "No"%>
                              Swelling,
                          <%end%>
                          <%unless opdrecord.l_appendages_eyelids_entropion == "No"%>
                              Entropion,
                          <%end%>
                          <%unless opdrecord.l_appendages_eyelids_ectropion == "No"%>
                              Ectropion,
                          <%end%>
                          <%unless opdrecord.l_appendages_eyelids_mass== "No"%>
                              Eyelids mass,
                          <%end%>
                      <%end%>
                  <% end %>
                  <% if l_eyelsahes_counter > 0 %>
                      <% if opdrecord.l_appendages_tests.include?"eyelashes" %>
                          <b>Eyelashes:</b>
                          <%unless opdrecord.l_appendages_eyelashes_trichiasis == "No"%>
                              Trichiasis,
                          <%end%>
                          <%unless opdrecord.l_appendages_eyelashes_dystrichiasis == "No"%>
                              Dystrichiasis,
                          <%end%>
                      <% end %>
                  <% end %>
                  <% if l_lacrimal_counter> 0%>
                      <% if opdrecord.l_appendages_tests.include?"lacrimalsac" %>
                          <b>Lacrimal sac:</b>
                          <%unless opdrecord.l_appendages_lacrimalsac_swelling == "No"%>
                              Swelling,
                          <%end%>
                          <%unless opdrecord.l_appendages_lacrimalsac_regurgitation == "No"%>
                              Regurgitation,
                          <%end%>
                      <% end %>
                  <% end %>
                  <% if l_syringing_counter > 0%>
                      <% if opdrecord.l_appendages_tests.include?"syringing" %>
                          <b>Syringing:</b>
                          <%unless opdrecord.l_appendages_syringing == "Patent"%>
                              Blocked,
                          <%else%>
                              Patent
                          <%end%>
                      <% end %>
                  <% end %>

                  <% if l_appendages_comments_op.present? %><div><span style="display: list-item;margin-left: 4%"><%= l_appendages_comments_op %> </span> </div>
                  <% end %>
                  <div class="examination_non_tabular">
                  </div>

              <% end %>
              <% if l_conjunctiva_counter > 0 %>
                  <b>Conjunctiva:</b><%unless l_conjunctiva_op ==[]%> <%= l_conjunctiva_op %><%end%>
                  <% if l_conjunctiva_comments_op.present? %><div><span style="display: list-item;margin-left: 4%"><%= l_conjunctiva_comments_op %> </span> </div>
                  <% end %>
                  <div class="examination_non_tabular">
                  </div>
              <% end %>

              <% if l_cornea_counter > 0 %>
                  <b>Cornea: </b><%unless l_cornea_op ==[]%><%= l_cornea_op %><%end%>
                  <div class="row">
                    <% if opdrecord['l_cornea_diagram_present'] == "Y" %>
                        <div class="col-md-4">
                          <% cornea_image_url_thumb = "l_cornea_diagram_thumb" %>
                          <%= image_tag "#{opdrecord.send(cornea_image_url_thumb)}", height: '90', width: '90' %>
                          <div>
                            Cornea
                          </div>
                        </div>
                    <%end%>
                    <% if opdrecord['l_corneaslit_diagram_present'] == "Y" %>
                        <div class="col-md-4">
                          <% cornea_image_url_thumb = "l_corneaslit_diagram_thumb" %>
                          <%= image_tag "#{opdrecord.send(cornea_image_url_thumb)}", height: '90', width: '90' %>
                          <div>
                            Cornea Slit
                          </div>
                        </div>
                    <%end%>
                  </div>

                  <% if l_cornea_comments_op.present? %><div><span style="display: list-item;margin-left: 4%"><%= l_cornea_comments_op %> </span> </div>
                  <% end %>
                  <div class="examination_non_tabular">
                  </div>

              <% end %>

              <% if opdrecord.read_attribute(:l_gonioscopy) == "Abnormal" %>
                  <% if opdrecord.read_attribute(:l_gonioscopy_eye_superior_d1) != "" || opdrecord.read_attribute(:l_gonioscopy_eye_superior_d2) != "" || opdrecord.read_attribute(:l_gonioscopy_eye_temporal_d1) != "" || opdrecord.read_attribute(:l_gonioscopy_eye_temporal_d2) != "" || opdrecord.read_attribute(:l_gonioscopy_eye_nasal_d1) != "" || opdrecord.read_attribute(:l_gonioscopy_eye_nasal_d2) != "" || opdrecord.read_attribute(:l_gonioscopy_eye_inferior_d1) != "" || opdrecord.read_attribute(:l_gonioscopy_eye_inferior_d2) != "" %>
                      <div class="row">
                        <div class="col-md-12"><b>Gonioscopy: </b></div>
                        <div class="col-md-12 text-center" style="margin-bottom:10px;">
                          <span><b>Superior:</b></span>

                          <span><% if opdrecord.read_attribute(:l_gonioscopy_eye_superior_d1) != "" %>Grade <%= opdrecord.read_attribute(:l_gonioscopy_eye_superior_d1) %>, <% else %>-<% end %></span>
                          <span><% if opdrecord.read_attribute(:l_gonioscopy_eye_superior_d2) != "" %><%= opdrecord.read_attribute(:l_gonioscopy_eye_superior_d2) %><% else %>-<% end %></span>
                        </div>
                        <div class="col-md-4" style="margin-top:5%;">
                          <b>Temporal:</b><br>
                          <span><% if opdrecord.read_attribute(:l_gonioscopy_eye_temporal_d1) != "" %>Grade <%= opdrecord.read_attribute(:l_gonioscopy_eye_temporal_d1) %>, <% else %>-<% end %></span>
                          <span><% if opdrecord.read_attribute(:l_gonioscopy_eye_temporal_d2) != "" %><%= opdrecord.read_attribute(:l_gonioscopy_eye_temporal_d2) %><% else %>-<% end %></span>
                        </div>
                        <div class="col-md-4 text-center">
                          <div class="circle wide" style="margin-left:-20px;"><p class="centralize">X</p></div>
                        </div>
                        <div class="col-md-4" style="margin-top:5%;">
                          <b>Nasal:</b><br>
                          <span><% if opdrecord.read_attribute(:l_gonioscopy_eye_nasal_d1) != "" %>Grade <%= opdrecord.read_attribute(:l_gonioscopy_eye_nasal_d1) %>, <% else %>-<% end %></span>
                          <span><% if opdrecord.read_attribute(:l_gonioscopy_eye_nasal_d2) != "" %><%= opdrecord.read_attribute(:l_gonioscopy_eye_nasal_d2) %><% else %>-<% end %></span>
                        </div>
                        <div class="col-md-12 text-center mb10">
                          <div class="col-md-12 text-center" style="margin-top:5px;">
                            <span><b>Inferior:</b></span>
                            <span><% if opdrecord.read_attribute(:l_gonioscopy_eye_inferior_d1) != "" %>Grade <%= opdrecord.read_attribute(:l_gonioscopy_eye_inferior_d1) %>, <% else %>-<% end %></span>
                            <span><% if opdrecord.read_attribute(:l_gonioscopy_eye_inferior_d2) != "" %><%= opdrecord.read_attribute(:l_gonioscopy_eye_inferior_d2) %><% else %>-<% end %></span>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-12">
                        <% if opdrecord.read_attribute(:l_gonioscopy_comment) != "" || opdrecord.read_attribute(:l_gonioscopy_comment) != nil %>
                            <p class="examination_non_tabular"><span style="display: list-item;margin-left: 4%"><%= opdrecord.read_attribute(:l_gonioscopy_comment).html_safe %></span> </p>
                        <% end %>
                      </div>
                  <% end %>
              <% end %>

              <% if l_fundus_counter > 0 %>
                  <div><b>Fundus: </b><%unless l_fundus_op ==[]%><%= l_fundus_op %><%end%></div>
                  <div class="row">
                    <% if opdrecord['l_fundus_diagram_present'] == "Y" %>
                        <div class="col-md-2">

                          <% cornea_image_url_thumb = "l_fundus_diagram_thumb" %>
                          <%= image_tag "#{opdrecord.send(cornea_image_url_thumb)}", height: '90', width: '90' %>
                          <div>
                            Fundus
                          </div>
                        </div>
                    <%end%>
                  </div>

                  <% if l_fundus_comments_op.present? %><div> <span style="display: list-item;margin-left: 4%"><%= l_fundus_comments_op%> </span> </div><% end %>
                  <div class="examination_non_tabular">
                  </div>
              <% end %>
              <% if l_anteriorchamber_counter > 0 %>
                  <p class="examination_non_tabular"><b>Anterior Chamber:</b> <%= l_anteriorchamber_op %><% if l_anteriorchamber_comments_op.present? %><br> <span style="display: list-item;margin-left: 4%"><%= l_anteriorchamber_comments_op %> </span> <% end %></p>
              <% end %>
              <% if l_pupil_counter > 0 %>
                  <p class="examination_non_tabular"><b>Pupil:</b> <%= l_pupil_op %> <% if l_pupil_comments_op.present? %> <br><span style="display: list-item;margin-left: 4%"><%= l_pupil_comments_op%> </span>  <% end %></p>
              <% end %>
              <% if l_iris_counter > 0 %>
                  <p class="examination_non_tabular"><b>Iris:</b> <%= l_iris_op %> <% if l_iris_comments_op.present? %> <br><span style="display: list-item;margin-left: 4%"><%= l_iris_comments_op%> </span>  <% end %></p>
              <% end %>
              <% if l_lens_counter > 0 %>
                  <p class="examination_non_tabular"><b>Lens:</b> <%= l_lens_op %> <% if l_lens_comments_op.present? %> <br><span style="display: list-item;margin-left: 4%"><%= l_lens_comments_op %> </span>  <% end %></p>
              <% end %>
              <% if l_extraocularmovements_counter > 0 %>
                  <p class="examination_non_tabular"><b>Extra Ocular Movements:</b> <%= l_extraocularmovements_op %> <% if l_extraocularmovements_comments_op.present? %> <br><span style="display: list-item;margin-left: 4%"><%= l_extraocularmovements_comments_op %> </span> <% end %></p>
              <% end %>
              <% if l_objectivecomments_counter > 0 %>
                  <p class="examination_non_tabular"><span style="display: list-item;margin-left: 4%"><%= l_objectivecomments_comments_op %></span> </p>
              <% end %>
              <% if l_color_vision_counter > 0 %>
                  <b>Color Vision:</b> <%= l_color_vision %>
              <% end %>
            </div>
          </div>
      <% end %>
    </div>
<% end %>

