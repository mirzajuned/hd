$(document).on({
  ajaxStart: function() {$(".loading-gif").show() },
  ajaxStop: function() { $(".loading-gif").hide() }
});

jQuery("#manage_organisation_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    data: {level: "organisation"},
    url: '/organisations/manage'
  });
});
jQuery("#manage_designation_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/inventory/stores'
  });
});
jQuery("#manage_policy_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/authorization/policies'
  });
});
jQuery("#manage_authorization_policy_template_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/authorization/policy_templates'
  });
});
jQuery("#manage_inventory_store_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/inventory/stores'
  });
});
jQuery("#manage_inventory_supply_chain_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/inventory/supply_chains'
  });
});
jQuery("#manage_inventory_category_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/inventory/categories'
  });
});
jQuery("#manage_whatsapp_settings_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/communication_events'
  });
});
jQuery("#communication_template_settings_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/communication_settings'
  });
});
jQuery("#manage_inventory_sub_category_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/inventory/sub_categories'
  });
});
jQuery("#manage_inventory_dispensing_unit_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/inventory/dispensing_units'
  });
});

jQuery("#manage_inventory_vendor_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/inventory/vendors'
  });
});

jQuery("#manage_inventory_vendor_group_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/inventory/vendor_groups'
  });
});

jQuery("#manage_inventory_item_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/inventory/items'
  });
});

jQuery("#manage_inventory_other_charges_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/inventory/other_charges'
    });
});

jQuery("#manage_inventory_terms_and_conditions_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/inventory/terms_and_conditions'
  });
});

jQuery("#manage_inventory_transportations_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/inventory/transportations'
    });
});

jQuery("#manage_inventory_vendor_rate_list_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/inventory/vendor_rates'
  });
});

jQuery("#manage_inventory_rol_rules_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/inventory/rol_rules'
  });
});

jQuery("#manage_invoice_templates_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/invoice_templates'
  });
});

jQuery("#manage_services_card_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/invoice_service_cards'
  });
});

jQuery("#manage_tax_rate_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/invoice_settings/tax_settings'
  });
});

jQuery("#manage_cash_register_templates_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/cash_register_templates'
  });
});

jQuery("#manage_service_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/service_masters'
  });
});

jQuery("#manage_pricing_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/pricing_masters'
  });
});

jQuery("#manage_surgery_package_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/surgery_packages'
  });
});

jQuery("#manage_payer_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/payer_masters'
  });
});

jQuery("#manage_insurance_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/finance/insurance_masters'
  });
});

jQuery("#manage_tpa_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/finance/tpa_masters'
  });
});

jQuery("#manage_panel_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/finance/panel_masters'
  });
});

jQuery("#manage_corporate_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/finance/corporate_masters'
  });
});

jQuery("#manage_dispensary_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/finance/dispensary_masters'
  });
});

jQuery("#manage_patient_payer_data_master_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/finance/patient_payer_data_masters'
  });
});

jQuery("#manage_referrals_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/referral_types'
  });
});

jQuery("#manage_custom_template_headers_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/custom_template_headers'
  });
});

jQuery("#manage_patient_form_settings_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/organisation_settings/validate_patient'
  });
});

jQuery("#ot_setup_form_settings_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/ot_rooms'
  });
});

jQuery("#queue_stations_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/queue_management/stations',
    data: { facility_id: '<%= current_facility.id.to_s %>' }
  });
});

jQuery("#queue_screens_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/queue_management/screens',
    data: { facility_id: '<%= current_facility.id.to_s %>' }
  });
});

$("#manage_patient_type_id").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/patient_types'
  });
});

$("#manage_sms_settings_id").click(function(e){
  e.preventDefault();
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/sms_settings/manage_sms'
  });
})

$("#organisation_manage_sms_settings_id").on('click', function(e){
  e.preventDefault();
  $.ajax({
    type: 'GET',
    dataType: "script",
    url: '/sms_settings/organisation_manage_sms'
  })
})

$("#organisation_manage_communication_template_settings_id").on('click', function(e){
  e.preventDefault();
  $.ajax({
    type: 'GET',
    dataType: "script",
    url: '/communication_templates'
  })
})

$("#manage_communication_event_setups_id").on('click', function(e){
  e.preventDefault();
  $.ajax({
    type: 'GET',
    dataType: "script",
    url: '/communication_event_setups'
  })
})

$("#manage_feedback_settings_id").click(function(e){
  e.preventDefault();
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/feedback_forms/manage_feedback'
  });
})

//
//$("#manage_lab_set_service_id").click(function(e){
//    e.preventDefault();
//    console.log("raku")
//    jQuery.ajax({
//        type: "GET",
//        dataType: "script",
//        url: '/investigation/set/services'
//    });
//
//})

jQuery("#laboratorysets_ids").on('click',function() {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    data: { remote: "true"},
    url: '/medication_kits/facilitylaboratorysets'
  });
});

jQuery("#manage_adverse_events_mail_id").on('click',function(e) {
  e.preventDefault();
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    data: { remote: "true"},
    url: '/adverse_events_mail_settings'
  });
});

jQuery("#contact_list_ids").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/contacts'
  });
});

jQuery("#facility_contact_list_ids").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/facility_contacts'
  });
});

jQuery("#custom_icds").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/custom_icd_diagnoses'
  });
});

jQuery("#custom_procedures").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/custom_common_procedures'
  });
});

jQuery("#custom_ophthal_investigatons").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/custom_ophthal_investigations'
  });
});

jQuery("#custom_radiology_investigatons").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/custom_radiology_investigations'
  });
});

jQuery("#custom_laboratory_investigatons").on('click',function(e) {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/laboratory_investigation_data'
  });
});

jQuery("#manage_inventory_department_id").on('click',function(e) {
  jQuery(".all-inventories").html("<%= escape_javascript(render '/organisations/show_facilitywise_inventory.html.erb') %>")
});

$(function() {
  jQuery.ajax({
    type: "GET",
    dataType: "script",
    url: '/organisations/manage'
  });
});

$('.settings_update li ul li a').on('click',function(e){
  $("#organisation_appointments").empty();
  $("#organisation_appointments").html('');
  $("#facility_appointments").empty();
  $("#facility_appointments").html('');
  $("#organisation_sub_appointments").empty('');
})
// for loading facility appointment types
$("#facility_appointment_id").on('click',function(e){
  $.ajax({
    type:"GET",
    dataType: 'script',
    url: '/appointment_types/facility_appointment_type'
  })
});

$("#org_appointment").on('click',function(e){
  $.ajax({
    type: 'GET',
    dataType: 'script',
    url:'/organisation_appointment_types/organisation_appointment_type'
  })
})

$("#org_sub_appointment").on('click', function(e){
  $.ajax({
    type: 'GET',
    dataType: 'script',
    url: '/organisation_appointment_types/organisation_sub_appointment_type'
  })
})

// for organisation level medication sets
$("#medication_set_organisation_id").on('click',function(e){
  $.ajax({
    type: 'GET',
    dataType: 'script',
    data: {remote: "true"},
    url:'/medication_kits/organisation_medication_kit'
  })
})

// for facility level medication sets
$("#medication_set_facility_id").on('click',function(e){
  $.ajax({
    type: 'GET',
    dataType: 'script',
    data: {remote: "true"},
    url:'/medication_kits/facility_medication_kit'
  })
})

// organisation medication lists
$("#medication_lists_organisation_id").on('click',function(e){
  $.ajax({
    type:'GET',
    dataType: 'script',
    data: {remote: "true"},
    url: '/medication_kits/get_organisation_medication_list'
  })
})

$("#medication_lists_facility_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/medication_kits/get_facility_medication_list"
  })
})

// medical certificates
$("#medication_certificate_org_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/user_notes_templates/get_organisation_certificates"
  })
})

$("#medication_certificate_facility_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/user_notes_templates/get_facility_certificates"
  })
})

// Custom Consents
$("#custom_consents_id").on("click", function(e) {
  $.ajax({
    type: "GET",
    dataType: "script",
    data: { remote: "true" },
    url: "/custom_consents/index"
  })
})

// advice set
$("#advice_set_organisation_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/advice_sets/organisation_advice_set"
  })
})

$("#advice_set_facility_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/advice_sets/facility_advice_set"
  })
})

$("#manage_wards_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/wards"
  })
})

$("#manage_psrs_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/link_psrs"
  })
})

$("#manage_region_masters_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/region_masters"
  })
})

$("#manage_entity_groups_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/entity_groups"
  })
})

$("#manage_sequences_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/sequence_managers"
  })
})

$("#manage_offers_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/offer_managers"
  })
});

$("#trusted_domains_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: { remote: "true" },
    url: "/trusted_domains"
  })
})

$("#all_camps_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/camps"
  })
})

$("#time_slots_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true", level: 'organisation'},
    url: "/user_time_slots"
  })
})

// in-patient_surgical_notes
$("#in_patient_surg_notes_organisation_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/procedure_notes/get_organisation_procedure_notes"
  })
})

$("#in_patient_surg_notes_facility_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/procedure_notes/get_facility_procedure_notes"
  })
})


$("#pre_admission_instruction_note_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/pre_admission_instruction_notes"
  })
})

$("#pre_admission_medication_note_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/pre_admission_medication_notes"
  })
})

$("#pre_admission_investigation_note_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/pre_admission_investigation_notes"
  })
})
$("#pre_admission_special_note_id").on("click",function(e){
  $.ajax({
    type: "GET",
    dataType: "script",
    data: {remote: "true"},
    url: "/pre_admission_special_notes"
  })
})

//$("#save_org_id_prefix").on('click',function(){
//  jQuery.ajax({
//    type : 'get',
//    url: '/organisations/update_id_prefix',
//    data: {new_prefix: $("#org_id_prefix").val(), remote: "true" }
//  })
//})

function org_type_page() {
  $('#org_id_prefix_form').validate({
    errorElement: 'div',
    errorPlacement: function (error, element) {
      error.insertAfter(element);
    }
  });
}
org_type_page()

$('.setting-heading').on('click', function(){
  $(this).siblings('.setting-heading').find('.collapse.in').siblings('a').click()
})


// alias required to cRequired with new message
$.validator.addMethod("LabelRequired", $.validator.methods.required, "Label cannot be blank");
$.validator.addMethod("Minlength", $.validator.methods.minlength,
$.validator.format("Prefix must have at least {0} characters"));
$.validator.addClassRules("org_id_prefix", { LabelRequired: true, Minlength: 3});
