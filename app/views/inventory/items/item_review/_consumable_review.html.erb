<div class="modal-dialog modal-lg" style="width: 90%">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title text-center">Review Implant item</h4>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <%= form_for @inventory_item, :url => inventory_items_path, remote: true do |f|%>
                        <table class="table-inventory table-add-item">
                        <tr>
                            <td width="50%">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">Description</label>
                                <div class="col-sm-7">
                                <%= f.text_field :description,{:class=> "form-control review_field", :placeholder=>"", value: @inventory_params[:description]} %>
                                </div>
                            </div>
                            </td>
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">Batch No.</label>
                                <div class="col-sm-7">
                                <%= text_field_tag :batch_no ,"",class: 'form-control review_field',placeholder: "", value: @batch_no %>
                                </div>
                            </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">Barcode</label>
                                <div class="col-sm-7">
                                <%= f.text_field :barcode,{:class=> "form-control review_field", :placeholder=>"", value: @inventory_params["barcode"]} %>
                                </div>
                            </div>
                            </td>
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">Quantity/Unit <i class="fa fa-info-circle hg-tooltip" title="Quantity In a Strip,Bottle,Etc." style="cursor:help;"></i></label>
                                <div class="col-sm-2">
                                <%= f.text_field :sub_units,{:id => "inventory_item_sub_units", :class=> "form-control review_field", :placeholder=>"",:style=> "height: 30px;", value: @inventory_params[:sub_units]} %>

                                </div>
                                <div class="col-sm-1">
                                <span>/</span>
                                </div>
                                <div class="col-sm-4">
                                <%= f.text_field :packaging_type, id:"consu_packaging_type", class: "form-control review_field", value: @inventory_params['packaging_type']%>
                                <%= f.select :packaging_type, [['Strip','Strip'],['Ampule','Ampule'],['Applicator','Applicator'],['Bag','Bag'],['Blister Pack','Blister Pack'],['Bottle, with Applicator','Bottle, with Applicator'],['Bottle, Dispensing','Bottle, Dispensing'],['Bottle, Dropper','Bottle, Dropper'],['Bottle, Glass','Bottle, Glass'],['Bottle, Plastic','Bottle, Plastic'],['Bottle, Pump','Bottle, Pump'],['Bottle, Spray','Bottle, Spray'],['Bottle, Unit-Dose','Bottle, Unit-Dose'],['Pack','Box'],['Box, Unit-Dose','Box, Unit-Dose'],['Can','Can'],['Canister','Canister'],['Carton','Carton'],['Cartridge','Cartridge'],['Case','Case'],['Cello Pack','Cello Pack'],['Container','Container'],['Cup','Cup'],['Cup, Unit-Dose','Cup, Unit-Dose'],['Cylinder','Cylinder'],['Dewar','Dewar'],['DialPack','DialPack'],['Dose Pack','Dose Pack'],['Drum','Drum'],['Inhaler','Inhaler'],['Inhaler, Refill','Inhaler, Refill'],['Jar','Jar'],['Jug','Jug'],['Kit','Kit'],['Not Stated','Not Stated'],['Package','Package'],['Package, Combination','Package, Combination'],['Packet','Packet'],['Pouch','Pouch'],['Supersack','Supersack'],['Syringe','Syringe'],['Syringe, Glass','Syringe, Glass'],['Syringe, Plastic','Syringe, Plastic'],['Tambinder','Tambinder'],['Tray','Tray'],['Tube','Tube'],['Tube, With Applicator','Tube, With Applicator'],['Vial','Vial'],['Vial, Dispensing','Vial, Dispensing'],['Vial, Glass','Vial, Glass'],['Vial, Multi-Dose','Vial, Multi-Dose'],['Vial, Patent Delivery System','Vial, Patent Delivery System'],['Vial, Pharmacy Bulk Package','Vial, Pharmacy Bulk Package'],['Vial, Piggyback','Vial, Piggyback'],['Vial, Plastic','Vial, Plastic'],['Vial, Single-Dose','Vial, Single-Dose'],['Vial, Single-Use','Vial, Single-Use']], { :class=> "form-control dispensing-unit-dd",:style=> "display: inline; font-size: 9px" } %>
                                </div>
                            </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">Stock <i class="fa fa-info-circle hg-tooltip" title="Total No. of Strip,Bottle,Etc." style="cursor:help;"></i></label>
                                <div class="col-sm-7">
                                <%= text_field_tag :stock_pack ,"",class: 'form-control review_field',placeholder: "", value: @stock_pack%>
                                </div>
                            </div>
                            </td>
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">Stock in Units</label>
                                <div class="col-sm-7">
                                <%= text_field_tag :stock ,"",class: 'form-control ',placeholder: "",readonly: "readonly", tabindex: "-1", value: @stock %>
                                </div>
                            </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">Manufacturer</label>
                                <div class="col-sm-7">
                                <%= f.text_field :manufacturer,{:class=> "form-control review_field", :placeholder=>"", value: @inventory_params[:manufacturer]} %>
                                </div>
                            </div>
                            </td>
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 text-right">Distributor (Supplier)</label>
                                <div class="col-sm-7">
                                <%= text_field_tag :vendor ,"",class: 'form-control review_field',placeholder: "", value: @vendor%>
                                </div>
                            </div>
                            </td>
                        </tr>
                        <tr><!-- <tr style="border-top: 1px solid #efefef; margin-top: 5px; margin-bottom: 5px;"> -->
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 text-right">Purchase Price<br><span class="pack-small">(Pack)</span></label>
                                <div class="col-sm-7">
                                <div class="input-group">
                                    <span class="input-group-addon">&#x20B9</span>
                                    <%= text_field_tag :price_pack ,"",class: 'form-control review_field',placeholder: "", value: @price_pack%>
                                </div>
                                </div>
                            </div>
                            </td>
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 text-right">Purchase Price<br><span class="unit-small">(Unit)</span></label>
                                <div class="col-sm-7">
                                <div class="input-group">
                                    <span class="input-group-addon">&#x20B9</span>
                                    <%= text_field_tag :price ,"",class: 'form-control ',placeholder: "",readonly: "readonly", tabindex: "-1", value: @price %>
                                </div>
                                </div>
                            </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 text-right">MRP<br><span class="pack-small">(Pack)</span></label>
                                <div class="col-sm-7">
                                <div class="input-group">
                                    <span class="input-group-addon">&#x20B9</span>
                                    <%= text_field_tag :mrp_pack ,"",class: 'form-control review_field',placeholder: "", value: @mrp_pack%>
                                </div>
                                </div>
                            </div>
                            </td>
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 text-right">MRP<br><span class="unit-small">(Unit)</span></label>
                                <div class="col-sm-7">
                                <div class="input-group">
                                    <span class="input-group-addon">&#x20B9</span>
                                    <%= text_field_tag :mrp ,"",class: 'form-control ',placeholder: "",readonly: "readonly", tabindex: "-1", value: @mrp %>
                                </div>
                                </div>
                            </div>
                            </td>

                        </tr>
                        <tr><!-- <tr style="border-top: 1px solid #efefef; margin-top: 5px;"></tr> -->
                        <tr>
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 text-right">Selling Price<br><span class="pack-small">(Pack)</span></label>
                                <div class="col-sm-7">
                                <div class="input-group">
                                    <span class="input-group-addon">&#x20B9</span>
                                    <%= text_field_tag :list_price_pack ,"",class: 'form-control review_field',placeholder: "", value: @list_price_pack%>
                                </div>
                                </div>
                            </div>
                            </td>
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 text-right">Selling Price<br><span class="unit-small">(Unit)</span></label>
                                <div class="col-sm-7">
                                <div class="input-group">
                                    <span class="input-group-addon">&#x20B9</span>
                                    <%= text_field_tag :list_price ,"",class: 'form-control ',placeholder: "",readonly: "readonly", tabindex: "-1", value: @list_price %>
                                </div>
                                </div>
                            </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">Mark up <i class="fa fa-info-circle hg-tooltip" title="Total Profit Margin(in %)" style="cursor:help;"></i></label>
                                <div class="col-sm-7">
                                <div class="input-group">
                                    <%= text_field_tag :mark_up ,"",class: 'form-control review_field',placeholder: "", value: @mark_up%>
                                    <span class="input-group-addon">&#37;</span>
                                </div>
                                </div>
                            </div>
                            </td>
                            <td>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">Expiry Date</label>
                                <div class="col-sm-7">
                                <%= text_field_tag :expiry ,"",class: 'form-control datepicker review_field',placeholder: "", value: @expiry %>
                                </div>
                            </div>
                            </td>
                        </tr>
                        </table>
                        <%= f.hidden_field :checkoutable,{:value=>"true",:class=> "form-control review_field", :placeholder=>"", } %>
                        <%= f.hidden_field :category,{:value=>"consumable",:class=> "form-control review_field", :placeholder=>""} %>
                        <%= f.submit "Save", class: "btn btn-success", remote: true,'data-disable-with' =>"Please Wait...", :onclick => 'addConsumable_page()' %>
                    <% end %>
                    <button class="btn btn edit_item">Edit</button>
                </div>
            </div>
        </div>
    </div>
</div>
<style>
  input.error, select.error {
    border-color: #b94a48;
    background-image: none;
  }
  input.valid, select.valid {
    border-color: #468847;
    background-image: none;
  }
  #inventory_item_consumable_packaging_type{
      display: inline-block;
    height: 33px;
    width: 100%;
    background: none;
  }
  .edit_item{
        margin-left: 122px;
    margin-top: -55px;
    border: 1px solid #FF7E7E;
    background: #FF7E7E;
    color: #fff;
  }
</style>

<script type="text/javascript">
  datepicker_options = {
    changeMonth: true,
    changeYear: true,
    dateFormat: "yy-mm-dd",
    minDate: -0
    //showButtonPanel: true,
  };

  $('.datepicker').datepicker(datepicker_options);
  // $.validate({
  //   form: "#formAddItem",
  // })

  // Select2
  $.fn.modal.Constructor.prototype.enforceFocus = function() {};
  $(".dispensing-unit-dd").select2();

  // Tooltip
  $(".hg-tooltip").tipsy();


  function addConsumable_page() {
    $("#new_inventory_item").validate({
      rules: {
        "inventory_item[description]": {
          required: true,
        },
//        "inventory_item[barcode]": {
//          required: true,
//        },
        "stock_pack": {
          required: true,
          number: true
        },
        "inventory_item[manufacturer]": {
          required: true,
        },
        "price_pack": {
          required: true,
          number: true
        },
        "mrp_pack": {
          required: true,
          number: true
        },
        "list_price_pack": {
          required: true,
          number: true
        },
        "expiry": {
          required: true,
          dateISO: true
        },

      },
      messages: {


      },
      errorPlacement: function (error, element) {
        var id = $(element).attr("id");
        var parent = $("#"+id).parents(".input-group").length
        if(parent == 0){
          error.insertAfter(element);
        } else {
          error.insertAfter($("#"+id).parents(".input-group"));
        }
      }
    });
  }
  addConsumable_page()

</script>
<script>
    $("#inventory_item_consumable_packaging_type").hide();
     $('.review_field').attr('readonly', true);
    $(".edit_item").on('click', function(){
       $('.review_field').removeAttr('readonly');
       $("#inventory_item_consumable_packaging_type").show();
       $("#consu_packaging_type").hide();
    })
</script>