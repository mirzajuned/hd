jQuery(document).ready(function() {
    jQuery(".ankleinstability-options").hide();
    jQuery("input[name='opdrecord[ankleinstability]']").on('change', function() {
        if (this.value === "Yes") {
            jQuery(".ankleinstability-options").show();
        }
        else if (this.value === "No") {
            jQuery(".ankleinstability-options").hide();
        }
    });
    jQuery(".skincondition_buttons").on('click', function() {
        var clickedbutton = this;
        if (jQuery(clickedbutton).attr("input-value") === "Normal") {
            if (jQuery(clickedbutton).hasClass("btn-darkblue")) {
                jQuery(clickedbutton).removeClass("btn-darkblue");
                jQuery("#opdrecord_skincondition").val("");
            } else {
                jQuery(".skincondition_buttons").removeClass("btn-darkblue");
                jQuery("#opdrecord_skincondition").val("");
            }
        } else if (jQuery(clickedbutton).attr("input-value") !== "Normal") {
            jQuery.each(jQuery(".skincondition_buttons"), function(index, button) {
                if (jQuery(button).attr("input-value") === "Normal" && jQuery(button).hasClass("btn-darkblue")) {
                    jQuery(button).removeClass("btn-darkblue");
                    jQuery("#opdrecord_skincondition").val("");
                }
            });
        }
    });
    jQuery(".nails_buttons").on('click', function() {
        var clickedbutton = this;
        if (jQuery(clickedbutton).attr("input-value") === "Normal") {
            if (jQuery(clickedbutton).hasClass("btn-darkblue")) {
                jQuery(clickedbutton).removeClass("btn-darkblue");
                jQuery("#opdrecord_nails").val("");
            } else {
                jQuery(".nails_buttons").removeClass("btn-darkblue");
                jQuery("#opdrecord_nails").val("");
            }
        } else if (jQuery(clickedbutton).attr("input-value") !== "Normal") {
            jQuery.each(jQuery(".nails_buttons"), function(index, button) {
                if (jQuery(button).attr("input-value") === "Normal" && jQuery(button).hasClass("btn-darkblue")) {
                    jQuery(button).removeClass("btn-darkblue");
                    jQuery("#opdrecord_nails").val("");
                }
            });
        }
    });
    jQuery(".footarches_buttons").on('click', function() {
        var clickedbutton = this;
        if (jQuery(clickedbutton).attr("input-value") === "Normal") {
            if (jQuery(clickedbutton).hasClass("btn-darkblue")) {
                jQuery(clickedbutton).removeClass("btn-darkblue");
                jQuery("#opdrecord_footarches").val("");
            } else {
                jQuery(".footarches_buttons").removeClass("btn-darkblue");
                jQuery("#opdrecord_footarches").val("");
            }
        } else if (jQuery(clickedbutton).attr("input-value") !== "Normal") {
            jQuery.each(jQuery(".footarches_buttons"), function(index, button) {
                if (jQuery(button).attr("input-value") === "Normal" && jQuery(button).hasClass("btn-darkblue")) {
                    jQuery(button).removeClass("btn-darkblue");
                    jQuery("#opdrecord_footarches").val("");
                }
            });
        }
    });
    jQuery(".nerveentrapment_buttons").on('click', function() {
        var clickedbutton = this;
        if (jQuery(clickedbutton).attr("input-value") === "None") {
            if (jQuery(clickedbutton).hasClass("btn-darkblue")) {
                jQuery(clickedbutton).removeClass("btn-darkblue");
                jQuery("#opdrecord_nerveentrapment").val("");
            } else {
                jQuery(".nerveentrapment_buttons").removeClass("btn-darkblue");
                jQuery("#opdrecord_nerveentrapment").val("");
            }
        } else if (jQuery(clickedbutton).attr("input-value") !== "None") {
            jQuery.each(jQuery(".nerveentrapment_buttons"), function(index, button) {
                if (jQuery(button).attr("input-value") === "None" && jQuery(button).hasClass("btn-darkblue")) {
                    jQuery(button).removeClass("btn-darkblue");
                    jQuery("#opdrecord_nerveentrapment").val("");
                }
            });
        }
    });
    jQuery("#opdrecord_anthropometryheight, #opdrecord_anthropometryweight").on('change', function() {
        if ((jQuery("#opdrecord_anthropometryheight").val().length > 0) && (jQuery("#opdrecord_anthropometryweight").val().length > 0)) {
            var height = jQuery("#opdrecord_anthropometryheight").val() / 100;
            var weight = jQuery("#opdrecord_anthropometryweight").val();
            var bmi = "";
            bmi = weight / Math.pow(height, 2);
            jQuery("#opdrecord_anthropometrybmi").val(bmi.toFixed(1));
        }
    });
    var min, max;

    <% @ankle_dorsi_flexion_right = Array.new %>
    <% @ankle_dorsi_flexion_right=@opdrecord.romsliderrangerightdorsiplantarflexion %>
    <% if @ankle_dorsi_flexion_right.nil? %>
        min = -20;
        max = 50;
    <%else%>
    <% @ankle_dorsi_flexion_right=@ankle_dorsi_flexion_right.split(":") %>
        min = <%= @ankle_dorsi_flexion_right[0] %>
        max = <%= @ankle_dorsi_flexion_right[1] %>
    <% end %>

    jQuery( "#rom-slider-range-right-dorsi-plantar-flexion" ).slider({
        range: true,
        min: -20,
        max: 50,
        values: [ min, max ],
        slide: function( event, ui ) {
            jQuery( "#opdrecord_romsliderrangerightdorsiplantarflexion" ).val( ui.values[ 0 ] + " : " + ui.values[ 1 ] );
        }
    });
<% @ankle_dorsi_flexion_left = Array.new %>
    <% @ankle_dorsi_flexion_left=@opdrecord.romsliderrangeleftdorsiplantarflexion %>
    <% if @ankle_dorsi_flexion_left.nil? %>
        min = -20;
        max = 50;
    <%else%>
    <% @ankle_dorsi_flexion_left=@ankle_dorsi_flexion_left.split(":") %>
        min = <%= @ankle_dorsi_flexion_left[0] %>
        max = <%= @ankle_dorsi_flexion_left[1] %>
    <% end %>


    jQuery( "#rom-slider-range-left-dorsi-plantar-flexion" ).slider({
        range: true,
        min: -20,
        max: 50,
        values: [ min, max ],
        slide: function( event, ui ) {
            jQuery( "#opdrecord_romsliderrangeleftdorsiplantarflexion" ).val( ui.values[ 0 ] + " : " + ui.values[ 1 ] );
        }
    });


    <% @ankle_plantar_flexion_right = Array.new %>
    <% @ankle_plantar_flexion_right = @opdrecord.romsliderrangerightinversioneversion %>
    <% if @ankle_plantar_flexion_right.nil? %>
        min = -35;
        max = 15;
    <%else%>
    <% @ankle_plantar_flexion_right=@ankle_plantar_flexion_right.split(":") %>
        min = <%= @ankle_plantar_flexion_right[0] %>
        max = <%= @ankle_plantar_flexion_right[1] %>
    <% end %>


    jQuery( "#rom-slider-range-right-inversion-eversion" ).slider({
        range: true,
        min: -35,
        max: 15,
        values: [ min, max ],
        slide: function( event, ui ) {
            jQuery( "#opdrecord_romsliderrangerightinversioneversion" ).val( ui.values[ 0 ] + " : " + ui.values[ 1 ] );
        }
    });

    <% @ankle_plantar_flexion_left = Array.new %>
    <% @ankle_plantar_flexion_left = @opdrecord.romsliderrangeleftinversioneversion %>
    <% if @ankle_plantar_flexion_left.nil? %>
        min = -35;
        max = 15;
    <%else%>
    <% @ankle_plantar_flexion_left=@ankle_plantar_flexion_left.split(":") %>
        min = <%= @ankle_plantar_flexion_left[0] %>
        max = <%= @ankle_plantar_flexion_left[1] %>
    <% end %>


    jQuery( "#rom-slider-range-left-inversion-eversion" ).slider({
        range: true,
        min: -35,
        max: 15,
        values: [ min, max ],
        slide: function( event, ui ) {
            jQuery( "#opdrecord_romsliderrangeleftinversioneversion" ).val( ui.values[ 0 ] + " : " + ui.values[ 1 ] );
        }
    });
    jQuery( "#opdrecord_romsliderrangerightdorsiplantarflexion" ).val( jQuery( "#rom-slider-range-right-dorsi-plantar-flexion" ).slider( "values", 0 ) +   " : " + jQuery( "#rom-slider-range-right-dorsi-plantar-flexion" ).slider( "values", 1 ) );
    jQuery( "#opdrecord_romsliderrangeleftdorsiplantarflexion" ).val( jQuery( "#rom-slider-range-left-dorsi-plantar-flexion" ).slider( "values", 0 ) +   " : " + jQuery( "#rom-slider-range-left-dorsi-plantar-flexion" ).slider( "values", 1 ) );
    jQuery( "#opdrecord_romsliderrangerightinversioneversion" ).val( jQuery( "#rom-slider-range-right-inversion-eversion" ).slider( "values", 0 ) +   " : " + jQuery( "#rom-slider-range-right-inversion-eversion" ).slider( "values", 1 ) );
    jQuery( "#opdrecord_romsliderrangeleftinversioneversion" ).val( jQuery( "#rom-slider-range-left-inversion-eversion" ).slider( "values", 0 ) +   " : " + jQuery( "#rom-slider-range-left-inversion-eversion" ).slider( "values", 1 ) );

});

function ankleinstability(){
  if ($("input[name='opdrecord[ankleinstability]']").val() == "Yes") {
    jQuery(".ankleinstability-options").show();
  }
  else if ($("input[name='opdrecord[ankleinstability]']").val() == "No") {
    jQuery(".ankleinstability-options").hide();
  }
}

ankleinstability();