<% country_id = current_facility.country_id %>
<% show_mimimized_view = (@record&.pluck(:@templatetype)&.include?('refraction') || params[:action] == "edit") && @templatetype != "refraction" && @templatetype != "optometrist" && @templatetype != "vision" %>
<% if @new_opt_view == "optometrist" || show_mimimized_view %>
  <div class="row r-pgp-row">
    <div class="col-md-12 col-sm-12 r-pgp-column questionsforpgp" id="r-questionsforpgp">
      <div class="col-md-3 col-sm-3" style="padding: 0px">
        <% if opdrecord.read_attribute(:r_pgp_distant_sph).present? || opdrecord.read_attribute(:r_pgp_distant_cyl).present? || opdrecord.read_attribute(:r_pgp_distant_axis).present? || opdrecord.read_attribute(:r_pgp_near_sph).present? || opdrecord.read_attribute(:r_pgp_near_cyl).present? || opdrecord.read_attribute(:r_pgp_near_axis).present? ||opdrecord.read_attribute(:r_pgp_add_sph).present? ||opdrecord.read_attribute(:r_pgp_add_cyl).present? ||opdrecord.read_attribute(:r_pgp_add_axis).present? || opdrecord.read_attribute(:'r_pgp_typeoflens').present? || opdrecord.read_attribute(:'r_pgp_comments').present? %>
          <div class="col-md-12 col-sm-12 badge badge-eye-template-labels data-filled"><strong>PGP 1&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
        <% else %>
          <div class="col-md-12 col-sm-12 badge badge-eye-template-labels data-empty"><strong>PGP 1&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
        <% end %>
        <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:none;" title="Fill PGP" id="fill-pgp"><a href="/opd_records/ophthalmology_notes/fill_refraction_data?flag=pgp" data-remote="true"> <i class="fa fa-arrow-circle-right filldatabutton"> Fill</i></a></span>
        <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Copy PGP to Glass Prescription" id="copy_pgp_to_gl_pres"><i class="fa fa-arrow-circle-down copyfieldsbutton show_hide_pgp_comment"> copy</i></span>
        <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Add PGP" id="add_pgp"><i class="fa fa-plus-circle addfieldsbutton"> PGP</i></span>
      </div>
      <div class="col-md-9 col-sm-9 r-answersforpgp mainview_top_r">
        <div class="editview_toggle_r" style="display:none;">
          <table class="table table-bordered">
            <thead>
              <tr class="success">
                <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
                <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
                <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
                <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
                <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  Distant
                </td>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  <%= f.input_field :r_pgp_distant_sph, :class => "form-control form-control-custom pgp r_pgp_distant_sph calculate_sph_near_from_distant ref_field", :maxlength => 5, :required => false, :name => "opdrecord[r_pgp_distant_sph]", :value => opdrecord.read_attribute(:r_pgp_distant_sph) %>
                </td>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  <%= f.input_field :r_pgp_distant_cyl, :class => "form-control form-control-custom pgp r_pgp_distant_cyl calculate_cyl_near_from_distant ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_cyl]", :value => opdrecord.read_attribute(:r_pgp_distant_cyl) %>
                </td>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  <%= f.input_field :r_pgp_distant_axis, :class => "form-control form-control-custom pgp r_pgp_distant_axis calculate_axis_near_from_distant ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_axis]", :value => opdrecord.read_attribute(:r_pgp_distant_axis) %>
                </td>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  <%= f.input_field :r_pgp_distant_vision, :class => "form-control form-control-custom pgp r_pgp_distant_vision ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_distant_vision]", :value => opdrecord.read_attribute(:r_pgp_distant_vision) %>
                </td>
              </tr>
              <tr>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  Add<sup class="suphash">#</sup>
                </td>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  <%= f.input_field :r_pgp_add_sph, :class => "form-control form-control-custom pgp r_pgp_add_sph calculate_near_from_add ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_sph]", :value => opdrecord.read_attribute(:r_pgp_add_sph) %>
                </td>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  <%= f.input_field :r_pgp_add_cyl, :class => "form-control form-control-custom r_pgp_add_cyl ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_cyl]", :value => opdrecord.read_attribute(:r_pgp_add_cyl) %>
                </td>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  <%= f.input_field :r_pgp_add_axis, :class => "form-control form-control-custom r_pgp_add_axis ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_axis]", :value => opdrecord.read_attribute(:r_pgp_add_axis) %>
                </td>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  <%= f.input_field :r_pgp_add_vision, :class => "form-control form-control-custom pgp r_pgp_add_vision ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_add_vision]", :value => opdrecord.read_attribute(:r_pgp_add_vision) %>
                </td>
              </tr>
              <tr>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  Near
                </td>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  <%= f.input_field :r_pgp_near_sph, :class => "form-control form-control-custom pgp r_pgp_near_sph ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_sph]", :value => opdrecord.read_attribute(:r_pgp_near_sph) %>
                </td>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  <%= f.input_field :r_pgp_near_cyl, :class => "form-control form-control-custom pgp r_pgp_near_cyl ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_cyl]", :value => opdrecord.read_attribute(:r_pgp_near_cyl) %>
                </td>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  <%= f.input_field :r_pgp_near_axis, :class => "form-control form-control-custom pgp r_pgp_near_axis ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_axis]", :value => opdrecord.read_attribute(:r_pgp_near_axis) %>
                </td>
                <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                  <%= f.input_field :r_pgp_near_vision, :class => "form-control form-control-custom pgp r_pgp_near_vision ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_near_vision]", :value => opdrecord.read_attribute(:r_pgp_near_vision) %>
                </td>
              </tr>
            </tbody>
          </table>
          <div class="row mb5">
            <span class="col-md-4 col-sm-4">Type of Lens</span>
            <span><%= f.input :r_pgp_typeoflens, wrapper_html: {:class => "col-md-6 col-sm-6"},collection: ['Single Vision - Distant','Single Vision - Near','Bifocal','Progressive','D Bifocal','KT Bifocal'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_typeoflens form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_typeoflens]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_typeoflens)) %></span>
          </div>
          <div class="row mb5" style="margin-left: -187px;">
            <div class="col-md-3 col-sm-3 text-center">Comments: </div>
            <div class="col-md-9 col-sm-9">
              <%= f.text_area :r_pgp_comments, { class: 'form-control', style: 'width:95%;', required: false, name: 'opdrecord[r_pgp_comments]', value: opdrecord.read_attribute(:r_pgp_comments) } %>
            </div>
          </div>
        </div>
        <div class="row showview_full_r">
          <div class="col-md-8 col-sm-8 showview_toggle_pgp_r">
            <table class="table table-bordered" style="margin-bottom:5px;font-size:11px;">
              <thead>
                <tr class="success">
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Distant
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <% if opdrecord.read_attribute(:r_pgp_distant_sph).present? %>
                      <%= opdrecord.read_attribute(:r_pgp_distant_sph) %>
                    <% else %>
                      --
                    <% end %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <% if opdrecord.read_attribute(:r_pgp_distant_cyl).present? %>
                      <%= opdrecord.read_attribute(:r_pgp_distant_cyl) %>
                    <% else %>
                      --
                    <% end %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <% if opdrecord.read_attribute(:r_pgp_distant_axis).present? %>
                      <%= opdrecord.read_attribute(:r_pgp_distant_axis) %>
                    <% else %>
                      --
                    <% end %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <% if opdrecord.read_attribute(:r_pgp_distant_vision).present? %>
                      <%= opdrecord.read_attribute(:r_pgp_distant_vision) %>
                    <% else %>
                      --
                    <% end %>
                  </td>
                </tr>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Add
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <% if opdrecord.read_attribute(:r_pgp_add_sph).present? %>
                      <%= opdrecord.read_attribute(:r_pgp_add_sph) %>
                    <% else %>
                      --
                    <% end %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <% if opdrecord.read_attribute(:r_pgp_add_cyl).present? %>
                      <%= opdrecord.read_attribute(:r_pgp_add_cyl) %>
                    <% else %>
                      --
                    <% end %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <% if opdrecord.read_attribute(:r_pgp_add_axis).present? %>
                      <%= opdrecord.read_attribute(:r_pgp_add_axis) %>
                    <% else %>
                      --
                    <% end %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <% if opdrecord.read_attribute(:r_pgp_add_vision).present? %>
                      <%= opdrecord.read_attribute(:r_pgp_add_vision) %>
                    <% else %>
                      --
                    <% end %>
                  </td>
                </tr>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Near
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <% if opdrecord.read_attribute(:r_pgp_near_sph).present? %>
                      <%= opdrecord.read_attribute(:r_pgp_near_sph) %>
                    <% else %>
                      --
                    <% end %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <% if opdrecord.read_attribute(:r_pgp_near_cyl).present? %>
                      <%= opdrecord.read_attribute(:r_pgp_near_cyl) %>
                    <% else %>
                      --
                    <% end %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <% if opdrecord.read_attribute(:r_pgp_near_axis).present? %>
                      <%= opdrecord.read_attribute(:r_pgp_near_axis) %>
                    <% else %>
                      --
                    <% end %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <% if opdrecord.read_attribute(:r_pgp_near_vision).present? %>
                      <%= opdrecord.read_attribute(:r_pgp_near_vision) %>
                    <% else %>
                      --
                    <% end %>
                  </td>
                </tr>
              </tbody>
            </table>
            <span style="font-size:11px;"><b>Type of Lens :</b> <%= opdrecord.read_attribute(:'r_pgp_typeoflens') %></span>
            <% if opdrecord.read_attribute(:r_pgp_comments).present? %>
              <br/>
              <span style="font-size:11px;"><b>Comments:</b> <%= opdrecord.read_attribute(:r_pgp_comments) %></span>
            <% end %>
          </div>
          <div class="col-md-4 col-sm-4 text-right" style="margin-left:-20px;">
            <button class="editViewActivate_r btn btn-link btn-xs editshow_hide_pgp"></button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <% if opdrecord.read_attribute(:r_pgp_distant_sph2).present? || opdrecord.read_attribute(:r_pgp_distant_cyl2).present? || opdrecord.read_attribute(:r_pgp_distant_axis2).present? || opdrecord.read_attribute(:r_pgp_near_sph2).present? || opdrecord.read_attribute(:r_pgp_near_cyl2).present? || opdrecord.read_attribute(:r_pgp_near_axis2).present? ||opdrecord.read_attribute(:r_pgp_add_sph2).present? ||opdrecord.read_attribute(:r_pgp_add_cyl2).present? ||opdrecord.read_attribute(:r_pgp_add_axis2).present? || opdrecord.read_attribute(:'r_pgp_typeoflens2').present? || opdrecord.read_attribute(:'r_pgp_comments2').present? || opdrecord.read_attribute(:l_pgp_distant_sph2).present? || opdrecord.read_attribute(:l_pgp_distant_cyl2).present? || opdrecord.read_attribute(:l_pgp_distant_axis2).present? || opdrecord.read_attribute(:l_pgp_near_sph2).present? || opdrecord.read_attribute(:l_pgp_near_cyl2).present? || opdrecord.read_attribute(:l_pgp_near_axis2).present? ||opdrecord.read_attribute(:l_pgp_add_sph2).present? ||opdrecord.read_attribute(:l_pgp_add_cyl2).present? ||opdrecord.read_attribute(:l_pgp_add_axis2).present? || opdrecord.read_attribute(:'l_pgp_typeoflens2').present? || opdrecord.read_attribute(:'l_pgp_comments2').present?  %>
    <div class="r-div-pgp2">
      <div class="hr-line-border mb5"></div>
      <div class="row r-pgp-row2">
        <div class="col-md-12 col-sm-12 r-pgp-column2 questionsforpgp2" id="r-questionsforpgp2">
          <div class="col-md-3 col-sm-3" style="padding: 0px">
            <% if opdrecord.read_attribute(:r_pgp_distant_sph2).present? || opdrecord.read_attribute(:r_pgp_distant_cyl2).present? || opdrecord.read_attribute(:r_pgp_distant_axis2).present? || opdrecord.read_attribute(:r_pgp_near_sph2).present? || opdrecord.read_attribute(:r_pgp_near_cyl2).present? || opdrecord.read_attribute(:r_pgp_near_axis2).present? ||opdrecord.read_attribute(:r_pgp_add_sph2).present? ||opdrecord.read_attribute(:r_pgp_add_cyl2).present? ||opdrecord.read_attribute(:r_pgp_add_axis2).present? || opdrecord.read_attribute(:'r_pgp_typeoflens2').present? || opdrecord.read_attribute(:'r_pgp_comments2').present? %>
              <div class="col-md-12 col-sm-12 badge badge-eye-template-labels data-filled"><strong>PGP 2&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
            <% else %>
              <div class="col-md-12 col-sm-12 badge badge-eye-template-labels data-empty"><strong>PGP 2&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
            <% end %>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:none;" title="Fill PGP" id="fill-pgp2"><a href="/opd_records/ophthalmology_notes/fill_refraction_data?flag=pgp2" data-remote="true"> <i class="fa fa-arrow-circle-right filldatabutton "> Fill</i></a></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Copy PGP to Glass Prescription" id="copy_pgp_to_gl_pres2"><i class="fa fa-arrow-circle-down copyfieldsbutton show_hide_pgp_comment2"> copy</i></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Add PGP" id="add_pgp2"><i class="fa fa-plus-circle addfieldsbutton"> PGP</i></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Remove PGP" id="remove_pgp2"><i class="fa fa-times removepgpfieldsbutton"> Remove</i></span>
          </div>
          <div class="col-md-9 col-sm-9 r-answersforpgp2 mainview_top_r">
            <div class="editview_toggle_r" style="display:none;">
              <table class="table table-bordered">
                <thead>
                  <tr class="success">
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      Distant
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_sph2, :class => "form-control form-control-custom pgp2 r_pgp_distant_sph2 calculate_sph_near_from_distant2 ref_field", :maxlength => 5, :required => false, :name => "opdrecord[r_pgp_distant_sph2]", :value => opdrecord.read_attribute(:r_pgp_distant_sph2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_cyl2, :class => "form-control form-control-custom pgp2 r_pgp_distant_cyl2 calculate_cyl_near_from_distant2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_cyl2]", :value => opdrecord.read_attribute(:r_pgp_distant_cyl2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_axis2, :class => "form-control form-control-custom pgp2 r_pgp_distant_axis2 calculate_axis_near_from_distant2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_axis2]", :value => opdrecord.read_attribute(:r_pgp_distant_axis2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_vision2, :class => "form-control form-control-custom pgp2 r_pgp_distant_vision2 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_distant_vision2]", :value => opdrecord.read_attribute(:r_pgp_distant_vision2) %>
                    </td>
                  </tr>
                  <tr>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      Add<sup class="suphash">#</sup>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_sph2, :class => "form-control form-control-custom pgp2 r_pgp_add_sph2 calculate_near_from_add2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_sph2]", :value => opdrecord.read_attribute(:r_pgp_add_sph2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_cyl2, :class => "form-control form-control-custom r_pgp_add_cyl2 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_cyl2]", :value => opdrecord.read_attribute(:r_pgp_add_cyl2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_axis2, :class => "form-control form-control-custom r_pgp_add_axis2 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_axis2]", :value => opdrecord.read_attribute(:r_pgp_add_axis2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_vision2, :class => "form-control form-control-custom pgp2 r_pgp_add_vision2 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_add_vision2]", :value => opdrecord.read_attribute(:r_pgp_add_vision2) %>
                    </td>
                  </tr>
                  <tr>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      Near
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_sph2, :class => "form-control form-control-custom pgp2 r_pgp_near_sph2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_sph2]", :value => opdrecord.read_attribute(:r_pgp_near_sph2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_cyl2, :class => "form-control form-control-custom pgp2 r_pgp_near_cyl2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_cyl2]", :value => opdrecord.read_attribute(:r_pgp_near_cyl2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_axis2, :class => "form-control form-control-custom pgp2 r_pgp_near_axis2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_axis2]", :value => opdrecord.read_attribute(:r_pgp_near_axis2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_vision2, :class => "form-control form-control-custom pgp2 r_pgp_near_vision2 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_near_vision2]", :value => opdrecord.read_attribute(:r_pgp_near_vision2) %>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div class="row mb5">
                <span class="col-md-4 col-sm-4">Type of Lens</span>
                <span><%= f.input :r_pgp_typeoflens2, wrapper_html: {:class => "col-md-6 col-sm-6"},collection: ['Single Vision - Distant','Single Vision - Near','Bifocal','Progressive','D Bifocal','KT Bifocal'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_typeoflens2 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_typeoflens2]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_typeoflens2)) %></span>
              </div>
              <div class="row mb5" style="margin-left: -187px;">
                <div class="col-md-3 col-sm-3 text-center">Comments: </div>
                <div class="col-md-9 col-sm-9">
                  <%= f.text_area :r_pgp_comments2, { class: 'form-control', style: 'width:95%;', required: false, name: 'opdrecord[r_pgp_comments2]', value: opdrecord.read_attribute(:r_pgp_comments2) } %>
                </div>
              </div>
            </div>
            <div class="row showview_full_r">
              <div class="col-md-8 col-sm-8 showview_toggle_pgp_r2">
                <table class="table table-bordered" style="margin-bottom:5px;font-size:11px;" id="r_tablepgp2">
                  <thead>
                    <tr class="success">
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        Distant
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_sph2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_sph2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_cyl2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_cyl2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_axis2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_axis2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_vision2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_vision2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                    </tr>
                    <tr>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        Add
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_sph2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_sph2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_cyl2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_cyl2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_axis2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_axis2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_vision2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_vision2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                    </tr>
                    <tr>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        Near
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_sph2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_sph2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_cyl2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_cyl2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_axis2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_axis2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_vision2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_vision2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <span style="font-size:11px;"><b>Type of Lens :</b><span id='r-lens2'><%= opdrecord.read_attribute(:'r_pgp_typeoflens2') %></span></span>
                <% if opdrecord.read_attribute(:r_pgp_comments2).present? %>
                  <br/>
                  <span class="r_pgp_comments2" style="font-size:11px;"><b>Comments:</b> <%= opdrecord.read_attribute(:r_pgp_comments2) %></span>
                <% end %>
              </div>
              <div class="col-md-4 col-sm-4 text-right" style="margin-left:-20px;">
                <button class="editViewActivate_r btn btn-link btn-xs editshow_hide_pgp2"></button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% else %>
    <div class="r-div-pgp2" style="display:none;">
      <div class="hr-line-border mb5"></div>
      <div class="row r-pgp-row2">
        <div class="col-md-12 col-sm-12 r-pgp-column2 questionsforpgp2" id="r-questionsforpgp2">
          <div class="col-md-3 col-sm-3" style="padding: 0px">
            <% if opdrecord.read_attribute(:r_pgp_distant_sph2).present? || opdrecord.read_attribute(:r_pgp_distant_cyl2).present? || opdrecord.read_attribute(:r_pgp_distant_axis2).present? || opdrecord.read_attribute(:r_pgp_near_sph2).present? || opdrecord.read_attribute(:r_pgp_near_cyl2).present? || opdrecord.read_attribute(:r_pgp_near_axis2).present? ||opdrecord.read_attribute(:r_pgp_add_sph2).present? ||opdrecord.read_attribute(:r_pgp_add_cyl2).present? ||opdrecord.read_attribute(:r_pgp_add_axis2).present? || opdrecord.read_attribute(:'r_pgp_typeoflens2').present? || opdrecord.read_attribute(:'r_pgp_comments2').present? %>
              <div class="col-md-12 col-sm-12 badge badge-eye-template-labels data-filled"><strong>PGP 2&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
            <% else %>
              <div class="col-md-12 col-sm-12 badge badge-eye-template-labels data-empty"><strong>PGP 2&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
            <% end %>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:none;" title="Fill PGP" id="fill-pgp2"><a href="/opd_records/ophthalmology_notes/fill_refraction_data?flag=pgp2" data-remote="true"> <i class="fa fa-arrow-circle-right filldatabutton "> Fill</i></a></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Copy PGP to Glass Prescription" id="copy_pgp_to_gl_pres2"><i class="fa fa-arrow-circle-down copyfieldsbutton show_hide_pgp_comment2"> copy</i></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Add PGP" id="add_pgp2"><i class="fa fa-plus-circle addfieldsbutton"> PGP</i></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Remove PGP" id="remove_pgp2"><i class="fa fa-times removepgpfieldsbutton"> Remove</i></span>
          </div>
          <div class="col-md-9 col-sm-9 r-answersforpgp2 mainview_top_r">
            <div class="editview_toggle_r" style="display:none;">
              <table class="table table-bordered">
                <thead>
                  <tr class="success">
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      Distant
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_sph2, :class => "form-control form-control-custom pgp2 r_pgp_distant_sph2 calculate_sph_near_from_distant2 ref_field", :maxlength => 5, :required => false, :name => "opdrecord[r_pgp_distant_sph2]", :value => opdrecord.read_attribute(:r_pgp_distant_sph2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_cyl2, :class => "form-control form-control-custom pgp2 r_pgp_distant_cyl2 calculate_cyl_near_from_distant2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_cyl2]", :value => opdrecord.read_attribute(:r_pgp_distant_cyl2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_axis2, :class => "form-control form-control-custom pgp2 r_pgp_distant_axis2 calculate_axis_near_from_distant2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_axis2]", :value => opdrecord.read_attribute(:r_pgp_distant_axis2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_vision2, :class => "form-control form-control-custom pgp2 r_pgp_distant_vision2 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_distant_vision2]", :value => opdrecord.read_attribute(:r_pgp_distant_vision2) %>
                    </td>
                  </tr>
                  <tr>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      Add<sup class="suphash">#</sup>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_sph2, :class => "form-control form-control-custom pgp2 r_pgp_add_sph2 calculate_near_from_add2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_sph2]", :value => opdrecord.read_attribute(:r_pgp_add_sph2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_cyl2, :class => "form-control form-control-custom r_pgp_add_cyl2 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_cyl2]", :value => opdrecord.read_attribute(:r_pgp_add_cyl2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_axis2, :class => "form-control form-control-custom r_pgp_add_axis2 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_axis2]", :value => opdrecord.read_attribute(:r_pgp_add_axis2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_vision2, :class => "form-control form-control-custom pgp2 r_pgp_add_vision2 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_add_vision2]", :value => opdrecord.read_attribute(:r_pgp_add_vision2) %>
                    </td>
                  </tr>
                  <tr>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      Near
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_sph2, :class => "form-control form-control-custom pgp2 r_pgp_near_sph2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_sph2]", :value => opdrecord.read_attribute(:r_pgp_near_sph2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_cyl2, :class => "form-control form-control-custom pgp2 r_pgp_near_cyl2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_cyl2]", :value => opdrecord.read_attribute(:r_pgp_near_cyl2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_axis2, :class => "form-control form-control-custom pgp2 r_pgp_near_axis2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_axis2]", :value => opdrecord.read_attribute(:r_pgp_near_axis2) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_vision2, :class => "form-control form-control-custom pgp2 r_pgp_near_vision2 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_near_vision2]", :value => opdrecord.read_attribute(:r_pgp_near_vision2) %>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div class="row mb5">
                <span class="col-md-4 col-sm-4">Type of Lens</span>
                <span><%= f.input :r_pgp_typeoflens2, wrapper_html: {:class => "col-md-6 col-sm-6"},collection: ['Single Vision - Distant','Single Vision - Near','Bifocal','Progressive','D Bifocal','KT Bifocal'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_typeoflens2 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_typeoflens2]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_typeoflens2)) %></span>
              </div>
              <div class="row mb5" style="margin-left: -187px;">
                <div class="col-md-3 col-sm-3 text-center">Comments: </div>
                <div class="col-md-9 col-sm-9">
                  <%= f.text_area :r_pgp_comments2, { class: 'form-control', style: 'width:95%;', required: false, name: 'opdrecord[r_pgp_comments2]', value: opdrecord.read_attribute(:r_pgp_comments2) } %>
                </div>
              </div>
            </div>
            <div class="row showview_full_r">
              <div class="col-md-8 col-sm-8 showview_toggle_pgp_r2">
                <table class="table table-bordered" style="margin-bottom:5px;font-size:11px;">
                  <thead>
                    <tr class="success">
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        Distant
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_sph2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_sph2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_cyl2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_cyl2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_axis2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_axis2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_vision2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_vision2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                    </tr>
                    <tr>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        Add
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_sph2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_sph2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_cyl2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_cyl2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_axis2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_axis2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_vision2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_vision2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                    </tr>
                    <tr>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        Near
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_sph2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_sph2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_cyl2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_cyl2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_axis2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_axis2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_vision2).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_vision2) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <span style="font-size:11px;"><b>Type of Lens :</b> <%= opdrecord.read_attribute(:'r_pgp_typeoflens2') %></span>
                <% if opdrecord.read_attribute(:r_pgp_comments2).present? %>
                  <br/>
                  <span class="r_pgp_comments2" style="font-size:11px;"><b>Comments:</b> <%= opdrecord.read_attribute(:r_pgp_comments2) %></span>
                <% end %>
              </div>
              <div class="col-md-4 col-sm-4 text-right" style="margin-left:-20px;">
                <button class="editViewActivate_r btn btn-link btn-xs editshow_hide_pgp2"></button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>

  <% if opdrecord.read_attribute(:r_pgp_distant_sph3).present? || opdrecord.read_attribute(:r_pgp_distant_cyl3).present? || opdrecord.read_attribute(:r_pgp_distant_axis3).present? || opdrecord.read_attribute(:r_pgp_near_sph3).present? || opdrecord.read_attribute(:r_pgp_near_cyl3).present? || opdrecord.read_attribute(:r_pgp_near_axis3).present? ||opdrecord.read_attribute(:r_pgp_add_sph3).present? ||opdrecord.read_attribute(:r_pgp_add_cyl3).present? ||opdrecord.read_attribute(:r_pgp_add_axis3).present? || opdrecord.read_attribute(:'r_pgp_typeoflens3').present? || opdrecord.read_attribute(:'r_pgp_comments3').present?|| opdrecord.read_attribute(:l_pgp_distant_sph3).present? || opdrecord.read_attribute(:l_pgp_distant_cyl3).present? || opdrecord.read_attribute(:l_pgp_distant_axis3).present? || opdrecord.read_attribute(:l_pgp_near_sph3).present? || opdrecord.read_attribute(:l_pgp_near_cyl3).present? || opdrecord.read_attribute(:l_pgp_near_axis3).present? ||opdrecord.read_attribute(:l_pgp_add_sph3).present? ||opdrecord.read_attribute(:l_pgp_add_cyl3).present? ||opdrecord.read_attribute(:l_pgp_add_axis3).present? || opdrecord.read_attribute(:'l_pgp_typeoflens3').present? || opdrecord.read_attribute(:'l_pgp_comments3').present? %>
    <div class="r-div-pgp3">
      <div class="hr-line-border mb5"></div>
      <div class="row r-pgp-row3">
        <div class="col-md-12 col-sm-12 r-pgp-column questionsforpgp3" id="r-questionsforpgp3">
          <div class="col-md-3 col-sm-3" style="padding: 0px">
            <% if opdrecord.read_attribute(:r_pgp_distant_sph3).present? || opdrecord.read_attribute(:r_pgp_distant_cyl3).present? || opdrecord.read_attribute(:r_pgp_distant_axis3).present? || opdrecord.read_attribute(:r_pgp_near_sph3).present? || opdrecord.read_attribute(:r_pgp_near_cyl3).present? || opdrecord.read_attribute(:r_pgp_near_axis3).present? ||opdrecord.read_attribute(:r_pgp_add_sph3).present? ||opdrecord.read_attribute(:r_pgp_add_cyl3).present? ||opdrecord.read_attribute(:r_pgp_add_axis3).present? || opdrecord.read_attribute(:'r_pgp_typeoflens3').present? || opdrecord.read_attribute(:'r_pgp_comments3').present? %>
              <div class="col-md-12 col-sm-12 badge badge-eye-template-labels data-filled"><strong>PGP 3&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
            <% else %>
              <div class="col-md-12 col-sm-12 badge badge-eye-template-labels data-empty"><strong>PGP 3&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
            <% end %>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:none;" title="Fill PGP" id="fill-pgp3"><a href="/opd_records/ophthalmology_notes/fill_refraction_data?flag=pgp3" data-remote="true"> <i class="fa fa-arrow-circle-right filldatabutton "> Fill</i></a></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Copy PGP to Glass Prescription" id="copy_pgp_to_gl_pres3"><i class="fa fa-arrow-circle-down copyfieldsbutton show_hide_pgp_comment2"> copy</i></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Remove PGP" id="remove_pgp3"><i class="fa fa-times removepgpfieldsbutton"> Remove</i></span>
          </div>
          <div class="col-md-9 col-sm-9 r-answersforpgp3 mainview_top_r">
            <div class="editview_toggle_r" style="display:none;">
              <table class="table table-bordered">
                <thead>
                  <tr class="success">
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      Distant
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_sph3, :class => "form-control form-control-custom pgp3 r_pgp_distant_sph3 calculate_sph_near_from_distant3 ref_field", :maxlength => 5, :required => false, :name => "opdrecord[r_pgp_distant_sph3]", :value => opdrecord.read_attribute(:r_pgp_distant_sph3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_cyl3, :class => "form-control form-control-custom pgp3 r_pgp_distant_cyl3 calculate_cyl_near_from_distant3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_cyl3]", :value => opdrecord.read_attribute(:r_pgp_distant_cyl3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_axis3, :class => "form-control form-control-custom pgp3 r_pgp_distant_axis3 calculate_axis_near_from_distant3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_axis3]", :value => opdrecord.read_attribute(:r_pgp_distant_axis3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_vision3, :class => "form-control form-control-custom pgp3 r_pgp_distant_vision3 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_distant_vision3]", :value => opdrecord.read_attribute(:r_pgp_distant_vision3) %>
                    </td>
                  </tr>
                  <tr>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      Add<sup class="suphash">#</sup>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_sph3, :class => "form-control form-control-custom pgp3 r_pgp_add_sph3 calculate_near_from_add3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_sph3]", :value => opdrecord.read_attribute(:r_pgp_add_sph3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_cyl3, :class => "form-control form-control-custom r_pgp_add_cyl3 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_cyl3]", :value => opdrecord.read_attribute(:r_pgp_add_cyl3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_axis3, :class => "form-control form-control-custom r_pgp_add_axis3 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_axis3]", :value => opdrecord.read_attribute(:r_pgp_add_axis3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_vision3, :class => "form-control form-control-custom pgp3 r_pgp_add_vision3 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_add_vision3]", :value => opdrecord.read_attribute(:r_pgp_add_vision3) %>
                    </td>
                  </tr>
                  <tr>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      Near
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_sph3, :class => "form-control form-control-custom pgp3 r_pgp_near_sph3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_sph3]", :value => opdrecord.read_attribute(:r_pgp_near_sph3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_cyl3, :class => "form-control form-control-custom pgp3 r_pgp_near_cyl3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_cyl3]", :value => opdrecord.read_attribute(:r_pgp_near_cyl3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_axis3, :class => "form-control form-control-custom pgp3 r_pgp_near_axis3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_axis3]", :value => opdrecord.read_attribute(:r_pgp_near_axis3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_vision3, :class => "form-control form-control-custom pgp3 r_pgp_near_vision3 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_near_vision3]", :value => opdrecord.read_attribute(:r_pgp_near_vision3) %>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div class="row mb5">
                <span class="col-md-4 col-sm-4">Type of Lens</span>
                <span><%= f.input :r_pgp_typeoflens3, wrapper_html: {:class => "col-md-6 col-sm-6"},collection: ['Single Vision - Distant','Single Vision - Near','Bifocal','Progressive','D Bifocal','KT Bifocal'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_typeoflens3 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_typeoflens3]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_typeoflens3)) %></span>
              </div>
              <div class="row mb5" style="margin-left: -187px;">
                <div class="col-md-3 col-sm-3 text-center">Comments: </div>
                <div class="col-md-9 col-sm-9">
                  <%= f.text_area :r_pgp_comments3, { class: 'form-control', style: 'width:95%;', required: false, name: 'opdrecord[r_pgp_comments3]', value: opdrecord.read_attribute(:r_pgp_comments3) } %>
                </div>
              </div>
            </div>
            <div class="row showview_full_r">
              <div class="col-md-8 col-sm-8 showview_toggle_pgp_r3">
                <table class="table table-bordered" style="margin-bottom:5px;font-size:11px;" id="r_tablepgp3">
                  <thead>
                    <tr class="success">
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        Distant
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_sph3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_sph3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_cyl3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_cyl3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_axis3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_axis3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_vision3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_vision3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                    </tr>
                    <tr>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        Add
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_sph3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_sph3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_cyl3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_cyl3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_axis3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_axis3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_vision3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_vision3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                    </tr>
                    <tr>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        Near
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_sph3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_sph3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_cyl3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_cyl3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_axis3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_axis3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_vision3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_vision3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <span style="font-size:11px;"><b>Type of Lens :</b><span id='r-lens3'><%= opdrecord.read_attribute(:'r_pgp_typeoflens3') %></span></span>
                <% if opdrecord.read_attribute(:r_pgp_comments3).present? %>
                  <br/>
                  <span class="r_pgp_comments3" style="font-size:11px;"><b>Comments:</b> <%= opdrecord.read_attribute(:r_pgp_comments3) %></span>
                <% end %>
              </div>
              <div class="col-md-4 col-sm-4 text-right" style="margin-left:-20px;">
                <button class="editViewActivate_r btn btn-link btn-xs editshow_hide_pgp3"></button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% else %>
    <div class="r-div-pgp3" style="display:none;">
      <div class="hr-line-border mb5"></div>
      <div class="row r-pgp-row3">
        <div class="col-md-12 col-sm-12 r-pgp-column questionsforpgp3" id="r-questionsforpgp3">
          <div class="col-md-3 col-sm-3" style="padding: 0px">
            <% if opdrecord.read_attribute(:r_pgp_distant_sph3).present? || opdrecord.read_attribute(:r_pgp_distant_cyl3).present? || opdrecord.read_attribute(:r_pgp_distant_axis3).present? || opdrecord.read_attribute(:r_pgp_near_sph3).present? || opdrecord.read_attribute(:r_pgp_near_cyl3).present? || opdrecord.read_attribute(:r_pgp_near_axis3).present? ||opdrecord.read_attribute(:r_pgp_add_sph3).present? ||opdrecord.read_attribute(:r_pgp_add_cyl3).present? ||opdrecord.read_attribute(:r_pgp_add_axis3).present? || opdrecord.read_attribute(:'r_pgp_typeoflens3').present?  || opdrecord.read_attribute(:'r_pgp_comments3').present? %>
              <div class="col-md-12 col-sm-12 badge badge-eye-template-labels data-filled"><strong>PGP 3&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
            <% else %>
              <div class="col-md-12 col-sm-12 badge badge-eye-template-labels data-empty"><strong>PGP 3&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
            <% end %>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:none;" title="Fill PGP" id="fill-pgp3"><a href="/opd_records/ophthalmology_notes/fill_refraction_data?flag=pgp3" data-remote="true"> <i class="fa fa-arrow-circle-right filldatabutton "> Fill</i></a></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Copy PGP to Glass Prescription" id="copy_pgp_to_gl_pres3"><i class="fa fa-arrow-circle-down copyfieldsbutton show_hide_pgp_comment2"> copy</i></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Remove PGP" id="remove_pgp3"><i class="fa fa-times removepgpfieldsbutton"> Remove</i></span>
          </div>
          <div class="col-md-9 col-sm-9 r-answersforpgp3 mainview_top_r">
            <div class="editview_toggle_r" style="display:none;">
              <table class="table table-bordered">
                <thead>
                  <tr class="success">
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
                    <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      Distant
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_sph3, :class => "form-control form-control-custom pgp3 r_pgp_distant_sph3 calculate_sph_near_from_distant3 ref_field", :maxlength => 5, :required => false, :name => "opdrecord[r_pgp_distant_sph3]", :value => opdrecord.read_attribute(:r_pgp_distant_sph3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_cyl3, :class => "form-control form-control-custom pgp3 r_pgp_distant_cyl3 calculate_cyl_near_from_distant3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_cyl3]", :value => opdrecord.read_attribute(:r_pgp_distant_cyl3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_axis3, :class => "form-control form-control-custom pgp3 r_pgp_distant_axis3 calculate_axis_near_from_distant3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_axis3]", :value => opdrecord.read_attribute(:r_pgp_distant_axis3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_distant_vision3, :class => "form-control form-control-custom pgp3 r_pgp_distant_vision3 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_distant_vision3]", :value => opdrecord.read_attribute(:r_pgp_distant_vision3) %>
                    </td>
                  </tr>
                  <tr>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      Add<sup class="suphash">#</sup>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_sph3, :class => "form-control form-control-custom pgp3 r_pgp_add_sph3 calculate_near_from_add3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_sph3]", :value => opdrecord.read_attribute(:r_pgp_add_sph3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_cyl3, :class => "form-control form-control-custom r_pgp_add_cyl3 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_cyl3]", :value => opdrecord.read_attribute(:r_pgp_add_cyl3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_axis3, :class => "form-control form-control-custom r_pgp_add_axis3 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_axis3]", :value => opdrecord.read_attribute(:r_pgp_add_axis3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_add_vision3, :class => "form-control form-control-custom pgp3 r_pgp_add_vision3 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_add_vision3]", :value => opdrecord.read_attribute(:r_pgp_add_vision3) %>
                    </td>
                  </tr>
                  <tr>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      Near
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_sph3, :class => "form-control form-control-custom pgp3 r_pgp_near_sph3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_sph3]", :value => opdrecord.read_attribute(:r_pgp_near_sph3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_cyl3, :class => "form-control form-control-custom pgp3 r_pgp_near_cyl3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_cyl3]", :value => opdrecord.read_attribute(:r_pgp_near_cyl3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_axis3, :class => "form-control form-control-custom pgp3 r_pgp_near_axis3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_axis3]", :value => opdrecord.read_attribute(:r_pgp_near_axis3) %>
                    </td>
                    <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                      <%= f.input_field :r_pgp_near_vision3, :class => "form-control form-control-custom pgp3 r_pgp_near_vision3 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_near_vision3]", :value => opdrecord.read_attribute(:r_pgp_near_vision3) %>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div class="row mb5">
                <span class="col-md-4 col-sm-4">Type of Lens</span>
                <span><%= f.input :r_pgp_typeoflens3, wrapper_html: {:class => "col-md-6 col-sm-6"},collection: ['Single Vision - Distant','Single Vision - Near','Bifocal','Progressive','D Bifocal','KT Bifocal'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_typeoflens3 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_typeoflens3]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_typeoflens3)) %></span>
              </div>
              <div class="row mb5" style="margin-left: -187px;">
                <div class="col-md-3 col-sm-3 text-center">Comments: </div>
                <div class="col-md-9 col-sm-9">
                  <%= f.text_area :r_pgp_comments3, { class: 'form-control', style: 'width:95%;', required: false, name: 'opdrecord[r_pgp_comments3]', value: opdrecord.read_attribute(:r_pgp_comments3) } %>
                </div>
              </div>
            </div>
            <div class="row showview_full_r">
              <div class="col-md-8 col-sm-8 showview_toggle_pgp_r3">
                <table class="table table-bordered" style="margin-bottom:5px;font-size:11px;">
                  <thead>
                    <tr class="success">
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
                      <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        Distant
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_sph3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_sph3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_cyl3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_cyl3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_axis3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_axis3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_distant_vision3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_distant_vision3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                    </tr>
                    <tr>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        Add
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_sph3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_sph3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_cyl3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_cyl3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_axis3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_axis3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_add_vision3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_add_vision3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                    </tr>
                    <tr>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        Near
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_sph3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_sph3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_cyl3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_cyl3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_axis3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_axis3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                      <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                        <% if opdrecord.read_attribute(:r_pgp_near_vision3).present? %>
                          <%= opdrecord.read_attribute(:r_pgp_near_vision3) %>
                        <% else %>
                          --
                        <% end %>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <span style="font-size:11px;"><b>Type of Lens :</b> <%= opdrecord.read_attribute(:'r_pgp_typeoflens3') %></span>
                <% if opdrecord.read_attribute(:r_pgp_comments3).present? %>
                  <br/>
                  <span class="r_pgp_comments3" style="font-size:11px;"><b>Comments:</b> <%= opdrecord.read_attribute(:r_pgp_comments3) %></span>
                <% end %>
              </div>
              <div class="col-md-4 col-sm-4 text-right" style="margin-left:-20px;">
                <button class="editViewActivate_r btn btn-link btn-xs editshow_hide_pgp3"></button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>

<% else %>
  <div class="row r-pgp-row">
    <div class="col-md-12 col-sm-12 r-pgp-column questionsforpgp" id="r-questionsforpgp">
      <div class="col-md-3 col-sm-3" style="padding: 0px">
        <div class="col-md-12 col-sm-12 badge badge-eye-template-labels"><strong>PGP 1&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
        <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Fill PGP" id="fill-pgp"><a href="/opd_records/ophthalmology_notes/fill_refraction_data?flag=pgp" data-remote="true"> <i class="fa fa-arrow-circle-right filldatabutton "> Fill</i></a></span>
        <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer" title="Copy PGP to Glass Prescription" id="copy_pgp_to_gl_pres"><i class="fa fa-arrow-circle-down copyfieldsbutton"> copy</i></span>
        <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer" title="Add PGP" id="add_pgp"><i class="fa fa-plus-circle addfieldsbutton"> PGP</i></span>
      </div>
      <div class="col-md-9 col-sm-9 r-answersforpgp">
        <table class="table table-bordered">
          <thead>
            <tr class="success">
              <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
              <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
              <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
              <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
              <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                Distant
              </td>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                <%= f.input_field :r_pgp_distant_sph, :class => "form-control form-control-custom pgp r_pgp_distant_sph calculate_sph_near_from_distant ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_sph]", :value => opdrecord.read_attribute(:r_pgp_distant_sph) %>
              </td>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                <%= f.input_field :r_pgp_distant_cyl, :class => "form-control form-control-custom pgp r_pgp_distant_cyl calculate_cyl_near_from_distant ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_cyl]", :value => opdrecord.read_attribute(:r_pgp_distant_cyl) %>
              </td>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                <%= f.input_field :r_pgp_distant_axis, :class => "form-control form-control-custom pgp r_pgp_distant_axis calculate_axis_near_from_distant ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_axis]", :value => opdrecord.read_attribute(:r_pgp_distant_axis) %>
              </td>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                <%= f.input_field :r_pgp_distant_vision, :class => "form-control form-control-custom pgp r_pgp_distant_vision ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_distant_vision]", :value => opdrecord.read_attribute(:r_pgp_distant_vision) %>
              </td>
            </tr>
            <tr>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                Add<sup class="suphash">#</sup>
              </td>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                <%= f.input_field :r_pgp_add_sph, :class => "form-control form-control-custom pgp r_pgp_add_sph calculate_near_from_add ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_sph]", :value => opdrecord.read_attribute(:r_pgp_add_sph) %>
              </td>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                <%= f.input_field :r_pgp_add_cyl, :class => "form-control form-control-custom r_pgp_add_cyl ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_cyl]", :value => opdrecord.read_attribute(:r_pgp_add_cyl) %>
              </td>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                <%= f.input_field :r_pgp_add_axis, :class => "form-control form-control-custom r_pgp_add_axis ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_axis]", :value => opdrecord.read_attribute(:r_pgp_add_axis) %>
              </td>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                <%= f.input_field :r_pgp_add_vision, :class => "form-control form-control-custom pgp r_pgp_add_vision ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_add_vision]", :value => opdrecord.read_attribute(:r_pgp_add_vision) %>
              </td>
            </tr>
            <tr>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                Near
              </td>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                <%= f.input_field :r_pgp_near_sph, :class => "form-control form-control-custom pgp r_pgp_near_sph ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_sph]", :value => opdrecord.read_attribute(:r_pgp_near_sph) %>
              </td>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                <%= f.input_field :r_pgp_near_cyl, :class => "form-control form-control-custom pgp r_pgp_near_cyl ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_cyl]", :value => opdrecord.read_attribute(:r_pgp_near_cyl) %>
              </td>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                <%= f.input_field :r_pgp_near_axis, :class => "form-control form-control-custom pgp r_pgp_near_axis ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_axis]", :value => opdrecord.read_attribute(:r_pgp_near_axis) %>
              </td>
              <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                <%= f.input_field :r_pgp_near_vision, :class => "form-control form-control-custom pgp r_pgp_near_vision ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_near_vision]", :value => opdrecord.read_attribute(:r_pgp_near_vision) %>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="row mb5">
        <div class="col-md-6 col-xs-6">
          <span class="col-md-6 col-sm-6">Type of Lens</span>
          <span><%= f.input :r_pgp_typeoflens, wrapper_html: {:class => "col-md-6 col-sm-6"},collection: ['Single Vision - Distant','Single Vision - Near','Bifocal','Progressive','D Bifocal','KT Bifocal'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_typeoflens form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_typeoflens]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_typeoflens)) %></span>
        </div>
        <% if country_id == "KH_039" %>
          <div class="col-md-6 col-xs-6">
            <span class="col-md-4 col-xs-4">Duration</span>
            <span><%= f.input :r_pgp_duration, wrapper_html: {:class => "col-md-4 col-xs-4"},collection: (1..15), :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_duration form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_duration]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_duration)) %></span>
            <span><%= f.input :r_pgp_duration_option, wrapper_html: {:class => "col-md-4 col-xs-4"},collection: ['Year','Month','Week','Day'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_duration_option form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_duration_option]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_duration_option)) %></span>
          </div>
        <% end %>
      </div>
      <% if country_id == "KH_039" %>
        <div class="row mb5">
          <div class="col-md-6 col-xs-6">
            <span class="col-md-6 col-xs-6">Condition of Frame</span>
            <span><%= f.input :r_pgp_frame_condition, wrapper_html: {:class => "col-md-6 col-xs-6"},collection: ["Good", "Bad", "Scratched"], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_frame_condition form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_frame_condition]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_frame_condition)) %></span>
          </div>
          <div class="col-md-6 col-xs-6">
            <span class="col-md-6 col-xs-6">Condition of Lens</span>
            <span><%= f.input :r_pgp_lens_condition, wrapper_html: {:class => "col-md-6 col-xs-6"},collection: ["Good", "Bad", "Scratched"], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_lens_condition form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_lens_condition]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_lens_condition)) %></span>
          </div>
        </div>
      <% end %>
      <div class="row mb5">
        <div class="col-md-3 col-sm-3 text-center">Comments: </div>
        <div class="col-md-9 col-sm-9">
          <%= f.text_area :r_pgp_comments, { class: 'form-control r_pgp_comments', style: 'width:95%;', required: false, name: 'opdrecord[r_pgp_comments]', value: opdrecord.read_attribute(:r_pgp_comments) } %>
        </div>
      </div>
    </div>
  </div>

  <% if opdrecord.read_attribute(:r_pgp_distant_sph2).present? || opdrecord.read_attribute(:r_pgp_distant_cyl2).present? || opdrecord.read_attribute(:r_pgp_distant_axis2).present? || opdrecord.read_attribute(:r_pgp_near_sph2).present? || opdrecord.read_attribute(:r_pgp_near_cyl2).present? || opdrecord.read_attribute(:r_pgp_near_axis2).present? ||opdrecord.read_attribute(:r_pgp_add_sph2).present? ||opdrecord.read_attribute(:r_pgp_add_cyl2).present? ||opdrecord.read_attribute(:r_pgp_add_axis2).present? || opdrecord.read_attribute(:'r_pgp_typeoflens2').present? || opdrecord.read_attribute(:'r_pgp_comments2').present? || opdrecord.read_attribute(:l_pgp_distant_sph2).present? || opdrecord.read_attribute(:l_pgp_distant_cyl2).present? || opdrecord.read_attribute(:l_pgp_distant_axis2).present? || opdrecord.read_attribute(:l_pgp_near_sph2).present? || opdrecord.read_attribute(:l_pgp_near_cyl2).present? || opdrecord.read_attribute(:l_pgp_near_axis2).present? ||opdrecord.read_attribute(:l_pgp_add_sph2).present? ||opdrecord.read_attribute(:l_pgp_add_cyl2).present? ||opdrecord.read_attribute(:l_pgp_add_axis2).present? || opdrecord.read_attribute(:'l_pgp_typeoflens2').present? || opdrecord.read_attribute(:'l_pgp_comments2').present? %>
    <div class="r-div-pgp2">
      <div class="hr-line-border mb5"></div>
      <div class="row r-pgp-row2">
        <div class="col-md-12 col-sm-12 r-pgp-column questionsforpgp2" id="r-questionsforpgp2">
          <div class="col-md-3 col-sm-3" style="padding: 0px">
            <div class="col-md-12 col-sm-12 badge badge-eye-template-labels"><strong>PGP 2&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Fill PGP" id="fill-pgp2"><a href="/opd_records/ophthalmology_notes/fill_refraction_data?flag=pgp2" data-remote="true"> <i class="fa fa-arrow-circle-right filldatabutton"> Fill</i></a></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer" title="Copy PGP to Glass Prescription" id="copy_pgp_to_gl_pres2"><i class="fa fa-arrow-circle-down copyfieldsbutton"> copy</i></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer" title="Add PGP" id="add_pgp2"><i class="fa fa-plus-circle addfieldsbutton"> PGP</i></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer" title="Remove PGP" id="remove_pgp2"><i class="fa fa-times removepgpfieldsbutton"> Remove</i></span>
          </div>
          <div class="col-md-9 col-sm-9 r-answersforpgp2">
            <table class="table table-bordered">
              <thead>
                <tr class="success">
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Distant
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_sph2, :class => "form-control form-control-custom pgp2 r_pgp_distant_sph2 calculate_sph_near_from_distant2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_sph2]", :value => opdrecord.read_attribute(:r_pgp_distant_sph2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_cyl2, :class => "form-control form-control-custom pgp2 r_pgp_distant_cyl2 calculate_cyl_near_from_distant2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_cyl2]", :value => opdrecord.read_attribute(:r_pgp_distant_cyl2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_axis2, :class => "form-control form-control-custom pgp2 r_pgp_distant_axis2 calculate_axis_near_from_distant2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_axis2]", :value => opdrecord.read_attribute(:r_pgp_distant_axis2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_vision2, :class => "form-control form-control-custom pgp2 r_pgp_distant_vision2 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_distant_vision2]", :value => opdrecord.read_attribute(:r_pgp_distant_vision2) %>
                  </td>
                </tr>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Add<sup class="suphash">#</sup>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_sph2, :class => "form-control form-control-custom pgp2 r_pgp_add_sph2 calculate_near_from_add2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_sph2]", :value => opdrecord.read_attribute(:r_pgp_add_sph2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_cyl2, :class => "form-control form-control-custom r_pgp_add_cyl2 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_cyl2]", :value => opdrecord.read_attribute(:r_pgp_add_cyl2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_axis2, :class => "form-control form-control-custom r_pgp_add_axis2 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_axis2]", :value => opdrecord.read_attribute(:r_pgp_add_axis2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_vision2, :class => "form-control form-control-custom pgp2 r_pgp_add_vision2 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_add_vision2]", :value => opdrecord.read_attribute(:r_pgp_add_vision2) %>
                  </td>
                </tr>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Near
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_sph2, :class => "form-control form-control-custom pgp2 r_pgp_near_sph2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_sph2]", :value => opdrecord.read_attribute(:r_pgp_near_sph2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_cyl2, :class => "form-control form-control-custom pgp2 r_pgp_near_cyl2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_cyl2]", :value => opdrecord.read_attribute(:r_pgp_near_cyl2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_axis2, :class => "form-control form-control-custom pgp2 r_pgp_near_axis2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_axis2]", :value => opdrecord.read_attribute(:r_pgp_near_axis2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_vision2, :class => "form-control form-control-custom pgp2 r_pgp_near_vision2 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_near_vision2]", :value => opdrecord.read_attribute(:r_pgp_near_vision2) %>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="row mb5">
            <div class="col-md-6 col-xs-6">
              <span class="col-md-6 col-sm-6">Type of Lens</span>
              <span><%= f.input :r_pgp_typeoflens2, wrapper_html: {:class => "col-md-6 col-sm-6"},collection: ['Single Vision - Distant','Single Vision - Near','Bifocal','Progressive','D Bifocal','KT Bifocal'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_typeoflens2 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_typeoflens2]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_typeoflens2)) %></span>
            </div>
            <% if country_id == "KH_039" %>
              <div class="col-md-6 col-xs-6">
                <span class="col-md-4 col-xs-4">Duration</span>
                <span><%= f.input :r_pgp_duration2, wrapper_html: {:class => "col-md-4 col-xs-4"},collection: (1..15), :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_duration2 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_duration2]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_duration2)) %></span>
                <span><%= f.input :r_pgp_duration_option2, wrapper_html: {:class => "col-md-4 col-xs-4"},collection: ['Year','Month','Week','Day'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_duration_option2 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_duration_option2]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_duration_option2)) %></span>
              </div>
            <% end %>
          </div>
          <% if country_id == "KH_039" %>
            <div class="row mb5">
              <div class="col-md-6 col-xs-6">
                <span class="col-md-6 col-xs-6">Condition of Frame</span>
                <span><%= f.input :r_pgp_frame_condition2, wrapper_html: {:class => "col-md-6 col-xs-6"},collection: ["Good", "Bad", "Scratched"], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_frame_condition2 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_frame_condition2]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_frame_condition2)) %></span>
              </div>
              <div class="col-md-6 col-xs-6">
                <span class="col-md-6 col-xs-6">Condition of Lens</span>
                <span><%= f.input :r_pgp_lens_condition2, wrapper_html: {:class => "col-md-6 col-xs-6"},collection: ["Good", "Bad", "Scratched"], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_lens_condition2 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_lens_condition2]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_lens_condition2)) %></span>
              </div>
            </div>
          <% end %>
          <div class="row mb5">
            <div class="col-md-3 col-sm-3 text-center">Comments: </div>
            <div class="col-md-9 col-sm-9">
              <%= f.text_area :r_pgp_comments2, { class: 'form-control', style: 'width:95%;', required: false, name: 'opdrecord[r_pgp_comments2]', value: opdrecord.read_attribute(:r_pgp_comments2) } %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% else %>
    <div class="r-div-pgp2" style="display:none;">
      <div class="hr-line-border mb5"></div>
      <div class="row r-pgp-row2">
        <div class="col-md-12 col-sm-12 r-pgp-column questionsforpgp2" id="r-questionsforpgp2">
          <div class="col-md-3 col-sm-3" style="padding: 0px">
            <div class="col-md-12 col-sm-12 badge badge-eye-template-labels"><strong>PGP 2&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Fill PGP" id="fill-pgp2"><a href="/opd_records/ophthalmology_notes/fill_refraction_data?flag=pgp2" data-remote="true"> <i class="fa fa-arrow-circle-right filldatabutton"> Fill</i></a></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer" title="Copy PGP to Glass Prescription" id="copy_pgp_to_gl_pres2"><i class="fa fa-arrow-circle-down copyfieldsbutton"> copy</i></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer" title="Add PGP" id="add_pgp2"><i class="fa fa-plus-circle addfieldsbutton"> PGP</i></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer" title="Remove PGP" id="remove_pgp2"><i class="fa fa-times removepgpfieldsbutton"> Remove</i></span>
          </div>
          <div class="col-md-9 col-sm-9 r-answersforpgp2">
            <table class="table table-bordered">
              <thead>
                <tr class="success">
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Distant
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_sph2, :class => "form-control form-control-custom pgp2 r_pgp_distant_sph2 calculate_sph_near_from_distant2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_sph2]", :value => opdrecord.read_attribute(:r_pgp_distant_sph2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_cyl2, :class => "form-control form-control-custom pgp2 r_pgp_distant_cyl2 calculate_cyl_near_from_distant2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_cyl2]", :value => opdrecord.read_attribute(:r_pgp_distant_cyl2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_axis2, :class => "form-control form-control-custom pgp2 r_pgp_distant_axis2 calculate_axis_near_from_distant2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_axis2]", :value => opdrecord.read_attribute(:r_pgp_distant_axis2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_vision2, :class => "form-control form-control-custom pgp2 r_pgp_distant_vision2 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_distant_vision2]", :value => opdrecord.read_attribute(:r_pgp_distant_vision2) %>
                  </td>
                </tr>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Add<sup class="suphash">#</sup>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_sph2, :class => "form-control form-control-custom pgp2 r_pgp_add_sph2 calculate_near_from_add2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_sph2]", :value => opdrecord.read_attribute(:r_pgp_add_sph2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_cyl2, :class => "form-control form-control-custom r_pgp_add_cyl2 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_cyl2]", :value => opdrecord.read_attribute(:r_pgp_add_cyl2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_axis2, :class => "form-control form-control-custom r_pgp_add_axis2 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_axis2]", :value => opdrecord.read_attribute(:r_pgp_add_axis2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_vision2, :class => "form-control form-control-custom pgp2 r_pgp_add_vision2 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_add_vision2]", :value => opdrecord.read_attribute(:r_pgp_add_vision2) %>
                  </td>
                </tr>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Near
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_sph2, :class => "form-control form-control-custom pgp2 r_pgp_near_sph2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_sph2]", :value => opdrecord.read_attribute(:r_pgp_near_sph2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_cyl2, :class => "form-control form-control-custom pgp2 r_pgp_near_cyl2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_cyl2]", :value => opdrecord.read_attribute(:r_pgp_near_cyl2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_axis2, :class => "form-control form-control-custom pgp2 r_pgp_near_axis2 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_axis2]", :value => opdrecord.read_attribute(:r_pgp_near_axis2) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_vision2, :class => "form-control form-control-custom pgp2 r_pgp_near_vision2 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_near_vision2]", :value => opdrecord.read_attribute(:r_pgp_near_vision2) %>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="row mb5">
            <div class="col-md-6 col-xs-6">
              <span class="col-md-6 col-sm-6">Type of Lens</span>
              <span><%= f.input :r_pgp_typeoflens2, wrapper_html: {:class => "col-md-6 col-sm-6"},collection: ['Single Vision - Distant','Single Vision - Near','Bifocal','Progressive','D Bifocal','KT Bifocal'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_typeoflens2 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_typeoflens2]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_typeoflens2)) %></span>
            </div>
            <% if country_id == "KH_039" %>
              <div class="col-md-6 col-xs-6">
                <span class="col-md-4 col-xs-4">Duration</span>
                <span><%= f.input :r_pgp_duration2, wrapper_html: {:class => "col-md-4 col-xs-4"},collection: (1..15), :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_duration2 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_duration2]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_duration2)) %></span>
                <span><%= f.input :r_pgp_duration_option2, wrapper_html: {:class => "col-md-4 col-xs-4"},collection: ['Year','Month','Week','Day'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_duration_option2 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_duration_option2]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_duration_option2)) %></span>
              </div>
            <% end %>
          </div>
          <% if country_id == "KH_039" %>
            <div class="row mb5">
              <div class="col-md-6 col-xs-6">
                <span class="col-md-6 col-xs-6">Condition of Frame</span>
                <span><%= f.input :r_pgp_frame_condition2, wrapper_html: {:class => "col-md-6 col-xs-6"},collection: ["Good", "Bad", "Scratched"], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_frame_condition2 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_frame_condition2]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_frame_condition2)) %></span>
              </div>
              <div class="col-md-6 col-xs-6">
                <span class="col-md-6 col-xs-6">Condition of Lens</span>
                <span><%= f.input :r_pgp_lens_condition2, wrapper_html: {:class => "col-md-6 col-xs-6"},collection: ["Good", "Bad", "Scratched"], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_lens_condition2 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_lens_condition2]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_lens_condition2)) %></span>
              </div>
            </div>
          <% end %>
          <div class="row mb5">
            <div class="col-md-3 col-sm-3 text-center">Comments: </div>
            <div class="col-md-9 col-sm-9">
              <%= f.text_area :r_pgp_comments2, { class: 'form-control', style: 'width:95%;', required: false, name: 'opdrecord[r_pgp_comments2]', value: opdrecord.read_attribute(:r_pgp_comments2) } %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>

  <% if opdrecord.read_attribute(:r_pgp_distant_sph3).present? || opdrecord.read_attribute(:r_pgp_distant_cyl3).present? || opdrecord.read_attribute(:r_pgp_distant_axis3).present? || opdrecord.read_attribute(:r_pgp_near_sph3).present? || opdrecord.read_attribute(:r_pgp_near_cyl3).present? || opdrecord.read_attribute(:r_pgp_near_axis3).present? ||opdrecord.read_attribute(:r_pgp_add_sph3).present? ||opdrecord.read_attribute(:r_pgp_add_cyl3).present? ||opdrecord.read_attribute(:r_pgp_add_axis3).present? || opdrecord.read_attribute(:'r_pgp_typeoflens3').present? || opdrecord.read_attribute(:'r_pgp_comments3').present? || opdrecord.read_attribute(:l_pgp_distant_sph3).present? || opdrecord.read_attribute(:l_pgp_distant_cyl3).present? || opdrecord.read_attribute(:l_pgp_distant_axis3).present? || opdrecord.read_attribute(:l_pgp_near_sph3).present? || opdrecord.read_attribute(:l_pgp_near_cyl3).present? || opdrecord.read_attribute(:l_pgp_near_axis3).present? ||opdrecord.read_attribute(:l_pgp_add_sph3).present? ||opdrecord.read_attribute(:l_pgp_add_cyl3).present? ||opdrecord.read_attribute(:l_pgp_add_axis3).present? || opdrecord.read_attribute(:'l_pgp_typeoflens3').present? || opdrecord.read_attribute(:'l_pgp_comments3').present? %>
    <div class="r-div-pgp3">
      <div class="hr-line-border mb5"></div>
      <div class="row r-pgp-row3">
        <div class="col-md-12 col-sm-12 r-pgp-column questionsforpgp3" id="r-questionsforpgp3">
          <div class="col-md-3 col-sm-3" style="padding: 0px">
            <div class="col-md-12 col-sm-12 badge badge-eye-template-labels"><strong>PGP 3&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Fill PGP" id="fill-pgp3"><a href="/opd_records/ophthalmology_notes/fill_refraction_data?flag=pgp3" data-remote="true"> <i class="fa fa-arrow-circle-right filldatabutton"> Fill</i></a></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer" title="Copy PGP to Glass Prescription" id="copy_pgp_to_gl_pres3"><i class="fa fa-arrow-circle-down copyfieldsbutton"> copy</i></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer" title="Remove PGP" id="remove_pgp3"><i class="fa fa-times removepgpfieldsbutton"> Remove</i></span>
          </div>
          <div class="col-md-9 col-sm-9 r-answersforpgp3">
            <table class="table table-bordered">
              <thead>
                <tr class="success">
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Distant
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_sph3, :class => "form-control form-control-custom pgp3 r_pgp_distant_sph3 calculate_sph_near_from_distant3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_sph3]", :value => opdrecord.read_attribute(:r_pgp_distant_sph3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_cyl3, :class => "form-control form-control-custom pgp3 r_pgp_distant_cyl3 calculate_cyl_near_from_distant3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_cyl3]", :value => opdrecord.read_attribute(:r_pgp_distant_cyl3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_axis3, :class => "form-control form-control-custom pgp3 r_pgp_distant_axis3 calculate_axis_near_from_distant3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_axis3]", :value => opdrecord.read_attribute(:r_pgp_distant_axis3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_vision3, :class => "form-control form-control-custom pgp3 r_pgp_distant_vision3 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_distant_vision3]", :value => opdrecord.read_attribute(:r_pgp_distant_vision3) %>
                  </td>
                </tr>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Add<sup class="suphash">#</sup>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_sph3, :class => "form-control form-control-custom pgp3 r_pgp_add_sph3 calculate_near_from_add3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_sph3]", :value => opdrecord.read_attribute(:r_pgp_add_sph3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_cyl3, :class => "form-control form-control-custom r_pgp_add_cyl3 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_cyl3]", :value => opdrecord.read_attribute(:r_pgp_add_cyl3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_axis3, :class => "form-control form-control-custom r_pgp_add_axis3 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_axis3]", :value => opdrecord.read_attribute(:r_pgp_add_axis3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_vision3, :class => "form-control form-control-custom pgp3 r_pgp_add_vision3 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_add_vision3]", :value => opdrecord.read_attribute(:r_pgp_add_vision3) %>
                  </td>
                </tr>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Near
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_sph3, :class => "form-control form-control-custom pgp3 r_pgp_near_sph3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_sph3]", :value => opdrecord.read_attribute(:r_pgp_near_sph3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_cyl3, :class => "form-control form-control-custom pgp3 r_pgp_near_cyl3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_cyl3]", :value => opdrecord.read_attribute(:r_pgp_near_cyl3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_axis3, :class => "form-control form-control-custom pgp3 r_pgp_near_axis3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_axis3]", :value => opdrecord.read_attribute(:r_pgp_near_axis3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_vision3, :class => "form-control form-control-custom pgp3 r_pgp_near_vision3 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_near_vision3]", :value => opdrecord.read_attribute(:r_pgp_near_vision3) %>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="row mb5">
            <div class="col-md-6 col-xs-6">
              <span class="col-md-6 col-sm-6">Type of Lens</span>
              <span><%= f.input :r_pgp_typeoflens3, wrapper_html: {:class => "col-md-6 col-sm-6"},collection: ['Single Vision - Distant','Single Vision - Near','Bifocal','Progressive','D Bifocal','KT Bifocal'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_typeoflens3 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_typeoflens3]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_typeoflens3)) %></span>
            </div>
            <% if country_id == "KH_039" %>
              <div class="col-md-6 col-xs-6">
                <span class="col-md-4 col-xs-4">Duration</span>
                <span><%= f.input :r_pgp_duration3, wrapper_html: {:class => "col-md-4 col-xs-4"},collection: (1..15), :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_duration3 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_duration3]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_duration3)) %></span>
                <span><%= f.input :r_pgp_duration_option3, wrapper_html: {:class => "col-md-4 col-xs-4"},collection: ['Year','Month','Week','Day'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_duration_option3 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_duration_option3]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_duration_option3)) %></span>
              </div>
            <% end %>
          </div>
          <% if country_id == "KH_039" %>
            <div class="row mb5">
              <div class="col-md-6 col-xs-6">
                <span class="col-md-6 col-xs-6">Condition of Frame</span>
                <span><%= f.input :r_pgp_frame_condition3, wrapper_html: {:class => "col-md-6 col-xs-6"},collection: ["Good", "Bad", "Scratched"], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_frame_condition3 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_frame_condition3]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_frame_condition3)) %></span>
              </div>
              <div class="col-md-6 col-xs-6">
                <span class="col-md-6 col-xs-6">Condition of Lens</span>
                <span><%= f.input :r_pgp_lens_condition3, wrapper_html: {:class => "col-md-6 col-xs-6"},collection: ["Good", "Bad", "Scratched"], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_lens_condition3 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_lens_condition3]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_lens_condition3)) %></span>
              </div>
            </div>
          <% end %>
          <div class="row mb5">
            <div class="col-md-3 col-sm-3 text-center">Comments: </div>
            <div class="col-md-9 col-sm-9">
              <%= f.text_area :r_pgp_comments3, { class: 'form-control', style: 'width:95%;', required: false, name: 'opdrecord[r_pgp_comments3]', value: opdrecord.read_attribute(:r_pgp_comments3) } %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% else %>
    <div class="r-div-pgp3" style="display:none;">
      <div class="hr-line-border mb5"></div>
      <div class="row r-pgp-row3">
        <div class="col-md-12 col-sm-12 r-pgp-column questionsforpgp3" id="r-questionsforpgp3">
          <div class="col-md-3 col-sm-3" style="padding: 0px">
            <div class="col-md-12 col-sm-12 badge badge-eye-template-labels"><strong>PGP 3&nbsp;&nbsp;</strong><i class="fa fa-arrow-right rcopybutton" title="Copy Left to Right" aria-hidden="true"></i></div>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer; display:block;" title="Fill PGP" id="fill-pgp3"><a href="/opd_records/ophthalmology_notes/fill_refraction_data?flag=pgp3" data-remote="true"> <i class="fa fa-arrow-circle-right filldatabutton"> Fill</i></a></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer" title="Copy PGP to Glass Prescription" id="copy_pgp_to_gl_pres3"><i class="fa fa-arrow-circle-down copyfieldsbutton"> copy</i></span>
            <span class="row col-md-12 col-sm-12" style="margin-top: 5px; cursor: pointer" title="Remove PGP" id="remove_pgp3"><i class="fa fa-times removepgpfieldsbutton"> Remove</i></span>
          </div>
          <div class="col-md-9 col-sm-9 r-answersforpgp3">
            <table class="table table-bordered">
              <thead>
                <tr class="success">
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;"></th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Sph</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Cyl</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Axis</th>
                  <th width="20%" style="padding-top:0px;padding-bottom:0px;">Vision</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Distant
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_sph3, :class => "form-control form-control-custom pgp3 r_pgp_distant_sph3 calculate_sph_near_from_distant3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_sph3]", :value => opdrecord.read_attribute(:r_pgp_distant_sph3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_cyl3, :class => "form-control form-control-custom pgp3 r_pgp_distant_cyl3 calculate_cyl_near_from_distant3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_cyl3]", :value => opdrecord.read_attribute(:r_pgp_distant_cyl3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_axis3, :class => "form-control form-control-custom pgp3 r_pgp_distant_axis3 calculate_axis_near_from_distant3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_distant_axis3]", :value => opdrecord.read_attribute(:r_pgp_distant_axis3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_distant_vision3, :class => "form-control form-control-custom pgp3 r_pgp_distant_vision3 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_distant_vision3]", :value => opdrecord.read_attribute(:r_pgp_distant_vision3) %>
                  </td>
                </tr>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Add<sup class="suphash">#</sup>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_sph3, :class => "form-control form-control-custom pgp3 r_pgp_add_sph3 calculate_near_from_add3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_sph3]", :value => opdrecord.read_attribute(:r_pgp_add_sph3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_cyl3, :class => "form-control form-control-custom r_pgp_add_cyl3 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_cyl3]", :value => opdrecord.read_attribute(:r_pgp_add_cyl3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_axis3, :class => "form-control form-control-custom r_pgp_add_axis3 ref_field",:readonly=> true, :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_add_axis3]", :value => opdrecord.read_attribute(:r_pgp_add_axis3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_add_vision3, :class => "form-control form-control-custom pgp3 r_pgp_add_vision3 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_add_vision3]", :value => opdrecord.read_attribute(:r_pgp_add_vision3) %>
                  </td>
                </tr>
                <tr>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    Near
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_sph3, :class => "form-control form-control-custom pgp3 r_pgp_near_sph3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_sph3]", :value => opdrecord.read_attribute(:r_pgp_near_sph3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_cyl3, :class => "form-control form-control-custom pgp3 r_pgp_near_cyl3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_cyl3]", :value => opdrecord.read_attribute(:r_pgp_near_cyl3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_axis3, :class => "form-control form-control-custom pgp3 r_pgp_near_axis3 ref_field", :maxlength => 6, :required => false, :name => "opdrecord[r_pgp_near_axis3]", :value => opdrecord.read_attribute(:r_pgp_near_axis3) %>
                  </td>
                  <td style="padding-left:1px;padding-top:1px;padding-bottom:1px;padding:0px;">
                    <%= f.input_field :r_pgp_near_vision3, :class => "form-control form-control-custom pgp3 r_pgp_near_vision3 ref_field", :maxlength => 12, :required => false, :name => "opdrecord[r_pgp_near_vision3]", :value => opdrecord.read_attribute(:r_pgp_near_vision3) %>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="row mb5">
            <div class="col-md-6 col-xs-6">
              <span class="col-md-6 col-sm-6">Type of Lens</span>
              <span><%= f.input :r_pgp_typeoflens3, wrapper_html: {:class => "col-md-6 col-sm-6"},collection: ['Single Vision - Distant','Single Vision - Near','Bifocal','Progressive','D Bifocal','KT Bifocal'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_typeoflens3 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_typeoflens3]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_typeoflens3)) %></span>
            </div>
            <% if country_id == "KH_039" %>
              <div class="col-md-6 col-xs-6">
                <span class="col-md-4 col-xs-4">Duration</span>
                <span><%= f.input :r_pgp_duration3, wrapper_html: {:class => "col-md-4 col-xs-4"},collection: (1..15), :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_duration3 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_duration3]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_duration3)) %></span>
                <span><%= f.input :r_pgp_duration_option3, wrapper_html: {:class => "col-md-4 col-xs-4"},collection: ['Year','Month','Week','Day'], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_duration_option3 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_duration_option3]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_duration_option3)) %></span>
              </div>
            <% end %>
          </div>
          <% if country_id == "KH_039" %>
            <div class="row mb5">
              <div class="col-md-6 col-xs-6">
                <span class="col-md-6 col-xs-6">Condition of Frame</span>
                <span><%= f.input :r_pgp_frame_condition3, wrapper_html: {:class => "col-md-6 col-xs-6"},collection: ["Good", "Bad", "Scratched"], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_frame_condition3 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_frame_condition3]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_frame_condition3)) %></span>
              </div>
              <div class="col-md-6 col-xs-6">
                <span class="col-md-6 col-xs-6">Condition of Lens</span>
                <span><%= f.input :r_pgp_lens_condition3, wrapper_html: {:class => "col-md-6 col-xs-6"},collection: ["Good", "Bad", "Scratched"], :include_blank => 'Select', :label => false, :required => false, :class => 'btn btn-xs btn-white r_pgp_lens_condition3 form-control-custom form-control', :input_html => {:name => "opdrecord[r_pgp_lens_condition3]", :class => "form-control form-control-custom",:style=>"width: 100%;" }, :checked => opdrecord.checkboxes_checked(opdrecord.read_attribute(:r_pgp_lens_condition3)) %></span>
              </div>
            </div>
          <% end %>
          <div class="row mb5">
            <div class="col-md-3 col-sm-3 text-center">Comments: </div>
            <div class="col-md-9 col-sm-9">
              <%= f.text_area :r_pgp_comments3, { class: 'form-control', style: 'width:95%;', required: false, name: 'opdrecord[r_pgp_comments3]', value: opdrecord.read_attribute(:r_pgp_comments3) } %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>
<% end %>

<script>

  <% if @templatetype == 'ar_nct' %>
    $('#copy_pgp_to_gl_pres').hide()
    $('#copy_pgp_to_gl_pres2').hide()
    $('#copy_pgp_to_gl_pres3').hide()
  <% end %>

  function hide_add_pgp1(){
    if($('.r-div-pgp2').css('display') == 'block'){
      $('#add_pgp').css("display","none");
    }
  }
  hide_add_pgp1()

  function hide_add_pgp2(){
    if($('.r-div-pgp3').css('display') == 'block'){
      $('#add_pgp2').css("display","none");
    }
  }
  hide_add_pgp2()

  $('#add_pgp').on('click', function(e) {
    e.preventDefault();
    $('.r-div-pgp2').show();
    $('#add_pgp').css("display","none");
  });

  $('#add_pgp2').on('click', function(e) {
    e.preventDefault();
    $('.r-div-pgp3').show();
    $('#add_pgp2').css("display","none");
  });

  $('#remove_pgp3').on('click', function(e) {
    e.preventDefault();
    $('#r_tablepgp3').find('td').text('--')
    $('#r-lens3').text('')
    $('#r_tablepgp3').find('tr:eq(1) > td:eq(0)').text('Distant')
    $('#r_tablepgp3').find('tr:eq(2) > td:eq(0)').text('Add')
    $('#r_tablepgp3').find('tr:eq(3) > td:eq(0)').text('Near')
    $('.r-answersforpgp3').find('input').val('')
    $('.r-answersforpgp3').find('#opdrecord_r_pgp_typeoflens3').val('')
    $('#opdrecord_r_pgp_comments3').val('')
    $('.r_pgp_comments3').text('')
    $('.r-div-pgp3').hide();
    $('#add_pgp2').css("display","block");
  });

  $('#remove_pgp2').on('click', function(e) {
    e.preventDefault();
    $('#r_tablepgp2').find('td').text('--')
    $('#r-lens2').text('')
    $('#r_tablepgp2').find('tr:eq(1) > td:eq(0)').text('Distant')
    $('#r_tablepgp2').find('tr:eq(2) > td:eq(0)').text('Add')
    $('#r_tablepgp2').find('tr:eq(3) > td:eq(0)').text('Near')
    $('.r-answersforpgp2').find('input').val('')
    $('.r-answersforpgp2').find('#opdrecord_r_pgp_typeoflens2').val('')
    $('#opdrecord_r_pgp_comments2').val('')
    $('.r_pgp_comments2').text('')
    $('.r-div-pgp2').hide();
    $('#add_pgp').css("display","block");
  });

</script>
