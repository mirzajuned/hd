<% @medication_kit_data.each_with_index do |elem, i| %>
  <% if elem['status'].present? %>
    <tr class="treatmentmedications">
      <td style="text-align:center">
        <div class="form-group">
          <div class="input-group mb15">
            <div class="ui-widget">
              <%= hidden_field_tag "opdrecord[treatmentmedication_attributes][#{i}][pharmacy_item_id]", elem['pharmacy_item_id'], { class: 'form-control pharmacy_item_id' } %>
              <%= hidden_field_tag "opdrecord[treatmentmedication_attributes][#{i}][generic_display_name]", elem['generic_display_name'], { class: 'form-control generic_display_name' } %>
              <%= hidden_field_tag "opdrecord[treatmentmedication_attributes][#{i}][generic_display_ids]", elem['generic_display_ids'], { class: 'form-control generic_display_ids' } %>
              <%= hidden_field_tag "opdrecord[treatmentmedication_attributes][#{i}][medicine_from]", elem['medicine_from'], { class: 'form-control medicine_from' } %>
              <%= hidden_field_tag "opdrecord[treatmentmedication_attributes][#{i}][_destroy]", '0', { class: 'form-control' } %>
              <%= text_field_tag "opdrecord[treatmentmedication_attributes][#{i}][medicinename]", elem['medicinename'], { maxlength: 300, size: 40, class: 'form-control medicinename' } %>
            </div>
            <span id="medicinename-contents-<%= "#{i}" %>" class="btn btn-xs btn-success btn-square medicinename-contents hidden" data-medicinecontents=""><i class="fa fa-question-circle"></i></span>
          </div>
        </div>
      </td>
      <td style="text-align:center">
        <div class="form-group">
          <div class="input-group mb15">
            <%= text_field_tag "opdrecord[treatmentmedication_attributes][#{i}][medicinetype]", elem['medicinetype'], { class: 'form-control medicinetype' } %>
          </div>
        </div>
      </td>
      <td style="text-align:center;">
        <div class="form-group">
          <div class="input-group mb15">
            <%= select_tag "opdrecord[treatmentmedication_attributes][#{i}][medicinequantity]", options_for_select(['1/4', '1/2', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '20', '25', '30', '35', '40', '45', '50'], elem['medicinequantity']), { class: 'form-control medicinequantity' } %>
          </div>
        </div>
      </td>
      <td style="text-align:center">
        <div class="form-group">
          <div class="input-group mb15">
            <%= select_tag "opdrecord[treatmentmedication_attributes][#{i}][medicinefrequency]", options_for_select([['Select', ''], '1-1-1', '1-1-0', '1-0-1', '0-1-1', '1-0-0', '0-1-0', '0-0-1', '2-2-2', '2-0-2', '1-1-1-1', 'once a week', 'once a month', '5 times a day', '6 times a day', '8 times a day', '10 times a day', '12 times a day', '24 times a day', 'Sat-Sun', 'SOS'], elem['medicinefrequency']), { class: 'form-control medicinefrequency' } %>
          </div>
        </div>
      </td>
      <td style="text-align:center">
        <div class="form-group">
          <div class="input-group mb15">
            <div class="row">
              <div class="col-md-4 col-sm-4">
                <%= select_tag "opdrecord[treatmentmedication_attributes][#{i}][medicineduration]", options_for_select([['Sel', ''], ['1', '1'], ['2', '2'], ['3', '3'], ['4', '4'], ['5', '5'], ['6', '6'], ['7', '7'], ['8', '8'], ['9', '9'], ['10', '10'], ['11', '11'], ['12', '12'], ['15', '15'], ['20', '20'], ['25', '25'], ['30', '30'], ['40', '40'], ['50', '50']], elem['medicineduration']), { class: 'form-control medicineduration' } %>
              </div>

              <div class="col-md-8 col-sm-8">
                  <div class="col-md-12 col-sm-12">
                    <%= select_tag "opdrecord[treatmentmedication_attributes][#{i}][medicinedurationoption]", options_for_select([['Sel', ''], ['Days', 'D'], ['Weeks', 'W'], ['Months', 'M'], ['Next followup', 'F']], elem['medicinedurationoption']), { class: 'form-control medicinedurationoption' } %>
                  </div>
              </div>
            </div>
          </div>
        </div>
      </td>
      <td class="medication_instruction_box" style="text-align:center">
        <% if elem['medicineinstructions'].present? %>
          <div class="form-group edit_instruction_box">
            <div class="input-group mb15">
              <%= text_field_tag "opdrecord[treatmentmedication_attributes][#{i}][medicineinstructions]", elem['medicineinstructions'], { maxlength: 300, size: 40, class: 'form-control text_box_val', style: 'width: 86%' } %>
              <button type="button" class="btn btn-link undo_button_edit fa fa-undo" style="width: 0%; margin-left: -11%;"></button>
            </div>
          </div>
          <div class="form-group hide edit_instruction">
            <div class="input-group mb15">
              <%= select_tag "opdrecord[treatmentmedication_attributes][#{i}][instruction]", options_for_select(@medication_instruction_set, ''), { prompt: 'Please Select', class: 'form-control instruction_dropdown_edit', style: 'padding: 10px 0px' } %>
            </div>
          </div>
        <% elsif elem['instruction'].present? %>
          <div class="form-group edit-instruction">
            <div class="input-group mb15">
              <%= select_tag "opdrecord[treatmentmedication_attributes][#{i}][instruction]", options_for_select(@medication_instruction_set, elem['instruction']), { prompt: 'Please Select', class: 'form-control instruction_dropdown_magic', style: 'padding: 10px 0px' } %>
            </div>
          </div>
          <div class="form-group hide instruction_box">
            <div class="input-group mb15">
              <%= text_field_tag "opdrecord[treatmentmedication_attributes][#{i}][medicineinstructions]", nil, { maxlength: 300, size: 40, class: 'form-control text_box_val', style: 'width: 86%' } %>
              <button type="button" class="btn btn-link undo_button_magic fa fa-undo" style="width: 0%; margin-left: -11%;"></button>
            </div>
          </div>
        <% else %>
          <div class="form-group instruction">
            <div class="input-group mb15">
              <%= select_tag "opdrecord[treatmentmedication_attributes][#{i}][instruction]", options_for_select(@medication_instruction_set, ''), { prompt: 'Please Select', class: 'form-control instruction_dropdown', style: 'padding: 10px 0px' } %>
            </div>
          </div>
          <div class="form-group instruction_box hide">
            <div class="input-group mb15">
              <%= text_field_tag "opdrecord[treatmentmedication_attributes][#{i}][medicineinstructions]", nil, { maxlength: 300, size: 40, class: 'form-control text_box_val', style: 'width: 86%' } %>
              <button type="button" class="btn btn-link undo_button fa fa-undo" style="width: 0%; margin-left: -11%;"></button>
            </div>
          </div>
        <% end %>
      </td>
      <td style="text-align:center">
        <div class="form-group">
          <a id="addnewmedicationbutton1" class="btn btn-xs btn-primary btn-square add-new-btn" name="addnewmedicationbutton"><span class="glyphicon glyphicon-plus-sign"></span></a>
          <a id="removemedicationbutton1" class="btn btn-xs btn-primary btn-danger removemedicationbutton" name="removemedicationbutton"><span class="glyphicon glyphicon-remove"></span></a>
          <%= hidden_field_tag "opdrecord[treatmentmedication_attributes][#{i}][status]", elem['status'] || '' %>
          <a id="btnstatus" class="btn btn-xs btn-info <%= elem['btn_status'] %>" name="btnstatus"><%= elem['status'] %></a>
        </div>
      </td>
    </tr>
  <% end %>
<% end %>

<style type="text/css">
  .linethrough {
    opacity: 0.5;
  }
</style>
