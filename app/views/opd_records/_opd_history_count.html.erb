<% opd_histories = @opd_histories.where(:template_type => @templatetype, :action.ne => 'C').group_by { |h| h[:action] } %>
<% ["U", "P", "S", "US"].each do |a| %>
  <div class="col-md-6 mb10">
    <% if a == 'U' %>
      <strong>Updated</strong>
    <% elsif a == 'P' %>
      <strong>Printed</strong>
    <% elsif a == 'S' %>
      <strong>Sign-Off</strong>
    <% elsif a == 'US' %>
      <strong>Undo Sign-Off</strong>
    <% end %>
    <div class="mt5"><span class="template-<%= a %>" style="padding: 10px 12px;"><%= opd_histories[a].count rescue 0 %></span></div>
  </div>
<% end %>

<style type="text/css">
  .template-U {
    border-radius: 100%;
    background-color: #d9534f;
    font-size: 12px;
    color: #fff;
  }
  .template-C {
    border-radius: 100%;
    background-color: #1CAF9A;
    font-size: 12px;
    color: #fff;
  }
  .template-P {
    border-radius: 100%;
    background-color: #428bca;
    font-size: 12px;
    color: #fff;
  }
  .template-S {
    border-radius: 100%;
    background-color: #1CAF9A;
    font-size: 12px;
    color: #fff;
  }
  .template-US {
    border-radius: 100%;
    background-color: #f0ad4e;
    font-size: 12px;
    color: #fff;
  }
</style>