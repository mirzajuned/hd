<div class="modal-dialog modal-lg" style="width: 80%">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 class="modal-title">View Counselling Record</h4>
    </div>
    <div class="modal-body">
      <div style="padding: 10px; border: 1px solid #e3e3e3;">
        <div class="row" style="margin-bottom: 10px;">
          <div class="col-sm-4" style="margin-top: 10px;">
            Counselled by: <%= @counselling_record.counselled_by %>
          </div>
          <div class="col-sm-4" style="margin-top: 10px;">
            Created On: <%= @counselling_record.counselled_on.in_time_zone.strftime("%d%b'%y at %I:%M %p") %>
          </div>
          <div class="col-sm-4" style="margin-top: 10px;">
            Counselling Record ID: <%= @counselling_record.display_id %>
          </div>
        </div>
        <ul class="nav nav-pills nav-justified" style="width: 20%">
          <li role="presentation" class="active"><a href="#procedures" data-toggle="tab">Procedures</a></li>
          <li role="presentation"><a href="#investigations" data-toggle="tab">Investigations</a></li>
        </ul>
        <hr style="margin:0;border: 0.5px solid #e3e3e3;"/>
        <div class="tab-content admission-form-body">
          <div class="tab-pane active" id="procedures">
            <div class="row" style="color: #333;">
              <div class="col-sm-3"><strong>Procedures</strong></div>
              <div class="col-sm-2"><strong>Counselling Outcome</strong></div>
              <div class="col-sm-2"><strong>Current Status</strong></div>
              <div class="col-sm-2"><strong>Patient Comment</strong></div>
              <div class="col-sm-2"><strong>Counsellor Comment</strong></div>
            </div>
            <% if @orders_data.select{|p| p.type == 'procedures'}.length > 0 %>
              <% @orders_data.select{|p| p.type == 'procedures'}.each_with_index do |order_data, i| %>
                <%= render partial: '/orders/counselling_records/orders_data_show.html.erb', locals: { order_data: order_data, type: 'procedures' } %>
              <% end %>
            <% else %>
              <div class="row" style="text-align: center">No Data Found</div>
            <% end %>
          </div>
          <div class="tab-pane" id="investigations">
            <ul class="nav nav-pills nav-justified" style="width: 20%">
              <li role="presentation" class="active"><a href="#ophthalmology" data-toggle="tab">Ophthalmology</a></li>
              <li role="presentation"><a href="#laboratory" data-toggle="tab">Laboratory</a></li>
              <li role="presentation"><a href="#radiology" data-toggle="tab">Radiology</a></li>
            </ul>
            <div class="tab-content admission-form-body">
              <div class="tab-pane active" id="ophthalmology">
                <div class="row" style="color: #333;">
                  <div class="col-sm-2"><strong>Investigations</strong></div>
                  <div class="col-sm-2"><strong>Counselling Outcome</strong></div>
                  <div class="col-sm-2"><strong>Current Status</strong></div>
                  <div class="col-sm-1"><strong>Quantity</strong></div>
                  <div class="col-sm-2"><strong>Patient Comment</strong></div>
                  <div class="col-sm-2"><strong>Counsellor Comment</strong></div>
                  <div class="col-sm-1"><strong>Actions</strong></div>
                </div>
                <% if @orders_data.select{|p| p.type == 'ophthal_investigations'}.length > 0 %>
                  <% @orders_data.select{|p| p.type == 'ophthal_investigations'}.each_with_index do |order_data, i| %>
                    <%= render partial: '/orders/counselling_records/orders_data_show.html.erb', locals: { order_data: order_data, type: 'ophthal_investigations' } %>
                  <% end %>
                <% else %>
                  <div class="row" style="text-align: center">No Data Found</div>
                <% end %>
              </div>
              <div class="tab-pane" id="laboratory">
                <div class="row" style="color: #333;">
                  <div class="col-sm-2"><strong>Investigations</strong></div>
                  <div class="col-sm-2"><strong>Counselling Outcome</strong></div>
                  <div class="col-sm-2"><strong>Current Status</strong></div>
                  <div class="col-sm-1"><strong>Quantity</strong></div>
                  <div class="col-sm-2"><strong>Patient Comment</strong></div>
                  <div class="col-sm-2"><strong>Counsellor Comment</strong></div>
                  <div class="col-sm-1"><strong>Actions</strong></div>
                </div>
                <% if @orders_data.select{|p| p.type == 'laboratory_investigations'}.length > 0 %>
                  <% @orders_data.select{|p| p.type == 'laboratory_investigations'}.each_with_index do |order_data, i| %>
                    <%= render partial: '/orders/counselling_records/orders_data_show.html.erb', locals: { order_data: order_data, type: 'laboratory_investigations' } %>
                  <% end %>
                <% else %>
                  <div class="row" style="text-align: center">No Data Found</div>
                <% end %>
              </div>
              <div class="tab-pane" id="radiology">
                <div class="row" style="color: #333;">
                  <div class="col-sm-2"><strong>Investigations</strong></div>
                  <div class="col-sm-2"><strong>Counselling Outcome</strong></div>
                  <div class="col-sm-2"><strong>Current Status</strong></div>
                  <div class="col-sm-1"><strong>Quantity</strong></div>
                  <div class="col-sm-2"><strong>Patient Comment</strong></div>
                  <div class="col-sm-2"><strong>Counsellor Comment</strong></div>
                  <div class="col-sm-1"><strong>Actions</strong></div>
                </div>
                <% if @orders_data.select{|p| p.type == 'radiology_investigations'}.length > 0 %>
                  <% @orders_data.select{|p| p.type == 'radiology_investigations'}.each_with_index do |order_data, i| %>
                    <%= render partial: '/orders/counselling_records/orders_data_show.html.erb', locals: { order_data: order_data, type: 'radiology_investigations' } %>
                  <% end %>
                <% else %>
                  <div class="row" style="text-align: center">No Data Found</div>
                <% end %>
              </div>
          </div>
        </div>
        <div class="row" style="margin-top: 10px;margin-left: 10px;">
          <label>Counselling Record Comments:</label><br/>
          <div class="col-sm-6" style="margin-left: 20px;">
            <%= @counselling_record.comment %>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <div class="row">
        <div class="col-sm-8" style="text-align: left;margin-left: 20px;color: #ff0000;">
          To update orders statuses either create a new counselling record or update the one created today.
        </div>
        <div class="col-sm-4" style="width: 100px;float: right;">
          <button class="form-control btn btn-sm btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  #order-procedures-table.table-striped > tbody > tr:nth-child(2n+1) > td, .table-striped > tbody > tr:nth-child(2n+1) > th {
    background-color: #fff;
  }
  .orders-data:nth-child(odd) {
    background-color: #fff;
  }
  .orders-data:nth-child(even) {

    background-color: #e3e3e3;
  }
</style>