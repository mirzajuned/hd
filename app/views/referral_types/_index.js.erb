$("#referral_type").on('change', function(){
  $("#referral_type").attr('disabled', 'disabled')
  var referral_type_id = $(this).val()
  var search = $('.search-sub-referral').val()
  search_filter(search, referral_type_id)
})


$(".search-sub-referral").on('keyup', function(){
  var search = $(this).val()
  var referral_type_id = $("#referral_type").val()
  search_filter(search, referral_type_id)
})


function search_filter(search, referral_type_id){
  $.ajax({
    type: 'GET',
    dataType: 'script',
    data: { referral_type_id: referral_type_id, search: search },
    url: '/sub_referral_types/search_filter',
    success: function(){
      $("#referral_type").removeAttr('disabled', 'disabled')
    }
  })
}