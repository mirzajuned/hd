<% errors = @user_time_slot.errors.full_messages + @user_time_slot.sessions.map{ |s| s.errors.full_messages }.flatten.uniq + @user_time_slot.exception_sessions.map{ |s| s.errors.full_messages }.flatten.uniq %>

$('.ui-pnotify').remove();

notice = new PNotify({
  title: 'Error',
  text: "<%= errors.empty? ? 'Something went wrong' : errors.join('\n') %>",
  type: 'error'
});

notice.get().click(function(){
  notice.remove()
});
